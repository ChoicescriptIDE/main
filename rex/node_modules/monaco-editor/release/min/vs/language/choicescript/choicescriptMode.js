/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.1(0921cc07f7b23348f89780315139a799fb55ff0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
define("vs/language/choicescript/choicescriptMode",[],()=>{
var moduleExports=(()=>{var $e=Object.create;var R=Object.defineProperty;var qe=Object.getOwnPropertyDescriptor;var Be=Object.getOwnPropertyNames;var Qe=Object.getPrototypeOf,Ge=Object.prototype.hasOwnProperty;var H=t=>R(t,"__esModule",{value:!0});var Je=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),Ye=(t,n)=>{H(t);for(var i in n)R(t,i,{get:n[i],enumerable:!0})},z=(t,n,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of Be(n))!Ge.call(t,r)&&r!=="default"&&R(t,r,{get:()=>n[r],enumerable:!(i=qe(n,r))||i.enumerable});return t},Ze=t=>z(H(R(t!=null?$e(Qe(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var ue=Je((ft,oe)=>{oe.exports=self.monaco});var dt={};Ye(dt,{setupMode:()=>ct});var d={};H(d);z(d,Ze(ue()));"use strict";var Ke=2*60*1e3,X=class{constructor(n){this._defaults=n,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>Ke&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=d.editor.createWebWorker({moduleId:"vs/language/choicescript/choicescriptWorker",label:this._defaults.languageId,createData:{languageSettings:this._defaults.diagnosticsOptions,languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...n){let i;return this._getClient().then(r=>{i=r}).then(r=>{if(this._worker)return this._worker.withSyncedResources(n)}).then(r=>i)}};"use strict";var ce;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(ce||(ce={}));var W;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(W||(W={}));var y;(function(t){function n(r,e){return r===Number.MAX_VALUE&&(r=W.MAX_VALUE),e===Number.MAX_VALUE&&(e=W.MAX_VALUE),{line:r,character:e}}t.create=n;function i(r){var e=r;return o.objectLiteral(e)&&o.uinteger(e.line)&&o.uinteger(e.character)}t.is=i})(y||(y={}));var m;(function(t){function n(r,e,s,a){if(o.uinteger(r)&&o.uinteger(e)&&o.uinteger(s)&&o.uinteger(a))return{start:y.create(r,e),end:y.create(s,a)};if(y.is(r)&&y.is(e))return{start:r,end:e};throw new Error("Range#create called with invalid arguments["+r+", "+e+", "+s+", "+a+"]")}t.create=n;function i(r){var e=r;return o.objectLiteral(e)&&y.is(e.start)&&y.is(e.end)}t.is=i})(m||(m={}));var $;(function(t){function n(r,e){return{uri:r,range:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&m.is(e.range)&&(o.string(e.uri)||o.undefined(e.uri))}t.is=i})($||($={}));var de;(function(t){function n(r,e,s,a){return{targetUri:r,targetRange:e,targetSelectionRange:s,originSelectionRange:a}}t.create=n;function i(r){var e=r;return o.defined(e)&&m.is(e.targetRange)&&o.string(e.targetUri)&&(m.is(e.targetSelectionRange)||o.undefined(e.targetSelectionRange))&&(m.is(e.originSelectionRange)||o.undefined(e.originSelectionRange))}t.is=i})(de||(de={}));var q;(function(t){function n(r,e,s,a){return{red:r,green:e,blue:s,alpha:a}}t.create=n;function i(r){var e=r;return o.numberRange(e.red,0,1)&&o.numberRange(e.green,0,1)&&o.numberRange(e.blue,0,1)&&o.numberRange(e.alpha,0,1)}t.is=i})(q||(q={}));var le;(function(t){function n(r,e){return{range:r,color:e}}t.create=n;function i(r){var e=r;return m.is(e.range)&&q.is(e.color)}t.is=i})(le||(le={}));var fe;(function(t){function n(r,e,s){return{label:r,textEdit:e,additionalTextEdits:s}}t.create=n;function i(r){var e=r;return o.string(e.label)&&(o.undefined(e.textEdit)||k.is(e))&&(o.undefined(e.additionalTextEdits)||o.typedArray(e.additionalTextEdits,k.is))}t.is=i})(fe||(fe={}));var ge;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(ge||(ge={}));var pe;(function(t){function n(r,e,s,a,u){var l={startLine:r,endLine:e};return o.defined(s)&&(l.startCharacter=s),o.defined(a)&&(l.endCharacter=a),o.defined(u)&&(l.kind=u),l}t.create=n;function i(r){var e=r;return o.uinteger(e.startLine)&&o.uinteger(e.startLine)&&(o.undefined(e.startCharacter)||o.uinteger(e.startCharacter))&&(o.undefined(e.endCharacter)||o.uinteger(e.endCharacter))&&(o.undefined(e.kind)||o.string(e.kind))}t.is=i})(pe||(pe={}));var B;(function(t){function n(r,e){return{location:r,message:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&$.is(e.location)&&o.string(e.message)}t.is=i})(B||(B={}));var T;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(T||(T={}));var he;(function(t){t.Unnecessary=1,t.Deprecated=2})(he||(he={}));var ve;(function(t){function n(i){var r=i;return r!=null&&o.string(r.href)}t.is=n})(ve||(ve={}));var L;(function(t){function n(r,e,s,a,u,l){var g={range:r,message:e};return o.defined(s)&&(g.severity=s),o.defined(a)&&(g.code=a),o.defined(u)&&(g.source=u),o.defined(l)&&(g.relatedInformation=l),g}t.create=n;function i(r){var e,s=r;return o.defined(s)&&m.is(s.range)&&o.string(s.message)&&(o.number(s.severity)||o.undefined(s.severity))&&(o.integer(s.code)||o.string(s.code)||o.undefined(s.code))&&(o.undefined(s.codeDescription)||o.string((e=s.codeDescription)===null||e===void 0?void 0:e.href))&&(o.string(s.source)||o.undefined(s.source))&&(o.undefined(s.relatedInformation)||o.typedArray(s.relatedInformation,B.is))}t.is=i})(L||(L={}));var A;(function(t){function n(r,e){for(var s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];var u={title:r,command:e};return o.defined(s)&&s.length>0&&(u.arguments=s),u}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.title)&&o.string(e.command)}t.is=i})(A||(A={}));var k;(function(t){function n(s,a){return{range:s,newText:a}}t.replace=n;function i(s,a){return{range:{start:s,end:s},newText:a}}t.insert=i;function r(s){return{range:s,newText:""}}t.del=r;function e(s){var a=s;return o.objectLiteral(a)&&o.string(a.newText)&&m.is(a.range)}t.is=e})(k||(k={}));var E;(function(t){function n(r,e,s){var a={label:r};return e!==void 0&&(a.needsConfirmation=e),s!==void 0&&(a.description=s),a}t.create=n;function i(r){var e=r;return e!==void 0&&o.objectLiteral(e)&&o.string(e.label)&&(o.boolean(e.needsConfirmation)||e.needsConfirmation===void 0)&&(o.string(e.description)||e.description===void 0)}t.is=i})(E||(E={}));var _;(function(t){function n(i){var r=i;return typeof r=="string"}t.is=n})(_||(_={}));var w;(function(t){function n(s,a,u){return{range:s,newText:a,annotationId:u}}t.replace=n;function i(s,a,u){return{range:{start:s,end:s},newText:a,annotationId:u}}t.insert=i;function r(s,a){return{range:s,newText:"",annotationId:a}}t.del=r;function e(s){var a=s;return k.is(a)&&(E.is(a.annotationId)||_.is(a.annotationId))}t.is=e})(w||(w={}));var F;(function(t){function n(r,e){return{textDocument:r,edits:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&N.is(e.textDocument)&&Array.isArray(e.edits)}t.is=i})(F||(F={}));var S;(function(t){function n(r,e,s){var a={kind:"create",uri:r};return e!==void 0&&(e.overwrite!==void 0||e.ignoreIfExists!==void 0)&&(a.options=e),s!==void 0&&(a.annotationId=s),a}t.create=n;function i(r){var e=r;return e&&e.kind==="create"&&o.string(e.uri)&&(e.options===void 0||(e.options.overwrite===void 0||o.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||o.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||_.is(e.annotationId))}t.is=i})(S||(S={}));var M;(function(t){function n(r,e,s,a){var u={kind:"rename",oldUri:r,newUri:e};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(u.options=s),a!==void 0&&(u.annotationId=a),u}t.create=n;function i(r){var e=r;return e&&e.kind==="rename"&&o.string(e.oldUri)&&o.string(e.newUri)&&(e.options===void 0||(e.options.overwrite===void 0||o.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||o.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||_.is(e.annotationId))}t.is=i})(M||(M={}));var D;(function(t){function n(r,e,s){var a={kind:"delete",uri:r};return e!==void 0&&(e.recursive!==void 0||e.ignoreIfNotExists!==void 0)&&(a.options=e),s!==void 0&&(a.annotationId=s),a}t.create=n;function i(r){var e=r;return e&&e.kind==="delete"&&o.string(e.uri)&&(e.options===void 0||(e.options.recursive===void 0||o.boolean(e.options.recursive))&&(e.options.ignoreIfNotExists===void 0||o.boolean(e.options.ignoreIfNotExists)))&&(e.annotationId===void 0||_.is(e.annotationId))}t.is=i})(D||(D={}));var Q;(function(t){function n(i){var r=i;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(e){return o.string(e.kind)?S.is(e)||M.is(e)||D.is(e):F.is(e)}))}t.is=n})(Q||(Q={}));var j=function(){function t(n,i){this.edits=n,this.changeAnnotations=i}return t.prototype.insert=function(n,i,r){var e,s;if(r===void 0?e=k.insert(n,i):_.is(r)?(s=r,e=w.insert(n,i,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),e=w.insert(n,i,s)),this.edits.push(e),s!==void 0)return s},t.prototype.replace=function(n,i,r){var e,s;if(r===void 0?e=k.replace(n,i):_.is(r)?(s=r,e=w.replace(n,i,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),e=w.replace(n,i,s)),this.edits.push(e),s!==void 0)return s},t.prototype.delete=function(n,i){var r,e;if(i===void 0?r=k.del(n):_.is(i)?(e=i,r=w.del(n,i)):(this.assertChangeAnnotations(this.changeAnnotations),e=this.changeAnnotations.manage(i),r=w.del(n,e)),this.edits.push(r),e!==void 0)return e},t.prototype.add=function(n){this.edits.push(n)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(n){if(n===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),me=function(){function t(n){this._annotations=n===void 0?Object.create(null):n,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(n,i){var r;if(_.is(n)?r=n:(r=this.nextId(),i=n),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(i===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=i,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),_t=function(){function t(n){var i=this;this._textEditChanges=Object.create(null),n!==void 0?(this._workspaceEdit=n,n.documentChanges?(this._changeAnnotations=new me(n.changeAnnotations),n.changeAnnotations=this._changeAnnotations.all(),n.documentChanges.forEach(function(r){if(F.is(r)){var e=new j(r.edits,i._changeAnnotations);i._textEditChanges[r.textDocument.uri]=e}})):n.changes&&Object.keys(n.changes).forEach(function(r){var e=new j(n.changes[r]);i._textEditChanges[r]=e})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(n){if(N.is(n)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i={uri:n.uri,version:n.version},r=this._textEditChanges[i.uri];if(!r){var e=[],s={textDocument:i,edits:e};this._workspaceEdit.documentChanges.push(s),r=new j(e,this._changeAnnotations),this._textEditChanges[i.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[n];if(!r){var e=[];this._workspaceEdit.changes[n]=e,r=new j(e),this._textEditChanges[n]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new me,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(n,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var e;E.is(i)||_.is(i)?e=i:r=i;var s,a;if(e===void 0?s=S.create(n,r):(a=_.is(e)?e:this._changeAnnotations.manage(e),s=S.create(n,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},t.prototype.renameFile=function(n,i,r,e){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;E.is(r)||_.is(r)?s=r:e=r;var a,u;if(s===void 0?a=M.create(n,i,e):(u=_.is(s)?s:this._changeAnnotations.manage(s),a=M.create(n,i,e,u)),this._workspaceEdit.documentChanges.push(a),u!==void 0)return u},t.prototype.deleteFile=function(n,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var e;E.is(i)||_.is(i)?e=i:r=i;var s,a;if(e===void 0?s=D.create(n,r):(a=_.is(e)?e:this._changeAnnotations.manage(e),s=D.create(n,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},t}();var _e;(function(t){function n(r){return{uri:r}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.uri)}t.is=i})(_e||(_e={}));var xe;(function(t){function n(r,e){return{uri:r,version:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.uri)&&o.integer(e.version)}t.is=i})(xe||(xe={}));var N;(function(t){function n(r,e){return{uri:r,version:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.uri)&&(e.version===null||o.integer(e.version))}t.is=i})(N||(N={}));var be;(function(t){function n(r,e,s,a){return{uri:r,languageId:e,version:s,text:a}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.uri)&&o.string(e.languageId)&&o.integer(e.version)&&o.string(e.text)}t.is=i})(be||(be={}));var P;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(P||(P={}));(function(t){function n(i){var r=i;return r===t.PlainText||r===t.Markdown}t.is=n})(P||(P={}));var G;(function(t){function n(i){var r=i;return o.objectLiteral(i)&&P.is(r.kind)&&o.string(r.value)}t.is=n})(G||(G={}));var h;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(h||(h={}));var U;(function(t){t.PlainText=1,t.Snippet=2})(U||(U={}));var ye;(function(t){t.Deprecated=1})(ye||(ye={}));var ke;(function(t){function n(r,e,s){return{newText:r,insert:e,replace:s}}t.create=n;function i(r){var e=r;return e&&o.string(e.newText)&&m.is(e.insert)&&m.is(e.replace)}t.is=i})(ke||(ke={}));var we;(function(t){t.asIs=1,t.adjustIndentation=2})(we||(we={}));var Ie;(function(t){function n(i){return{label:i}}t.create=n})(Ie||(Ie={}));var Ce;(function(t){function n(i,r){return{items:i||[],isIncomplete:!!r}}t.create=n})(Ce||(Ce={}));var O;(function(t){function n(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=n;function i(r){var e=r;return o.string(e)||o.objectLiteral(e)&&o.string(e.language)&&o.string(e.value)}t.is=i})(O||(O={}));var Te;(function(t){function n(i){var r=i;return!!r&&o.objectLiteral(r)&&(G.is(r.contents)||O.is(r.contents)||o.typedArray(r.contents,O.is))&&(i.range===void 0||m.is(i.range))}t.is=n})(Te||(Te={}));var Ee;(function(t){function n(i,r){return r?{label:i,documentation:r}:{label:i}}t.create=n})(Ee||(Ee={}));var Ae;(function(t){function n(i,r){for(var e=[],s=2;s<arguments.length;s++)e[s-2]=arguments[s];var a={label:i};return o.defined(r)&&(a.documentation=r),o.defined(e)?a.parameters=e:a.parameters=[],a}t.create=n})(Ae||(Ae={}));var Se;(function(t){t.Text=1,t.Read=2,t.Write=3})(Se||(Se={}));var Me;(function(t){function n(i,r){var e={range:i};return o.number(r)&&(e.kind=r),e}t.create=n})(Me||(Me={}));var v;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(v||(v={}));var De;(function(t){t.Deprecated=1})(De||(De={}));var Pe;(function(t){function n(i,r,e,s,a){var u={name:i,kind:r,location:{uri:s,range:e}};return a&&(u.containerName=a),u}t.create=n})(Pe||(Pe={}));var Re;(function(t){function n(r,e,s,a,u,l){var g={name:r,detail:e,kind:s,range:a,selectionRange:u};return l!==void 0&&(g.children=l),g}t.create=n;function i(r){var e=r;return e&&o.string(e.name)&&o.number(e.kind)&&m.is(e.range)&&m.is(e.selectionRange)&&(e.detail===void 0||o.string(e.detail))&&(e.deprecated===void 0||o.boolean(e.deprecated))&&(e.children===void 0||Array.isArray(e.children))&&(e.tags===void 0||Array.isArray(e.tags))}t.is=i})(Re||(Re={}));var We;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(We||(We={}));var Le;(function(t){function n(r,e){var s={diagnostics:r};return e!=null&&(s.only=e),s}t.create=n;function i(r){var e=r;return o.defined(e)&&o.typedArray(e.diagnostics,L.is)&&(e.only===void 0||o.typedArray(e.only,o.string))}t.is=i})(Le||(Le={}));var Fe;(function(t){function n(r,e,s){var a={title:r},u=!0;return typeof e=="string"?(u=!1,a.kind=e):A.is(e)?a.command=e:a.edit=e,u&&s!==void 0&&(a.kind=s),a}t.create=n;function i(r){var e=r;return e&&o.string(e.title)&&(e.diagnostics===void 0||o.typedArray(e.diagnostics,L.is))&&(e.kind===void 0||o.string(e.kind))&&(e.edit!==void 0||e.command!==void 0)&&(e.command===void 0||A.is(e.command))&&(e.isPreferred===void 0||o.boolean(e.isPreferred))&&(e.edit===void 0||Q.is(e.edit))}t.is=i})(Fe||(Fe={}));var je;(function(t){function n(r,e){var s={range:r};return o.defined(e)&&(s.data=e),s}t.create=n;function i(r){var e=r;return o.defined(e)&&m.is(e.range)&&(o.undefined(e.command)||A.is(e.command))}t.is=i})(je||(je={}));var Ne;(function(t){function n(r,e){return{tabSize:r,insertSpaces:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.uinteger(e.tabSize)&&o.boolean(e.insertSpaces)}t.is=i})(Ne||(Ne={}));var Ue;(function(t){function n(r,e,s){return{range:r,target:e,data:s}}t.create=n;function i(r){var e=r;return o.defined(e)&&m.is(e.range)&&(o.undefined(e.target)||o.string(e.target))}t.is=i})(Ue||(Ue={}));var Oe;(function(t){function n(r,e){return{range:r,parent:e}}t.create=n;function i(r){var e=r;return e!==void 0&&m.is(e.range)&&(e.parent===void 0||t.is(e.parent))}t.is=i})(Oe||(Oe={}));var Ve;(function(t){function n(s,a,u,l){return new et(s,a,u,l)}t.create=n;function i(s){var a=s;return!!(o.defined(a)&&o.string(a.uri)&&(o.undefined(a.languageId)||o.string(a.languageId))&&o.uinteger(a.lineCount)&&o.func(a.getText)&&o.func(a.positionAt)&&o.func(a.offsetAt))}t.is=i;function r(s,a){for(var u=s.getText(),l=e(a,function(b,C){var ae=b.range.start.line-C.range.start.line;return ae===0?b.range.start.character-C.range.start.character:ae}),g=u.length,c=l.length-1;c>=0;c--){var p=l[c],x=s.offsetAt(p.range.start),f=s.offsetAt(p.range.end);if(f<=g)u=u.substring(0,x)+p.newText+u.substring(f,u.length);else throw new Error("Overlapping edit");g=x}return u}t.applyEdits=r;function e(s,a){if(s.length<=1)return s;var u=s.length/2|0,l=s.slice(0,u),g=s.slice(u);e(l,a),e(g,a);for(var c=0,p=0,x=0;c<l.length&&p<g.length;){var f=a(l[c],g[p]);f<=0?s[x++]=l[c++]:s[x++]=g[p++]}for(;c<l.length;)s[x++]=l[c++];for(;p<g.length;)s[x++]=g[p++];return s}})(Ve||(Ve={}));var et=function(){function t(n,i,r,e){this._uri=n,this._languageId=i,this._version=r,this._content=e,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(n){if(n){var i=this.offsetAt(n.start),r=this.offsetAt(n.end);return this._content.substring(i,r)}return this._content},t.prototype.update=function(n,i){this._content=n.text,this._version=i,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var n=[],i=this._content,r=!0,e=0;e<i.length;e++){r&&(n.push(e),r=!1);var s=i.charAt(e);r=s==="\r"||s===`
`,s==="\r"&&e+1<i.length&&i.charAt(e+1)===`
`&&e++}r&&i.length>0&&n.push(i.length),this._lineOffsets=n}return this._lineOffsets},t.prototype.positionAt=function(n){n=Math.max(Math.min(n,this._content.length),0);var i=this.getLineOffsets(),r=0,e=i.length;if(e===0)return y.create(0,n);for(;r<e;){var s=Math.floor((r+e)/2);i[s]>n?e=s:r=s+1}var a=r-1;return y.create(a,n-i[a])},t.prototype.offsetAt=function(n){var i=this.getLineOffsets();if(n.line>=i.length)return this._content.length;if(n.line<0)return 0;var r=i[n.line],e=n.line+1<i.length?i[n.line+1]:this._content.length;return Math.max(Math.min(r+n.character,e),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),o;(function(t){var n=Object.prototype.toString;function i(f){return typeof f!="undefined"}t.defined=i;function r(f){return typeof f=="undefined"}t.undefined=r;function e(f){return f===!0||f===!1}t.boolean=e;function s(f){return n.call(f)==="[object String]"}t.string=s;function a(f){return n.call(f)==="[object Number]"}t.number=a;function u(f,b,C){return n.call(f)==="[object Number]"&&b<=f&&f<=C}t.numberRange=u;function l(f){return n.call(f)==="[object Number]"&&-2147483648<=f&&f<=2147483647}t.integer=l;function g(f){return n.call(f)==="[object Number]"&&0<=f&&f<=2147483647}t.uinteger=g;function c(f){return n.call(f)==="[object Function]"}t.func=c;function p(f){return f!==null&&typeof f=="object"}t.objectLiteral=p;function x(f,b){return Array.isArray(f)&&f.every(b)}t.typedArray=x})(o||(o={}));var J=class{constructor(n,i,r){this._languageId=n;this._worker=i;this._disposables=[];this._listener=Object.create(null);let e=a=>{let u=a.getLanguageId();if(u!==this._languageId)return;let l;this._listener[a.uri.toString()]=a.onDidChangeContent(()=>{window.clearTimeout(l),l=window.setTimeout(()=>this._doValidate(a.uri,u),500)}),this._doValidate(a.uri,u)},s=a=>{d.editor.setModelMarkers(a,this._languageId,[]);let u=a.uri.toString(),l=this._listener[u];l&&(l.dispose(),delete this._listener[u])};this._disposables.push(d.editor.onDidCreateModel(e)),this._disposables.push(d.editor.onWillDisposeModel(s)),this._disposables.push(d.editor.onDidChangeModelLanguage(a=>{s(a.model),e(a.model)})),this._disposables.push(r.onDidChange(a=>{d.editor.getModels().forEach(u=>{u.getLanguageId()===this._languageId&&(s(u),e(u))})})),this._disposables.push(r.onDictionaryChange(a=>{d.editor.getModels().forEach(u=>{u.getLanguageId()===this._languageId&&this._doValidate(u.uri,u.getLanguageId())})})),this._disposables.push({dispose:()=>{d.editor.getModels().forEach(s);for(let a in this._listener)this._listener[a].dispose()}}),d.editor.getModels().forEach(e)}dispose(){this._disposables.forEach(n=>n&&n.dispose()),this._disposables=[]}_doValidate(n,i){this._worker(n).then(r=>r.doValidation(n.toString())).then(r=>{let e=r.map(a=>nt(n,a)),s=d.editor.getModel(n);s&&s.getLanguageId()===i&&d.editor.setModelMarkers(s,i,e)}).then(void 0,r=>{console.error(r)})}};function tt(t){switch(t){case T.Error:return d.MarkerSeverity.Error;case T.Warning:return d.MarkerSeverity.Warning;case T.Information:return d.MarkerSeverity.Info;case T.Hint:return d.MarkerSeverity.Hint;default:return d.MarkerSeverity.Info}}function nt(t,n){let i=typeof n.code=="number"?String(n.code):n.code;return{severity:n.severity?tt(n.severity):d.MarkerSeverity.Info,startLineNumber:n.range.start.line+1,startColumn:n.range.start.character+1,endLineNumber:n.range.end.line+1,endColumn:n.range.end.character+1,message:n.message,code:i,source:n.source}}function V(t){return{character:t.column-1,line:t.lineNumber-1}}function I(t){return new d.Range(t.start.line+1,t.start.character+1,t.end.line+1,t.end.character+1)}function rt(t){return typeof t.insert!="undefined"&&typeof t.replace!="undefined"}function it(t){let n=d.languages.CompletionItemKind;switch(t){case h.Text:return n.Text;case h.Method:return n.Method;case h.Function:return n.Function;case h.Constructor:return n.Constructor;case h.Field:return n.Field;case h.Variable:return n.Variable;case h.Class:return n.Class;case h.Interface:return n.Interface;case h.Module:return n.Module;case h.Property:return n.Property;case h.Unit:return n.Unit;case h.Value:return n.Value;case h.Enum:return n.Enum;case h.Keyword:return n.Keyword;case h.Snippet:return n.Snippet;case h.Color:return n.Color;case h.File:return n.File;case h.Reference:return n.Reference}return n.Property}function st(t){return{range:I(t.range),text:t.newText}}var Y=class{constructor(n){this._worker=n}get triggerCharacters(){return[" ",":"]}provideCompletionItems(n,i,r,e){let s=n.uri;return this._worker(s).then(a=>a.doComplete(s.toString(),V(i))).then(a=>{if(!a)return;let u=n.getWordUntilPosition(i),l=new d.Range(i.lineNumber,u.startColumn,i.lineNumber,u.endColumn),g=a.items.map(c=>{let p={label:c.label,insertText:c.insertText||c.label,sortText:c.sortText,filterText:c.filterText,documentation:c.documentation?Z(c.documentation):void 0,detail:c.detail,range:l,kind:c.kind?it(c.kind):h.Value};return c.textEdit&&(rt(c.textEdit)?p.range={insert:I(c.textEdit.insert),replace:I(c.textEdit.replace)}:p.range=I(c.textEdit.range),p.insertText=c.textEdit.newText),c.additionalTextEdits&&(p.additionalTextEdits=c.additionalTextEdits.map(st)),c.insertTextFormat===U.Snippet&&(p.insertTextRules=d.languages.CompletionItemInsertTextRule.InsertAsSnippet),p});return{isIncomplete:a.isIncomplete,suggestions:g}})}};function at(t){return t&&typeof t=="object"&&typeof t.kind=="string"}function Z(t){return typeof t=="string"?{value:t}:at(t)?t.kind==="plaintext"?{value:t.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:t.value}:{value:"```"+t.language+`
`+t.value+"\n```\n"}}function ot(t){return t?Array.isArray(t)?t.map(Z):[Z(t)]:[]}var K=class{constructor(n){this._worker=n}provideHover(n,i,r){let e=n.uri;return this._worker(e).then(s=>s.doHover(e.toString(),V(i))).then(s=>{if(!(!s||!s.range))return{range:I(s.range),contents:ot(s.contents)}})}},ee=class{constructor(n){this._worker=n}provideCodeActions(n,i,r,e){let s=n.uri,a=[];return this._worker(s).then(u=>{let l=r.markers;if(!(l.length<=0)){l=l.filter(c=>c.code==="badSpelling"),l=l.slice(0,1);for(let c of l){var g=new d.Range(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn);let p=n.getWordAtPosition(new d.Position(g.startLineNumber,g.startColumn));!p||a.push({word:p.word,range:g})}if(!(a.length<=0))return u.suggestSpelling(a.map(c=>c.word))}}).then(u=>{if(!u)return;let l=[];if(u.length>0)for(var g=0;g<u[0].length;g++)l.push({title:"Correct spelling: "+u[0][g],kind:"quickfix",edit:{edits:[{edit:{range:a[0].range,text:u[0][g]},resource:n.uri}]}});return l.push({title:"Ignore '"+a[0].word+"' this session",kind:"quickfix",command:{id:"add-words",title:"Ignore Word",arguments:[{uri:s,dict:"session",words:[a[0].word]}]}}),l.push({title:"Add '"+a[0].word+"' to the User Dictionary",kind:"quickfix",command:{id:"add-words",title:"Add Word",arguments:[{uri:s,dict:"persistent",words:[a[0].word]}]}}),l.length>0?{actions:l,dispose:()=>{}}:void 0})}},te=class{constructor(n){this._worker=n;this.signatureHelpTriggerCharacters=[" "]}provideSignatureHelp(n,i,r,e){let s=n.uri;return this._worker(s).then(a=>{let u=n.getLineContent(i.lineNumber),l,g,c,p;if((g=u.match(/^(\s*\*gosub_scene\s+(\w+)\s+(\w+))/))?(l=!0,c=g[2],p=g[3]):(g=u.match(/^(\s*\*gosub\s+(\w+))/))&&(l=!1,p=g[2]),!g||g.length<3)return;let x=u.slice(g[1].length).trim().split(" ").filter(f=>f).length;return a.getRoutineInfo(s.toString(),n.getOffsetAt(i)).then(f=>{if(f)return{value:{signatures:[{label:`${c}.txt -> ${p}: ${f.parameters.map(b=>b.label).join(" ")}`,parameters:f.parameters}],activeSignature:f.activeSignature,activeParameter:f.activeParameter},dispose:()=>{}}})})}};function He(t){return{uri:d.Uri.parse(t.uri),range:I(t.range)}}var ne=class{constructor(n){this._worker=n}async provideDefinition(n,i,r){let e=n.uri,s=await this._worker(e);if(n.isDisposed())return;let a=await s.findDefinition(e.toString(),V(i));if(a)return n.isDisposed()?void 0:[He(a)]}},re=class{constructor(n){this._worker=n}provideReferences(n,i,r,e){let s=n.uri;return this._worker(s).then(a=>a.findReferences(s.toString(),V(i))).then(a=>{if(!!a)return a.map(He)})}};function ut(t){let n=d.languages.SymbolKind;switch(t){case v.File:return n.Array;case v.Module:return n.Module;case v.Namespace:return n.Namespace;case v.Package:return n.Package;case v.Class:return n.Class;case v.Method:return n.Method;case v.Property:return n.Property;case v.Field:return n.Field;case v.Constructor:return n.Constructor;case v.Enum:return n.Enum;case v.Interface:return n.Interface;case v.Function:return n.Function;case v.Variable:return n.Variable;case v.Constant:return n.Constant;case v.String:return n.String;case v.Number:return n.Number;case v.Boolean:return n.Boolean;case v.Array:return n.Array}return n.Function}var ie=class{constructor(n){this._worker=n}provideDocumentSymbols(n,i){let r=n.uri;return this._worker(r).then(e=>e.findDocumentSymbols(r.toString())).then(e=>{if(!!e)return e.map(s=>({name:s.name,detail:"",containerName:s.containerName,kind:ut(s.kind),tags:[],range:I(s.location.range),selectionRange:I(s.location.range)}))})}},se=class{constructor(n,i){this._languageId=n;this._worker=i;this._disposables=[];this._listener=Object.create(null);let r=s=>{if(s.getLanguageId()!==this._languageId)return;let u;this._listener[s.uri.toString()]=s.onDidChangeContent(()=>{window.clearTimeout(u),u=window.setTimeout(()=>this._updateIndex(s.uri),1e3)}),this._updateIndex(s.uri)},e=s=>{this._removeIndex(s.uri);let a=s.uri.toString(),u=this._listener[a];u&&(u.dispose(),delete this._listener[a])};this._disposables.push(d.editor.onDidCreateModel(r)),this._disposables.push(d.editor.onWillDisposeModel(e)),this._disposables.push({dispose:()=>{for(let s in this._listener)this._listener[s].dispose()}}),d.editor.getModels().forEach(r)}_updateIndex(n){this._worker(n).then(i=>i.updateIndex(n.toString()))}_removeIndex(n){this._worker(n).then(i=>i.removeIndex(n.toString()))}dispose(){this._disposables.forEach(n=>n&&n.dispose()),this._disposables=[]}};"use strict";function ct(t){let n=[],i=[],r=new X(t);n.push(r);let e=(...a)=>r.getLanguageServiceWorker(...a);function s(){let{languageId:a,modeConfiguration:u}=t;if(Xe(i),u.completionItems&&i.push(d.languages.registerCompletionItemProvider(a,new Y(e))),u.hovers&&i.push(d.languages.registerHoverProvider(a,new K(e))),u.definitions&&i.push(d.languages.registerDefinitionProvider(a,new ne(e))),u.references&&i.push(d.languages.registerReferenceProvider(a,new re(e))),u.documentSymbols&&i.push(d.languages.registerDocumentSymbolProvider(a,new ie(e))),i.push(d.languages.registerSignatureHelpProvider(a,new te(e))),u.diagnostics&&i.push(d.languages.registerCodeActionProvider(a,new ee(e))),u.diagnostics&&i.push(new J(a,e,t)),u.autoFormat){var l={".":{match:"...",result:"\u2026"},"-":{match:"--",result:"\u2014"}};i.push(d.languages.registerOnTypeFormattingEditProvider(a,{autoFormatTriggerCharacters:Object.keys(l),provideOnTypeFormattingEdits:function(g,c,p,x,f){var b=l[p].match.length,C=new d.Range(c.lineNumber,c.column>=b?c.column-b:0,c.lineNumber,c.column);if(g.getValueInRange(C)===l[p].match)return[{range:C,text:l[p].result}]}}))}i.push(new se(a,e)),n.push(d.editor.registerCommand("add-words",(g,c)=>{Array.isArray(c)&&(c=c[0]),e(c.uri).then(p=>{p.addWords(c.words).then(x=>{t.addDictWords(c.dict,x.filter(f=>f))})})})),n.push(d.editor.registerCommand("remove-words",(g,c)=>{e(c.uri).then(p=>{p.removeWords(c.words).then(x=>{t.removeDictWords(c.dict,x.filter(f=>f))})})}))}return e(new d.Uri).then(a=>{let u=t.diagnosticsOptions.spellcheck.userDictionary,l=[];for(let g in u)l.push(g);a.addWords(l)}),s(),n.push(ze(i)),ze(n)}function ze(t){return{dispose:()=>Xe(t)}}function Xe(t){for(;t.length;)t.pop().dispose()}return dt;})();
return moduleExports;
});
