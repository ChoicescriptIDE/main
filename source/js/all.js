function IDEViewModel(){function e(e){return e=e.replace(/\\/g,"/")}function t(e){var t=this,n=ko.observable(e.name?e.name:f(e.path)?f(e.path):"Untitled"),o=ko.observable().extend({normalizePaths:""});o(e.path);var r=ko.observableArray([]),s=ko.observableArray([]),l=ko.observableArray([]).extend({rateLimit:{timeout:100},callFunc:{func:function(){setTimeout(function(){var e=$("#cs-console > ul")[0];e&&(e.scrollTop=e.scrollHeight)},100)}}}),c=ko.observable(0),u=ko.observable(!1),h=e.source,d=ko.observable(e.expanded===!1?!1:!0),p=ko.observable(!1),g=ko.observable(e.readOnly||!1),m=ko.observable(!1),v=ko.observable(!1);t.getName=ko.computed(function(){return n()},this),t.getPath=ko.computed(function(){return o()},this),t.getScenes=ko.computed(function(){return r()},this),t.getIssues=ko.computed(function(){return s()},this),t.consoleOpen=ko.computed(function(){return u()},this),t.getLogs=ko.computed(function(){return l()},this),t.getUnreadLogCount=ko.computed(function(){return c()},this),t.issueCount=ko.computed(function(){return s().length},this),t.getSource=function(){return h},t.isExpanded=ko.computed(function(){return d()},this),t.isLocked=ko.computed(function(){return p()},this),t.isReadOnly=ko.computed(function(){return g()},this),t.beingEdited=ko.computed(function(){return m()},this),t.nameInvalid=ko.computed(function(){return v()},this),t.isDirty=ko.computed(function(){for(var e=0;e<r().length;e++){if(r()[e].isDirty())return!0;if(e===r().length-1)return!1}}),t.getWordCount=function(e){e=e||!1;for(var t=0,n=0;n<r().length;n++)t+=r()[n].getWordCount(e);return t},t.getCharCount=function(e){for(var t=0,n=0;n<r().length;n++)t+=r()[n].getCharCount(e);return t},t.logToConsole=function(e,t,n){("boolean"==typeof e||"number"==typeof e||"string"==typeof e)&&("string"!=typeof t&&(t=""),l().length>999&&l.shift(),n?"string"==typeof n.scene&&"number"==typeof n.line?l.push({value:e,type:t||"null",scene:n.scene||"",line:n.line||""}):(console.log(typeof n.scene,typeof n.line),l.push({value:"Error: attempt to log bad meta data logged to project console!",type:"error"})):l.push({value:e,type:t||"null"}),u()||"system"==t||c(c()<8?c()+1:"9+"))},t.toggleConsole=function(e){return u("boolean"==typeof e?e:!u()),u()&&c(0),u()},t.clearConsole=function(){l.removeAll()},t.dismissAllIssues=function(){for(var e=[],t=s(),n=0;n<t.length;n++)e.push(t[n]);for(var i=0;i<e.length;i++)e[i].dismiss();N("game")},t.setExpand=function(e){return"boolean"!=typeof e?void d(d()?!1:!0):void d(e)},t.nameInterface=ko.pureComputed({read:function(){return n()},write:function(e){b(e,!0,function(t,i){v(t?!1:!0),t?n(e):console.log(i)})},owner:this}),t.rename=function(e,t){if(!g()&&("keyup"!=t.type||13==t.keyCode||27==t.keyCode)){if("dblclick"!=t.type)return v()&&m()?void 0:(m(!1),void P());m(!0),setTimeout(function(){$(t.target).focus().select()},10)}},t.run=function(){function e(){p()||(p(!0),L(t,function(e,i){e?bootbox.alert("<h3>Compilation Error</h3>"+e.message):(cside.allScenes=i,de("Running",n(),{timeout:2e3}),se(t),A(cside.tabs()[0],"run_index.html?restart=true"),cside.tabPanel("open"),N("game")),setTimeout(function(){p(!1)},5e3)}))}t.isDirty()?bootbox.confirm("This project has unsaved changes, these will not appear in the test run, do you wish to continue?",function(t){t&&e()}):e()},t.openFolder=function(){x(o())},t.close=function(){k(t)},t.select=function(){for(var e=0;e<r().length;e++)if(r()[e].select())return!0;return!1},t.save=function(e){"function"!=typeof e&&(e=function(){});var t=!1,n=r().length;r().forEach(function(i){t||i.save(null,null,function(i){return i?(t=!0,e(i)):void(0==--n&&e(null))})})},t.addNewScene=function(e,n){g()||(n&&n.stopPropagation(),a(t))},t.addScene=function(e){(e.getProject()===t||e.getProject()===!1)&&r.push(e)},t.removeScene=function(e){-1!==r().lastIndexOf(e)&&(r.remove(e),r().length<1&&Z.remove(t))},t.closeScene=function(e){function n(){ee()==e&&(ee(null),ye.setValue("")),t.removeScene(e),P()}e.isDirty()?bootbox.confirm("This scene has unsaved changes, are you sure you wish to close it?",function(e){e&&n()}):n()},t.exportScenes=function(){he.selectFolder(function(e){e&&w(o(),e,function(t){if(t)return void de("Error",t.message,{type:"error"});var n=[{addClass:"btn btn-default",text:"Show Folder",onClick:function(t){x(e),t.close()}}],i=de("Game Exported Successfully","All scenes exported successfully from "+o(),{type:"success",buttons:n});i.setTimeout(1e4)})})},t.compile=function(){he.selectFolder(function(e){e&&D(t,e)})},t.test=function(e){T(t,e)},t.openAllScenes=function(){E(t)},t.reloadAllScenes=function(){for(var e=0;e<r().length;e++)r()[e].load()},t.logIssue=function(e,o){var r="number"==typeof e.lineNumber?e.lineNumber-1:null,a=new i({project:t,scene:o,desc:e.message,lineNum:r});s.push(a);var l=[{addClass:"btn btn-danger",text:"Show",onClick:function(e){e.close(),a.getLineNum()&&a.show(),te()==t?N("issues"):(t.select(),N("issues"))}}],c=de("New Issue","New issue with project "+n(),{type:"error",buttons:l});c.setTimeout(5e3)},t.removeIssue=function(e){s.remove(e)}}function n(e){function t(e){function t(t){t?console.log(t):(v(!1),E.markClean(),N.mtime?N.mtime=new Date:N.modifiedAt=new Date),k(!1),"function"==typeof e&&e(t)}var n=E.getValue();he.writeFile(o(),n,function(e){t(e)})}var i=this,o=ko.observable("").extend({normalizePaths:""});o(e.path);var r=ko.observable(h(o())),s=ko.observable(0),a=ko.observable(0),l=ko.observable(0),c=r().toUpperCase().match(ne),u=e.source||G,f=ko.observable(!1),d=ko.observable(!1),m=ko.observable(e.readOnly||!1),v=ko.observable(!1),w=ko.observable(!1),x=ko.observable(!1),k=ko.observable(!1),_=ko.observable(!1),T=ko.observable(""),E=CodeMirror.Doc(e.contents||"","choicescript"),A=E.getHistory(),N=e.stats||{mtime:new Date},L=ko.observable(e.color?e.color:c?"rgb(119, 151, 236)":"rgb(119, 119, 119)"),D=ko.observableArray([]),O=ko.observable(!1),M=ko.observable();i.isLocked=ko.computed(function(){return d()?!0:(curScene=cside.getSelectedScene())&&curScene.beingEdited()&&curScene!=i?!0:!1},this),i.getName=ko.computed(function(){return r()},this),i.getPath=ko.computed(function(){return o()},this),i.hasLoaded=ko.computed(function(){return f()},this),i.isSaving=ko.computed(function(){return k()},this),i.isDirty=ko.computed(function(){return v()},this),i.isReadOnly=ko.computed(function(){return m()},this),i.beingEdited=ko.computed(function(){return w()},this),i.isSelected=ko.computed(function(){return this===ee()},this),i.beingColoured=ko.computed(function(){return x()},this),i.getSource=function(){return u},i.getProject=function(){return p(g(o()))},i.getText=function(){return E.getValue()},i.getMarkColour=ko.computed(function(){return L()},this),i.getLineHandle=function(e){return E.getLineHandle(e)},i.getLineNumber=function(e){return E.getLineNumber(e)},i.nameInvalid=ko.computed(function(){return O()},this),i.getNameErrorMsg=ko.computed(function(){return M()},this),i.getIssues=ko.computed(function(){return D()},this),i.getContents=function(){return E.getValue()},i.getErrStateMsg=ko.computed(function(){return T()+" - click here to close"},this),i.getErrState=ko.computed(function(){return _()},this),i.getCharCountString=function(){return l()>0?l()+" ("+s()+")":s()},i.getCharCount=function(e){return e?l():s()},i.getWordCountString=function(){var e=ye.getOption("exclude_cmd_lines")?" [excl. cmds]":" [inc. cmds]";if(l()>0){var t=y(E.getSelection(),ye.getOption("exclude_cmd_lines"));return t+(" ("+a()+") "+e)}return a()+e},i.getWordCount=function(e){return y(E.getValue(),e)},i.getState=ko.computed(function(){return k()?"fa fa-spinner fa-spin":f()?_()?"fa fa-exclamation-triangle scene-unsaved":m()?"fa fa-lock":v()?"fa fa-save scene-unsaved":"fa fa-save scene-saved":"fa fa-ban"}),i.setText=function(e){m()||"string"==typeof e&&E.setValue(e)};var I=function(e){function t(t){k(!1),t?(bootbox.alert(t),console.log(t)):(N.mtime?N.mtime=new Date:N.modifiedAt=new Date,o(n),r(e),P())}if(!O()){k(!0);var n=i.getProject().getPath()+e+".txt";he.renameFile(o(),n,function(e){t(e)})}};i.nameInterface=ko.pureComputed({read:function(){return r()},write:function(e){b(e,!1,function(e,t){O(e?!1:!0),e||M(t)})},owner:this}),i.rename=function(e,t){if(!(_()||!f()||k()||m()||"keyup"==t.type&&13!=t.keyCode&&27!=t.keyCode))if("dblclick"!=t.type&&"click"!=t.type){if(O()&&w())return void $(t.target).fadeOut("fast").fadeIn("fast").focus();var n=t.target.value.trim();n!=r()&&C(n,i.getProject(),function(e){e?(de("Failed to Rename Scene","Scene '"+t.target.value.toLowerCase()+"' already exists in this Project",{type:"error"}),t.target.value=r()):I(n)}),w(!1)}else if(c){if(c)return void de("","Reserved scene cannot be renamed",{type:"error",layout:"bottomLeft"})}else{if(i.isLocked())return;w(!0),setTimeout(function(){$(t.target).focus().select()},10)}},i.recolour=function(e,t){if(("mouseleave"!==t.type||x())&&!i.isLocked()){if("string"==typeof e&&e!=L()){var n=new RegExp("("+ie().join("|").replace(/\(/g,"\\(").replace(/\)/g,"\\)")+")");if(!e.match(n))return void console.log("Scene Recolour Error: Invalid colour");L(e),P()}x(!x())}},i.focusLine=function(e,t){i!==ee()&&i.select(),t||(ye.clearGutter("arrow-gutter"),ye.setGutterMarker(e,"arrow-gutter",document.createTextNode("â†’"))),ye.scrollIntoView({line:e,ch:0},20)},i.addIssue=function(e){if(D.push(e),"number"==typeof e.getLineNum()){var t=E.getLineHandle(e.getLineNum());return t?(E.addLineClass(t,"background","CodeMirror-error-background"),CodeMirror.on(t,"delete",function(){D.remove(e)}),t):null}},i.removeIssue=function(e){"number"==typeof e.getLineNum()&&E.removeLineClass(e.getLineNum(),"background","CodeMirror-error-background"),D.remove(e)},i.load=function(e){function t(t,n){t?(_(!0),T(t.message),console.log(T()),e(t)):(_(!1),E.setValue(n),E.markClean(),E.clearHistory(),v(!1),P(),S(i)),f(!0),k(!1),"undefined"!=typeof e&&e(t,i)}k()||(f(!1),k(!0),"function"!=typeof e&&(e=function(e){e&&console.log(e.message)}),he.readFile(o(),function(e,n){e?t(e):he.stat(o(),function(e,i){e?t(e):(N=i,t(e,n))})}))},i.save=function(e,n,s){function a(e){var n=e.mtime||e.modifiedAt;n.getTime()>l.getTime()?bootbox.confirm("<h3>Warning</h3><p>'"+r()+".txt' of <b>"+i.getProject().getName()+"</b> has been modified by another program or process \r\n						since it was opened. Are you sure you wish to save it?",function(e){return e?void t(s):void k(!1)}):t(s)}if(n&&n.stopPropagation(),!v()&&f()||_()||k()||d()||m())return void("function"==typeof s&&s(null));k(!0);var l=N.mtime||N.modifiedAt;he.stat(o(),function(e,n){!e||404!=e.code&&"ENOENT"!=e.code?e?(console.log(e),k(!1),bootbox.alert("<h3>Warning</h3><p>Unable to save <b>"+r()+"</b> of <b>"+i.getProject().getName()+"</b>: "+e.message+".</p> \r\n						<p>Check your internet connection.</p>")):a(n):t(s)})},i.select=function(){if(ee()!==i){if(_()||!f()||k()||i.isLocked())return!1;return ye.clearGutter("arrow-gutter"),ee(i),ye.swapDoc(E),i.getProject().isExpanded()||i.getProject().setExpand(!0),ye.setOption("readOnly",m()),!0}},i.close=function(){i.getProject().closeScene(i)},i.copyTo=function(e){function t(t){if(t)bootbox.alert(t.message),console.log(t);else{var o=new n({path:i,source:u,contents:E.getValue()});e.addScene(o),o.load()}}if("object"==typeof e&&!_()&&f()&&!k()){if(e.isReadOnly())return void de("","Cannot Move Scene to Read-Only Project",{type:"error",closeWith:["click"]});var i=e.getPath()+r()+".txt";he.copyFile(o(),i,function(e){t(e)})}},i.moveTo=function(e){function t(t){t?(bootbox.alert(t.message),console.log(t)):(n.removeScene(i),o(s),e.addScene(i),P())}if("object"==typeof e&&!_()&&f()&&!k()&&!m()){if(c)return void de("","Cannot Move Reserved Scene",{type:"error",closeWith:["click"]});if(e.isReadOnly())return void de("","Cannot Move Scene to Read-Only Project",{type:"error",closeWith:["click"]});var n=i.getProject();if(e!==n){var s=e.getPath()+r()+".txt";he.renameFile(o(),s,function(e){t(e)})}}},i.del=function(){function e(){he.deleteFile(o(),function(e){e?bootbox.alert(e.message):i.close()})}if(!_()&&f()&&!k())return c?void de("","Cannot Delete Reserved Scene",{type:"error",closeWith:["click"]}):m()?void de("","Cannot Delete Read-Only Scene",{type:"error",closeWith:["click"]}):void bootbox.confirm("<h3>Confirm</h3><p>Are you sure you want to permanently delete '"+r()+".txt'?</p><p style='font-size:12px;'>"+o()+"<p>",function(t){t&&e()})},CodeMirror.on(E,"beforeChange",function(e,t){k()&&f()&&(t.cancel(),("undo"==t.origin||"redo"==t.origin)&&E.setHistory(A))}),CodeMirror.on(E,"change",function(e,t){k()||v(E.isClean()?!1:!0),A=E.getHistory(),ye.getOption("word_count")&&(s(s()-t.removed.join("\n").length+t.text.join("\n").length),a(y(E.getValue(),ye.getOption("exclude_cmd_lines"))))}),CodeMirror.on(E,"cursorActivity",function(){var e=E.getSelection();l(e.length)})}function i(e){var t=this,n=e.scene||null,i=e.project||null;if(null===i)return null;var o,r,s=e.desc||"No description available",a=null,l="number"==typeof e.lineNum&&e.lineNum>-1?e.lineNum:null,c=new Date;if(o=c.getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear(),r=c.getHours()+":"+c.getMinutes(),t.getScene=function(){return n},t.getDesc=function(){return s},t.getDate=function(){return o},t.getTime=function(){return r},t.getLineNum=function(){return a?a.lineNo():l},t.dismiss=function(){i.removeIssue(t),n&&n.removeIssue(t)},t.show=function(){n&&(n.select(),"number"==typeof t.getLineNum()&&n.focusLine(t.getLineNum(),!0))},n){var u=n.addIssue(t);u&&(a=u)}}function o(e){var t=this,n=ko.observable(e.value),i=e.id,o=e.name,r=0,s=e.type||"binary",a=e.cat||"app",l=ko.observable(e.desc||"");if("binary"===s)var c=[{desc:"on",value:!0},{desc:"off",value:!1}];else var c=e.options;t.getValue=ko.computed(function(){return n()},this),t.getId=function(){return i},t.getName=function(){return o},t.getType=function(){return s},t.getCat=function(){return a},t.getOptions=function(){return c},t.getDesc=ko.computed(function(){return l()},this),t.setDesc=function(e){l(e)},t.apply=e.apply,t.toggle=function(e){"binary"!=s?n(e.value):r+1==c.length?(r=0,n(c[r].value)):(r+=1,n(c[r].value)),t.apply(n()),oe.settings[a][i]=n(),O()},t.setValue=function(e){for(var t=0;t<c.length;t++)n(e)},t.extAPI={getName:t.getName,getType:t.getType,getDesc:t.getDesc,getValue:t.getValue,toggle:t.toggle,getOptions:t.getOptions}}function r(e,t){for(var n=t?e.length-1:e.length,i=0;n>i;i++)u(e[i],function(){});t&&u(e[n],function(e,t){e||t.select()})}function s(e,t){var i=new Image;i.onload=function(){var o=document.createElement("canvas"),r=d(t),s=(V+f(t).replace(r,"")).replace(/\s/g,"_").toLowerCase(),a=e.getPath()+s+".txt";return o.width=this.naturalWidth,o.height=this.naturalHeight,o.width<=0&&o.height<=0?void de("Image Import Failed",t,{type:"error"}):(o.getContext("2d").drawImage(i,0,0),void C(s,e,function(e){if(e)bootbox.prompt({title:"That Image Already Exists - Copy & Paste Code Below",value:"*gosub_scene "+s,callback:function(){}});else{var i=new n({path:a,source:G}),r=o.toDataURL();i.setText("*comment ENCODED IMAGE FILE - DO NOT EDIT\n*comment source: "+t+"\n*comment usage: *gosub_scene "+i.getName()+"\n*image "+r+"\n*return"),i.save(null,null,function(e){e?(bootbox.alert(e.message),console.log(e)):(de("Image Import Successful","",{type:"success"}),bootbox.prompt({title:"Copy & Paste Code Below",value:"*gosub_scene "+i.getName(),callback:function(){}}))})}}))},i.onabort=i.onerror=function(){de("Image Import Failed",t,{type:"error"})},i.src="file://"+t}function a(e,t){function i(t){C(t,e,function(o){if(o){var r=t.substring(t.lastIndexOf("_")+1,t.length);r=isNaN(r)?0:parseInt(r)+1,i("Untitled_"+r)}else{var s=e.getPath()+t+".txt",a=new n({path:s,source:G,readOnly:e.isReadOnly()});e.addScene(a),a.save(null,null,function(e){e?(bootbox.alert(e.message),console.log(e)):a.load(function(e,t){e||t.select()})})}})}if("object"==typeof e){var o=t||"Untitled";i(o)}}function l(e){return e instanceof t?void Z.unshift(e):void bootbox.alert("Error: Unable to add non-CSIDEProject.")}function c(e){function i(t){var n=X.path+(e+"/");he.makeDir(n,function(e){e&&"EEXIST"==e.code?(bootbox.alert("Error: That Project folder could not be created because it already exists."),t(!0)):e?(bootbox.alert("Error: Unable to create the project folder, check your permissions."),t(!0)):t(!1,n)})}i(function(i,o){if(!i){var r=new t({name:e,path:o,source:G});l(r);var s="*title "+e+"\n*author "+X.name+"\n*comment your code here\n*finish",a=[new n({path:o+"choicescript_stats.txt",contents:"",source:G}),new n({path:o+"startup.txt",contents:s,source:G})];a.forEach(function(e){e.save(null,null,function(t){return t?void bootbox.alert(t.message):(r.addScene(e),void e.load(function(e,t){e||t.select()}))})}),de("Project created",r.getPath(),{type:"success",layout:"bottomRight"})}})}function u(e,i){if("string"!=typeof e)throw new Error("Error: Bad sceneData or scenePath - cannot be resolved into scene.");var o=new n({path:e,source:G}),r=g(o.getPath()),s=v(r);if(s){if(m(o.getName(),s))return void o.select()}else s=new t({path:r,source:G}),l(s);s.addScene(o),o.load(i)}function h(e){var t=f(e);return t.substring(0,t.length-4)}function f(e){if(("/"==e.charAt(e.length-1)||"\\"==e.charAt(e.length-1))&&e.length>2&&(e=e.substring(0,e.length-1)),-1!=e.lastIndexOf("/"))var t="/";else var t="\\";return e.substring(e.lastIndexOf(t)+1,e.length)}function d(e){return e.substring(e.lastIndexOf("."),e.length)}function p(e){for(var t=0;t<Z().length;t++)if(Z()[t].getPath()===e)return Z()[t];return null}function g(e){return e.substring(0,e.lastIndexOf("/")+1)}function m(e,t){for(var n=t.getScenes(),i=0;i<n.length;i++){if(n[i].getName()===e)return n[i];if(i===n.length-1)return!1}}function v(e){for(var t=0;t<Z().length;t++){if(Z()[t].getPath()===e)return Z()[t];if(t===Z().length-1)return!1}}function b(e,t,n){var i,o=!1;!e||""===e||/^\s*$/.test(e)?i="Name required":!e.match(/^[\w-\s]+$/)&&t?i="Name contains invalid characters":e.match(/^[\w-]+$/)||t?e.toUpperCase().match(ne)?i="That name is reserved":o=!0:i="Name contains invalid characters",n(o,i)}function y(e,t){t=t||!1;var n=0;if(t){var i=e.replace(/\*.+$/gm,"");i.replace(/^\s+|\s+$/g,"").split(/\s+/).length,n=i.replace(/^\s+|\s+$/g,"").split(/\s+/).length}else n=e.replace(/^\s+|\s+$/g,"").split(/\s+/).length;return 1===n&&""===e&&(n=0),n}function w(e,t,n){he.readDir(e,function(i,o){if(i)return void n(i);o=o.filter(function(e){return".txt"===d(e)});for(var r=o.length,s=0;s<o.length;s++)he.copyFile(e+o[s],t+o[s],function(e){return e?void n(e):void(0===--r&&n(null))})})}function x(e){usingNode?gui.Shell.openItem(e):j.open(e)}function C(e,t,n){var i=t.getPath()+e+".txt";he.stat(i,function(e,t){n(e&&404==e.code?!1:"undefined"!==t.isRemoved&&1==t.isRemoved?!1:!0)})}function k(e){e.isDirty()?bootbox.confirm("This project has unsaved scenes, are you sure you wish to close it?",function(t){t&&(e===te()&&(ee(""),ye.setValue(""),z.tabs()[0].href("")),Z.remove(e),P())}):(e===te()&&(ee(""),ye.setValue(""),z.tabs()[0].href("")),Z.remove(e),P())}function S(e){for(var t=!1,n=!1,i=e.getText().split("\n"),o=0;o<i.length;o++)if(i[o].match(/^\t+/)?t=!0:i[o].match(/^\s+/)&&(n=!0),n&&t){bootbox.confirm("<h3>Warning</h3><p><b>"+e.getName()+".txt</b> of <b>"+e.getProject().getName()+"</b> uses both tabs and spaces for indentation. Would you like the IDE to automatically normalize all indents to your settings preference?</p>",function(t){t&&_(e)});break}}function _(e,t){var n=xe.asObject("editor").tabsize;t=t||xe.asObject("editor").tabtype;var i=e.getText().split("\n");if("spaces"==t)for(var o=0;o<i.length;o++){var r=i[o].match(/^\t+/);if(r){for(var s="",a=0;a<r[0].length*n;a++)s+=" ";i[o]=i[o].replace(/^\t+/,s)}}else{if("tabs"!=t)throw new Error("Scene Normalization: Bad indent unit: "+t);for(var o=0;o<i.length;o++){var r=i[o].match(/^\s+/);if(r){for(var s="",a=0;a<r[0].length/n;a++)s+="	";i[o]=i[o].replace(/^\s+/,s)}}}e.setText(i.join("\n"))}function T(e,t){if("random"!=t&&"quick"!=t)return void alert("Error: no such test as "+t+"test!");if("undefined"==typeof e||""===e)return void alert("Error: no project given to "+t+"test!");var n="lib/choicescript/"+t+"test.html";se(e),"web-dropbox"===G?(e.test_win=window.open(n,"Quicktest","toolbar=0,location=0,status=0,menubar=0,scrollbars,resizable,width=500,height=400"),e.test_win.addEventListener("beforeunload",function(){e.test_win=null}),setTimeout(function(){e.test_win.title=t.toUpperCase()+"TEST - "+e.getName()},200)):e.test_win?(e.test_win.close(),e.test_win=null,T(e,t)):nw.Window.open(n,{focus:!0,width:500,height:500,title:""},function(t){e.test_win=t,t.on("closed",function(){e.test_win.hide(),e.test_win.close(!0),e.test_win=null})})}function E(e){function t(e,t){e?console.log(e):r(t.filter(function(e){return".txt"===d(e)&&!e.match(V)},!1).map(function(e){return n+e}))}var n=e.getPath();he.readDir(n,function(e,n){t(e,n)})}function A(e,t){var n=t||e.href();e.href(""),e.href(n)}function N(e){$("#tabs").tabs("option","active",$("#"+e).index()-1)}function L(e,t,n){function i(){he.readDir(l,function(e,n){if(e)return r.close(),t(e);var n=n.filter(function(e){return".txt"===d(e)}),i=n.length;return n.forEach(function(e){he.readFile(l+e,function(n,l){return a?void 0:n?(a=!0,r.close(),404==n.code&&(n=new Error("File not found: "+e)),t(n)):(n=o(e,l))?(r.close(),t(n)):void(0==--i&&(r.close(),t(null,s)))})}),a?(r.close(),t(e)):void 0})}function o(e,t){var i=new Scene,o=h(e);try{i.loadLines(t)}catch(a){return r.close(),new Error(a.message+" - "+o+".txt")}if(n){for(var l=[],c=0;c<i.lines.length;c++){var u=/^\s*\*(\w+)(.*)/.exec(i.lines[c]);if(u&&_e[u[1]]){for(var f=1;i.getIndent(i.lines[c+f])>i.getIndent(i.lines[c]);)f++;l.push({targetLine:c,targetLength:f,change:_e[u[1]].transpile(i,u[2],c,f)})}}for(var d=0;d<l.length;d++)Array.prototype.splice.apply(i.lines,[l[d].targetLine,l[d].targetLength].concat(l[d].change))}return s[o]={},s[o].crc=i.temps.choice_crc,s[o].labels=i.labels,s[o].lines=i.lines,!1}var r=de("Compiling... ",e.getName(),{closeWith:!1,timeout:!1}),s={},a=!1,l=e.getPath();Se?i():$.getScript("lib/choicescript/web/scene.js").done(function(){Se=!0,i()}).fail(function(){"function"==typeof t&&t(new Error("<h3>Compilation Error</h3>Failed to load scene.js."))})}function D(e,t){L(e,function(n,i){he.readFile("compile_head.txt",function(n,o){he.readFile("compile_tail.txt",function(n,r){he.writeFile(t+e.getName()+".html",o+"<script>allScenes = "+JSON.stringify(i)+"</script>"+r,function(n){if(n)throw new Error("Export failed!");var i=[{addClass:"btn btn-default",text:"Show Folder",onClick:function(e){x(t),e.close()}}],o=de("Game Exported Successfully",e.getName(),{type:"success",buttons:i});o.setTimeout(1e4)})})})})}function O(){var e=JSON.stringify(oe,null,"	");localStorage.setItem("CSIDE_appConfig",e)}function P(){oe.openProjects=[];for(var e,t=0;t<Z().length;t++){e={path:Z()[t].getPath(),source:Z()[t].getSource(),name:Z()[t].getName(),expanded:Z()[t].isExpanded(),openScenes:[]};for(var n,i=0;i<Z()[t].getScenes().length;i++)n={path:Z()[t].getScenes()[i].getPath(),source:Z()[t].getScenes()[i].getSource(),color:Z()[t].getScenes()[i].getMarkColour()},e.openScenes.push(n);oe.openProjects.unshift(e)}O()}function M(e){var t=$(e).children();if(!(t.length<2)){for(var n=0;n<t.length;n++)ko.dataFor(t[n]).order=n;z.getProjects().sort(function(e,t){return e.order==t.order?0:e.order<t.order?-1:1}),P()}}function I(e){var t=$(e).children();if(!(t.length<2)){for(var n=0;n<t.length;n++)ko.dataFor(t[n]).order=n;ko.dataFor(t[0]).getProject().getScenes().sort(function(e,t){return e.order==t.order?0:e.order<t.order?-1:1}),P()}}function F(e){var t=e[1];$(t).parent().sortable({axis:"y",cancel:"input:not([readonly]), button",start:function(e,t){t.item.data("original_pos",t.item.index())},stop:function(e,t){t.item.index()!==t.item.data("original_pos")&&M(this,e,t)}}),$(t).find(".project").sortable({axis:"y",cancel:"input:not([readonly]), button",items:".scene",connectWith:"#main-project-wrap > .project-wrapper > .project",placeholder:"project-hover",containment:$("#main-project-wrap"),start:function(e,t){t.item.data("original_pos",t.item.index())},receive:function(e,t){function n(e){C(o.getName(),i,function(n){$(t.sender).sortable("cancel"),n?bootbox.alert("This project already has a scene by that name."):e()})}var i=ko.dataFor(this),o=ko.dataFor(t.item[0]);bootbox.dialog({message:"Would you like to <b>move</b> or <b>copy</b> this scene to this project?",title:"What would you like to do?",buttons:{copy:{label:"Copy",className:"btn-primary",callback:function(){n(function(){o.copyTo(i)})}},move:{label:"Move",callback:function(){n(function(){o.moveTo(i)})}},cancel:{label:"Cancel",callback:function(){$(t.sender).sortable("cancel")}}}})},stop:function(e,t){t.item.index()!==t.item.data("original_pos")&&I(this,e,t)}})}function j(){function e(e){var o=this;if(o.is_folder="folder"==e[".tag"],o.name=e.name,o.path=e.path,o.icon=e.icon?e.icon:e.isFolder?"fa fa-folder-o fa-lg":"fa fa-file-o fa-lg",o.selected=ko.observable(!1),o.index=e.listIndex,o.select=function(e,r,s,a){if(!a){var l=i.selection(),c=i.filesAndFolders();if(!n&&!t&&l.length>0){for(var u in l)c[l[u].index].selected(!1);i.selection([])}else if(t){l.sort(function(e,t){return e.index-t.index});var h=!1;if(i.selection()<1)for(var f=0;f<o.index;f++)c[f].select({},{},!0,!0);else{for(var f=0;f<o.index;f++)if(c[f].selected()){h=!0;break}if(h)for(var f=l[0].index;f<o.index;f++)c[f].selected()||c[f].select({},{},!0,!0);else for(var f=l[l.length-1].index;f>o.index;f--)c[f].selected()||c[f].select({},{},!0,!0)}}}o.selected(s?s:o.selected()?!1:!0),i.selection.push(o)},o.open=e.isFolder&&!i.selectingFolder?function(){i.redraw(o.path)}:function(){"function"==typeof i.callback?(i.selection=ko.observableArray([o]),i.executeTask()):i.close()},o.dateModified=e.modifiedAt||"",""!=o.dateModified){var r={};r.day=e.modifiedAt.getDate(),r.month=e.modifiedAt.getMonth(),r.year=e.modifiedAt.getFullYear(),r.hours=e.modifiedAt.getHours(),r.mins=e.modifiedAt.getMinutes(),r.mins.toString().length<2&&(r.mins="0"+r.mins.toString()),o.dateModified=" - last modified at "+r.day+"/"+r.month+"/"+r.year+" at "+r.hours+":"+r.mins}o.isFolder=function(){return o.is_folder}}var t=!1,n=!1;$(document).keydown(function(e){17==e.keyCode&&(e.preventDefault(),n=!0),16==e.keyCode&&(e.preventDefault(),t=!0)}),$(document).keyup(function(e){17==e.keyCode&&(e.preventDefault(),n=!1),16==e.keyCode&&(e.preventDefault(),t=!1)});var i=this,o=ko.observable(!1),r=ko.observable(!1),s=ko.observable(""),a=ko.observable("Open"),l=ko.observable("Open scenes"),c=ko.observable(""),u=ko.observable(!1);i.getButtonText=ko.computed(function(){return a()},this),i.getBrowserTitle=ko.computed(function(){return l()+": "+s()},this),i.isVisible=ko.computed(function(){return o()},this),i.isLoading=ko.computed(function(){return r()},this),i.getStateDesc=ko.computed(function(){return c()},this),i.hasErrored=ko.computed(function(){return u()},this),i.path=ko.computed(function(){return s()},this),i.selectingFolder=!1,i.filesAndFolders=ko.observableArray([]),i.selection=ko.observableArray([]),this.cancel=function(){"function"==typeof i.callback&&i.callback([]),i.close()},this.close=function(){var e=i.selection(),t=i.filesAndFolders();for(var n in e)t[e[n].index].selected(!1);i.selection([]),i.callback=null,i.selectingFolder=!1,o(!1)},this.open=function(e,t){"function"==typeof e&&(t=e,e=""),i.selectingFolder?(a("Select"),l("Select a Folder")):(a("Open"),l("Open scenes")),i.callback=t,e=e||s(),i.redraw(e),o(!0)},this.redraw=function(t){c("Connecting..."),r(!0),u(!1),s(t),i.filesAndFolders([]),i.selection([]);var n=0;he.readDir(t,function(t,o){if(t)u(!0),c("Failed to connect. Please check your internet connection.");else{if("/"!=s()&&""!=s()){var a=s().split("/");a.pop();var l=a.join("/");i.filesAndFolders.push(new e({name:"Up a level",path:l,isFolder:!0,icon:"fa fa-level-up fa-lg",listIndex:n})),n++}for(var h=0;h<o.length;h++)(o[h].isFolder||".txt"==d(o[h].path))&&(o[h].listIndex=n,(!i.selectingFolder||o[h].isFolder)&&(n++,i.filesAndFolders.push(new e(o[h]))))}r(!1)})},this.selectFolders=function(e){i.selectingFolder=!0,i.open("",e)},this.executeTask=function(){!i.selectingFolder&&1==i.selection().length&&i.selection()[0].isFolder()?i.selection()[0].open():(i.callback(i.selection()),i.close())}}function R(e,t){var n=this,i=e,o=t;n.getTitle=function(){return title},n.getOptions=ko.computed(function(){return o()},this),n.getTarget=function(){return i}}function H(e,t,n){var i=this,o=e,r=t,s=n;i.getLabel=function(){return o},i.getSubMenuOptions=function(){return s},i.doAction=r}function B(e){var t=this,n=ko.observable(e.title||""),i=ko.observable(!1);t.isActive=e.active||!0,t.getTarget=e.target,t.doAction=function(e){i(!1),e.doAction(t)},t.isExpanded=ko.computed(function(){return i()},this),t.toggle=function(e){i("boolean"==typeof e?e:i()?!1:!0)},t.getTitle=function(){return n()}(),t.getOptions=ko.computed(function(){return e.options()},this)}function W(){var e=this;e.isReady=function(){return!0};var t=ko.observable();e.getContextMenu=ko.computed(function(){return t()},this),$(function(){function e(e,t,n){var i=(require("nw.gui"),new nw.Menu),o=new nw.MenuItem({label:e||"Cut",click:function(){document.execCommand("cut")}}),r=new nw.MenuItem({label:t||"Copy",click:function(){document.execCommand("copy")}}),s=new nw.MenuItem({label:n||"Paste",click:function(){document.execCommand("paste")}}),a=new nw.MenuItem({label:n||"Indent",click:function(){ye.execCommand("indentMore")}}),l=new nw.MenuItem({label:n||"Dedent",click:function(){ye.execCommand("indentLess")}}),c=new nw.MenuItem({label:"Select all",click:function(){ye.execCommand("selectAll")}}),u=new nw.MenuItem({label:"Toggle block comment",click:function(){insertTextTags("*comment ","",!0)}}),h=new nw.MenuItem({label:"Insert double line break",click:function(){ye.replaceSelection("\n*line_break\n*line_break\n","end"),ye.focus()}});return i.append(o),i.append(r),i.append(s),i.append(a),i.append(l),i.append(c),i.append(h),i.append(u),i}usingNode&&($(".CodeMirror-scroll").on("contextmenu",function(e){e.preventDefault()}),$("body").on("contextmenu",".CodeMirror-code",function(t){var n=new e;t.preventDefault(),n.popup(t.originalEvent.x,t.originalEvent.y)}))}),$(function(){$("#sidebar").contextmenu({target:"#context-menu",scopes:".project-header",before:function(e,n){var i=ko.dataFor(n.parent().get(0));return t(new R(i,Q)),!0}}),$("#main-project-wrap").contextmenu({target:"#context-menu",scopes:".scene",before:function(e,n){var i=ko.dataFor(n.get(0));return i.getErrState()||!i.hasLoaded()||i.isSaving()||i.isLocked()?!1:(t(new R(i,Y)),!0)}}),$("#file-browser-ul").contextmenu({target:"#context-menu",scopes:".file",before:function(e,n){var i=ko.dataFor(n.get(0));return t(i.isFolder()?new R(i,Ee):new R(i,Te)),!0}}),$(".CodeMirror-code").contextmenu({target:"#context-menu",scopes:".cm-spell-error",before:function(e,n){function i(e,t){ye.replaceSelection(e),t&&ye.getDoc().undo(),ye.focus()}if(!ve.working){ve.working=!0;var o=this.getMenu()[0];t(new R(null,ko.observableArray([new H("Working...",function(){})])));var r=ye.coordsChar({left:e.originalEvent.x,top:e.originalEvent.y});ye.setCursor(r);var s=ye.findWordAt(r);ye.setSelection(s.anchor,s.head);var a=n.text(),l=ko.observableArray([]);return ve.suggest(a,5,function(e){e.length<1&&l.push(new H("No suggestions for "+a,function(){}));for(var n=0;n<e.length;n++)!function(t){var n=e[t];l.push(new H(n,function(){i(n,!1),ye.focus()}))}(n);l.push(new H("Ignore '"+a+"' this session",function(){ue.add(a,"session"),ye.focus()})),l.push(new H("Add '"+a+"' to user dictionary",function(){ue.add(a,"persistent"),ye.focus()})),ve.working=!1,t(new R(null,l));var r=window.innerHeight-o.offsetTop;r<25*l().length&&(o.style.top=o.style.top.slice(0,o.style.top.length-2)-18*l().length+"px")}),!0}}})})}ko.extenders.normalizePaths=function(t){return t.subscribe(function(n){t(e(n))}),t},ko.extenders.callFunc=function(e,t){return e.subscribe(function(){t.func()}),e};var z=this;if(usingNode){var q=gui.App.manifest.version,U=process.versions["node-webkit"],G=G="darwin"===process.platform?"mac_os":process.platform,K=("mac_os"===G?process.execPath.substring(0,process.execPath.lastIndexOf("/")+1):process.execPath.substring(0,process.execPath.lastIndexOf("\\")+1),
!1);z.isUpdating=function(){return K}}else var q="Dropbox",G="web-dropbox";var V="csideimg_",X={name:usingNode?require("username").sync():"Dropbox User",path:"/"};X.name=X.name.charAt(0).toUpperCase()+X.name.slice(1);var Q=ko.observableArray([new H("Add new scene",function(e){e.getTarget().addNewScene()}),new H("Open all scenes",function(e){e.getTarget().openAllScenes()}),new H("Reload all scenes",function(e){e.getTarget().reloadAllScenes()}),new H("Review",function(){},[new H("Word count",function(e){cside.showWordCount(e.getTarget())})]),new H("Import",function(){},[new H("Image (as scene)",function(e){e.getTarget().isReadOnly()||he.selectImage(function(t){t&&s(e.getTarget(),t)})})]),new H("Export",function(){},[new H("All scenes to folder",function(e){e.getTarget().exportScenes()}),new H("Compiled game",function(e){e.getTarget().compile()})]),new H("Test Project",function(){},[new H("Quicktest",function(e){e.getTarget().test("quick")}),new H("Randomtest",function(e){"web-dropbox"!=G?e.getTarget().test("random"):bootbox.alert("<h3>Apologies...</h3><p>But due to technical limitations randomtest can only be run in the Desktop version of the Choicescript IDE.</p></h3>")})]),new H("Open folder in "+("mac_os"===G?"Finder":"Explorer"),function(e){e.getTarget().openFolder()}),new H("Show/hide project",function(e){e.getTarget().setExpand()}),new H("Close project",function(e){e.getTarget().close()})]),Y=ko.observableArray([new H("Edit",function(){},[new H("Convert all spaces to tabs",function(e){_(e.getTarget(),"tabs")}),new H("Convert all tabs to spaces",function(e){_(e.getTarget(),"spaces")})]),new H("Review",function(){},[new H("Word count",function(e){cside.showWordCount(e.getTarget())})]),new H("Reload",function(e){e.getTarget().load(function(t,n){t||ee()!==e.getTarget()||n.select()})}),new H("Close",function(e){e.getTarget().close()}),new H("Delete file",function(e){e.getTarget().del()})]);if(usingNode&&Y.push(new H("Export",function(){},[new H("Copy file to folder",function(e){var t=e.getTarget();he.selectFolder(function(e){e&&he.copyFile(t.getPath(),e+t.getName()+".txt",function(n){if(n)de("Export Failed",n.message,{type:"error"});else{var i,o=[{addClass:"btn btn-default",text:"Show Folder",onClick:function(t){x(e),t.close()}}];i=de("Export Succesful","Copied "+t.getName()+" to "+e,{type:"success",buttons:o}),i.setTimeout(3e3)}})})}),new H("Print file",function(e){nw.Window.open("file://"+e.getTarget().getPath(),{focus:!0,width:800,height:600},function(e){e.window.print()})})])),"mac_os"===G){var J=new nw.Menu({type:"menubar"});"darwin"===process.platform&&J.createMacBuiltin("CSIDE"),win.menu=J,function(){var e=new nw.Menu;e.getTarget=te;for(var t,n=Q(),i=0;i<n.length;i++)if(n[i].getSubMenuOptions()){t=new nw.Menu;for(var o=0;o<n[i].getSubMenuOptions().length;o++)t.append(new nw.MenuItem({label:n[i].getSubMenuOptions()[o].getLabel(),click:n[i].getSubMenuOptions()[o].doAction.bind(null,e)}));e.append(new nw.MenuItem({label:n[i].getLabel(),click:n[i].doAction.bind(null,e),submenu:t}))}else e.append(new nw.MenuItem({label:n[i].getLabel(),click:n[i].doAction.bind(null,e)}));var r="mac_os"===G?3:1;win.menu.insert(new nw.MenuItem({label:"Project",submenu:e}),r)}(),function(){var e=new nw.Menu;e.getTarget=ee;for(var t,n=Y(),i=0;i<n.length;i++)if(n[i].getSubMenuOptions()){t=new nw.Menu;for(var o=0;o<n[i].getSubMenuOptions().length;o++)t.append(new nw.MenuItem({label:n[i].getSubMenuOptions()[o].getLabel(),click:n[i].getSubMenuOptions()[o].doAction.bind(null,e)}));e.append(new nw.MenuItem({label:n[i].getLabel(),click:n[i].doAction.bind(null,e),submenu:t}))}else e.append(new nw.MenuItem({label:n[i].getLabel(),click:n[i].doAction.bind(null,e)}));var r="mac_os"===G?4:2;win.menu.insert(new nw.MenuItem({label:"Scene",submenu:e}),r)}(),"mac_os"!=G&&(nw.Window.get().menu=win.menu)}ko.extenders.updateMenuBarStates=function(e){return e.subscribe(function(e){for(var t=e?!0:!1,n="mac_os"===G?3:1,i="mac_os"===G?4:2,o=n;i>=o;o++)for(var r=0;r<win.menu.items[o].submenu.items.length;r++)win.menu.items[o].submenu.items[r].enabled=t;nw.Window.get().menu=win.menu}),e};var Z=ko.observableArray([]);if("mac_os"===G){var ee=ko.observable(!1).extend({updateMenuBarStates:""});ee(null)}else var ee=ko.observable(null);var te=ko.computed(function(){return ee()?ee().getProject():null});z.getSelectedProject=ko.computed(function(){return te()},this);var ne="(STARTUP|CHOICESCRIPT_STATS)",ie=ko.observableArray(["rgb(125, 186, 125)","rgb(172, 209, 240)","rgb(228, 144, 150)","rgb(237, 216, 161)","rgb(161, 165, 237)","rgb(224, 161, 237)","rgb(163, 163, 163)","rgb(230, 230, 230)"]);ie=ko.observableArray(["rgb(114, 195, 116)","rgb(119, 151, 236)","rgb(217, 83, 79)","rgb(165, 147, 122)","rgb(255, 141, 43)","rgb(224, 121, 245)","rgb(0, 168, 195)","rgb(119, 119, 119)"]);var oe,re=ko.observable("90,90,90"),se=(ko.observable(!1),ko.observable("")),Z=ko.observableArray([]),ae=ko.observable(!0),le={settings:{editor:{tabtype:"spaces",smartindent:!0,tabsize:"4",linewrap:!0,fontsize:"12px",spell_dic:"en_US",theme:"cs-dark",spellcheck:!0,autosuggest:!1,"word-count":2,"visible-tabs":!1},app:{persist:!0,autosave:!0,cmdhelp:!1,"update-channel":"stable","ui-colour":"90,90,90","project-path":"default"}},openProjects:[],userDictionary:{}};try{oe=JSON.parse(localStorage.getItem("CSIDE_appConfig"))||le}catch(ce){bootbox.alert("Sorry, there was a problem parsing your configuration settings.<br> \r\n		They have been repaired and reset to the defaults.<br><br> \r\n		<b>Error:</b> "+ce.message),localStorage.setItem("CSIDE_appConfig",JSON.stringify(le)),oe=le}var ue={},he={writeFile:function(e,t,n){switch(G){case"web-dropbox":pe.filesUpload({path:e,contents:t,mode:{".tag":"overwrite"},autorename:!1}).then(function(){n(null)})["catch"](function(e){n(fe(e))});break;default:mkdirp(getDirName(e),function(i){i?n(fe(i)):fs.writeFile(e,t,{encoding:"utf8"},function(e){n(fe(e))})})}},readFile:function(e,t){switch(G){case"web-dropbox":pe.filesDownload({path:e}).then(function(e){var n=new FileReader;n.addEventListener("loadend",function(){n.result&&(console.log(n.result),t(null,new TextDecoder("utf-8").decode(n.result)))}),n.readAsArrayBuffer(e.fileBlob)})["catch"](function(e){t(fe(e))});break;default:fs.readFile(e,{encoding:"utf8"},function(e,n){t(fe(e),n)})}},copyFile:function(e,t,n){switch(G){case"web-dropbox":pe.filesCopy({from_path:e,to_path:t}).then(function(){n(null)})["catch"](function(e){n(fe(e))});break;default:fs.readFile(e,{encoding:"utf8"},function(e,i){e?n(fe(e)):fs.writeFile(t,i,function(e){n(fe(e))})})}},renameFile:function(e,t,n){switch(G){case"web-dropbox":pe.filesMove({from_path:oldPath,to_path:t}).then(function(){n(null)})["catch"](function(e){n(fe(e))});break;default:fs.rename(e,t,function(e){n(fe(e))})}},deleteFile:function(e,t){switch(G){case"web-dropbox":pe.filesDelete({path:e}).then(function(){t(null)})["catch"](function(e){t(fe(e))});break;default:trash([e],function(e){t(fe(e))})}},readDir:function(e,t){switch(G){case"web-dropbox":pe.filesListFolder({path:e}).then(function(e){t(null,e.entries.map(function(e){return e.path=e.path_lower,e.isFolder="folder"==e[".tag"],e}))})["catch"](function(e){t(fe(e))});break;default:fs.readdir(e,function(e,n){t(fe(e),n)})}},makeDir:function(e,t){switch(G){case"web-dropbox":"/"==e.slice(-1,e.length)&&(e=e.slice(0,-1)),pe.filesCreateFolder({path:e}).then(function(){t(null)})["catch"](function(){ce&&403==ce.status&&(delete ce.status,ce.code="EEXIST"),t(fe(ce))});break;default:mkdirp(e,function(e){t(fe(e))})}},stat:function(e,t){switch(G){case"web-dropbox":pe.filesGetMetadata({path:"/start_me_up.txt"}).then(function(e){console.log(e),t(null,{mtime:new Date(e.client_modified)})})["catch"](function(e){t(fe(e))});break;default:fs.stat(e,function(e,n){t(fe(e),n)})}},selectFolder:function(e){switch(G){case"web-dropbox":j.selectFolders(function(t){e(t.length>0?t[0].path+"/":null)});break;default:var t=$("#selectFolder");t.off().change(function(){e($(this).val()+"/"),$(this).val("")}),setTimeout(function(){t.trigger("click")},200)}},selectImage:function(e){switch(G){case"web-dropbox":bootbox.alert("TODO: Image scene import not yet implemented on the web-version.");break;default:var t=$("#getImagePaths");t.off().change(function(){e($(this).val()),$(this).val("")}),setTimeout(function(){t.trigger("click")},200)}}},fe=function(e){if(!e)return null;if("undefined"==typeof e.message)try{e.message=JSON.parse(e.responseText).error}catch(t){e.message="Unable to get an error description"}switch("undefined"==typeof e.code&&(e.code=e.status||"Unknown Error Code"),e.code){case"ENOENT":case 404:e.code=404;break;case"EEXIST":break;case 403:case"EACCES":}return e},de=function(e,t,n){function i(e,t){return"<h5>"+e+"</h5>\r\n					 <p>"+t+"</p>"}var n=n||{};n.theme="cside_noty",n.layout=n.layout||"bottomRight",n.type=n.type||"default",n.timeout=n.timeout===!1?!1:n.timeout||5e3,n.closeWith=n.closeWith===!1?!1:n.closeWith||["click"],n.buttons=n.buttons||null,n.animation={open:{opacity:"toggle"},close:{opacity:"toggle"},easing:"swing",speed:250},n.text=i(e,t),n.progress&&(n.text+="<progress value='0' max='100'></progress>");var o=noty(n);return n.progress&&(o.setProgress=function(e){o.$message.find(".noty_text").find("progress").val(e)}),o};if(z.notification=function(e,t,n){de(e,t,n)},"web-dropbox"==G)if(utils.parseQueryString(window.location.hash).access_token){var pe=new Dropbox({accessToken:utils.parseQueryString(window.location.hash).access_token});pe.setClientId("hnzfrguwoejpwbj")}else{var pe=new Dropbox({clientId:"hnzfrguwoejpwbj"}),ge=pe.getAuthenticationUrl(window.location);window.location=ge}window.db=pe;var me=ko.observable(!1),ve=new Typo("","","",{platform:"any"});if(z.dbAuth=ko.computed(function(){return me()},this),z.getProjects=ko.computed(function(){return Z()},this),z.getSelectedScene=ko.computed(function(){return ee()},this),z.getActiveProject=ko.computed(function(){return se()},this),z.getValidSceneColours=ko.computed(function(){return ie()},this),z.getPlatform=function(){return G},z.wordCountOn=ko.computed(function(){return ae()}),z.getUIColour=function(e){e=e||0;for(var t,n=re().split(","),i=0;i<n.length;i++)t=parseInt(n[i])+e,0>t?t=0:t>255&&(t=255),n[i]=t;var o=n.join(",");return"rgb("+o+")"},z.selectTab=function(e){for(var t=z.tabs(),n=0;n<t.length;n++)if(e===t[n].id){N(e);break}},z.readFile=function(e,t){he.readFile(e,t)},z.selectScene=function(e){e.select()},z.session={save:function(e){var t=!1,n=Z().length;return 1>n?void e(null):void Z().forEach(function(i){i.save(function(i){if(i){if(t)return;return t=!0,e(i)}0==--n&&e(null)})})},isDirty:ko.computed(function(){for(var e=0;e<Z().length;e++)if(Z()[e].isDirty())return!0;return!1})},z.session.win=function(){var e=ko.observable(!0);return{isFullscreen:ko.computed(function(){return e()},this),toggleMaximize:function(){e()?win.restore():"mac_os"===G?win.enterFullscreen():win.maximize(),e(!e())}}}(),"mac_os"==G||"web-dropbox"==G&&"MacIntel"==window.navigator.platform)var be={"Cmd-S":function(){ee().save()},"Cmd-W":function(){ee().close()},"Cmd-N":function(){te().addNewScene()},"Cmd-Q":function(){usingNode&&win.close()},"Shift-Cmd-S":function(){te().save()},"Shift-Cmd-W":function(){te().close()},"Shift-Cmd-N":function(){z.createProject()},"Shift-Cmd-,":function(){z.scenePanel()},"Shift-Cmd-.":function(){z.tabPanel()},"Shift-Cmd-O":function(){te().openAllScenes()},"Shift-Tab":function(e){e.indentSelection("subtract")},"Cmd-O":function(){z.openFileBrowser()},"Cmd-D":function(){insertTextTags("${","}")},"Cmd-B":function(){insertTextTags("[b]","[/b]")},"Cmd-I":function(){insertTextTags("[i]","[/i]")},"Cmd-T":function(){te().test("quick")},"Shift-Cmd-T":function(){te().test("random")},"Shift-Cmd-Enter":function(){te().run()},"Shift-Cmd-C":function(){var e=te().toggleConsole();e&&$("#cs-console > input").focus()},"Cmd-Alt-Down":function(){z.moveSelection("down")},"Cmd-Alt-Up":function(){z.moveSelection("up")},F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))}};else var be={"Ctrl-S":function(){ee().save()},"Ctrl-W":function(){ee().close()},"Ctrl-N":function(){te().addNewScene()},"Ctrl-O":function(){z.openFileBrowser()},"Shift-Ctrl-O":function(){te().openAllScenes()},"Shift-Ctrl-S":function(){te().save()},"Shift-Ctrl-W":function(){te().close()},"Shift-Ctrl-N":function(){z.createProject()},"Shift-Ctrl-,":function(){z.scenePanel()},"Shift-Ctrl-.":function(){z.tabPanel()},"Shift-Ctrl-Q":function(){usingNode&&win.close()},"Shift-Tab":function(e){e.indentSelection("subtract")},"Ctrl-D":function(){insertTextTags("${","}")},"Ctrl-B":function(){insertTextTags("[b]","[/b]")},"Ctrl-I":function(){insertTextTags("[i]","[/i]")},"Ctrl-T":function(){te().test("quick")},"Shift-Ctrl-T":function(){te().test("random")},"Shift-Ctrl-Enter":function(){te().run()},"Shift-Ctrl-C":function(){var e=te().toggleConsole();e&&$("#cs-console > input").focus()},"Shift-Ctrl-Down":function(){z.moveSelection("down")},"Shift-Ctrl-Up":function(){z.moveSelection("up")},F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))}};var ye=CodeMirror.fromTextArea(document.getElementById("code-textarea"),{mode:{name:"choicescript",version:2,singleLineStringErrors:!1},lineNumbers:!0,lineWrapping:!0,tabSize:4,indentUnit:4,indentWithTabs:!0,matchBrackets:!0,extraKeys:be,gutters:["arrow-gutter","CodeMirror-linenumbers"]});z.moveSelection=function(e){if("up"===e||"down"===e)for(var t=ye.listSelections(),n=0;n<t.length;n++){var i=t[n].from(),o=t[n].to(),r="down"===e?1:-1;if("undefined"==typeof ye.getLine(i.line+r)||"undefined"==typeof ye.getLine(o.line+r))return;0===o.ch&&(o.line--,o.ch=ye.getLine(o.line).length);var s=ye.getLine("down"===e?o.line+r:i.line+r),a=ye.getRange({line:i.line,ch:0},{line:o.line,ch:ye.getLine(o.line).length});ye.replaceRange(a,{line:i.line+r,ch:0},{line:o.line+r,ch:ye.getLine(o.line+r).length}),"down"===e?ye.replaceRange(s,{line:i.line,ch:0},{line:i.line,ch:ye.getLine(i.line).length}):ye.replaceRange(s,{line:o.line,ch:0},{line:o.line,ch:ye.getLine(o.line).length}),ye.setSelection({line:i.line+r,ch:0},{line:o.line+r,ch:ye.getLine(o.line+r).length})}};var we=function(){{var e=new RegExp(/\b([A-Za-z]+'[A-Za-z]+|[A-Za-z]{2,}|[AaI]'?)\b/g),t=new RegExp(/^\s*\*[A-Za-z_]+\b/);new RegExp(/\{.*\}/g)}return{token:function(n){if(0===n.pos){var i=t.exec(n.string);i&&(n.pos+=i[0].length||1)}e.lastIndex=n.pos;var o=e.exec(n.string);return o&&o.index==n.pos?(n.pos+=o[0].length||1,style=cside.spellCheck(o[0])?"null":"spell-error"):void(o?n.pos++:n.skipToEnd())}}};ye.addOverlay(we()),ye.on("dragover",function(e,t){$(".CodeMirror-cursors .CodeMirror-cursor").css("visibility","visible");var n={left:t.x,top:t.y},i=ye.coordsChar(n);ye.setCursor(i)}),ye.on("dragstart",function(e,t){t.dataTransfer.setData("Text",ye.getSelection())}),ye.on("renderLine",function(e,t,n){var i=ye.defaultCharWidth(),o=CodeMirror.countColumn(t.text,null,e.getOption("tabSize"))*i,r=8*ye.options.tabSize,s=o/r,a=r*s;n.style.paddingLeft=a+"px",n.style.textIndent="-"+a/(s+1)+"px"}),ye.refresh(),ye.forceSyntaxRedraw=function(){ye.setOption("mode","choicescript")},insertTextTags=function(e,t,n){var i=ye.getSelection(),o="around";if(i){var r,s;i=i.split("\n");for(var a=0;a<i.length;a++)r=i[a],""!==r&&(n||!r.match(/^\s*\*[A-Za-z_]+\b/)&&!r.match(/^\s*#/))&&((s=r.match(/^\s+/g))&&(r=r.replace(/^\s+/g,"")),r=r.substring(0,e.length)===e&&r.substring(r.length-t.length,r.length)===t?r.substring(e.length,r.length-t.length):e+r+t,s=s||"",i[a]=s+r);i=i.join("\n")}else i=e+t,o="start";ye.replaceSelection(i,o),"start"===o&&ye.setCursor(ye.getCursor().line,ye.getCursor().ch+e.length)},z.tabs=ko.observableArray([{id:"game",title:"Game",showTitle:!0,iconClass:"fa fa-cube",href:ko.observable(""),content:"",visible:ko.observable(!0),getHeaderTitle:ko.computed(function(){return se()?se().getName():"Run a Project"},this)},{id:"issues",title:"Issues",showTitle:!0,iconClass:"fa fa-exclamation-triangle",href:"",content:"",visible:ko.observable(!0),getHeaderTitle:ko.computed(function(){return te()?"Issues with "+te().getName():"Select a Project"},this)},{id:"settings",title:"Settings",showTitle:!1,iconClass:"fa fa-cog",href:"",content:"",visible:ko.observable(!0),getHeaderTitle:""},{id:"help",title:"Help & Information",showTitle:!0,iconClass:"fa fa-question-circle",href:"help/index.html",content:"",visible:ko.observable(!0),getHeaderTitle:"Help & Information"},{id:"dictionary",title:"User Dictionary",showTitle:!0,iconClass:"fa fa-book",href:"",content:"",visible:ko.observable(!0),getHeaderTitle:"User Dictionary"}]),usingNode&&(z.tabs.push({id:"examples",title:"Example Projects & Templates",showTitle:!0,iconClass:"fa fa-lightbulb-o",href:"",content:"",visible:ko.observable(!0),getHeaderTitle:"Example Projects & Templates"}),z.cs_examples=[{title:"Interactive CSIDE Tutorial",desc:"A great starting point tutorial - developed by Vendetta. Useful for those new to both Choicescript and the Choicescript IDE.",path:"cs_examples/CSIDE Tutorial/"},{title:"ChoiceScript Basics Tutorial",desc:"A simple tutorial template by FairyGodfeather. This example project is designed to get you started with handling name, gender and relationship stats in your ChoiceScript games. A great starting point for any new project!",path:"cs_examples/Basics Tutorial/"},{title:"Pronouns with Gender-Neutral Options Template",desc:'A template for including gender neutral pronouns in your game (they/them), created by Lynnea Glasser. This includes a variable system to make sure your verbs and pronouns will match ("They go on ahead"/"She goes on ahead").',path:"cs_examples/GNO Pronoun Template/"}],z.cloneExample=function(e){he.selectFolder(function(n){n&&w(e.path,n,function(i){if(i)return void de("Error",i.message,{type:"error"});var o;(o=v(n))?o.reloadAllScenes():(o=new t({name:e.title,path:n}),l(o),o.openAllScenes()),de("Import Successful",e.title+" imported to "+n,{type:"success"})})})});var xe={editor:ko.observableArray([new o({id:"smartindent",name:"Smart Indentation",value:!0,type:"binary",cat:"editor",desc:"Automatically indent (or dedent) the cursor after flow-control commands",apply:function(e){e?ye.setOption("smartIndent",!0):ye.setOption("smartIndent",!1)}}),new o({id:"linewrap",name:"Line Wrapping",value:!0,type:"binary",cat:"editor",desc:"Wrap lines that exceed the editor's width (no horizontal scrolling)",apply:function(e){e?(ye.setOption("lineWrapping",!0),ye.on("renderLine",function(e,t,n){var i=CodeMirror.countColumn(t.text,null,e.getOption("tabSize"))*ye.defaultCharWidth(),o=8*ye.options.tabSize,r=i/o,s=o*r;n.style.paddingLeft=s+"px",n.style.textIndent="-"+s/(r+1)+"px"}),ye.refresh()):(delete ye._handlers.renderLine,ye.setOption("lineWrapping",!1),ye.refresh())}}),new o({id:"autosuggest",name:"Auto Suggest",value:!0,type:"binary",cat:"editor",desc:"Prompt quick-complete word suggestions as you type",apply:function(e){if(e){var t=this;t.timeout,ye.on("inputRead",function(e,n){t.getValue()&&1==n.text.length&&n.text[0].match(/\w$/)&&(t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(function(){CodeMirror.showHint(e,null,{completeSingle:!1,extraKeys:{Enter:function(){return!1}}})},150))})}}}),new o({id:"spellcheck",name:"Spell Check",value:!0,type:"binary",cat:"editor",desc:"Spell checks words as you type - excluding those on command and option lines",apply:function(e){ye.setOption("spellcheck",e),ye.forceSyntaxRedraw()}}),new o({id:"visible-tabs",name:"Visible Tabs",value:!1,type:"binary",cat:"editor",desc:"Provides visible indentation levels when using Tabs as the indentation unit",apply:function(e){e?document.getElementById("editor-wrap").classList.add("visible-tabs"):document.getElementById("editor-wrap").classList.remove("visible-tabs")}}),new o({id:"word-count",name:"Word Count",value:2,type:"variable",cat:"editor",desc:"Display the current scene's word and character counts at the bottom of the editor window",options:[{desc:"Exclude cmd lines",value:2},{desc:"Include cmd lines",value:1},{desc:"Off",value:0}],apply:function(e){ae(e>0),ye.setOption("word_count",e>0),ye.setOption("exclude_cmd_lines",e>1)}}),new o({id:"tabtype",name:"Tab Type",value:"tabs",type:"variable",cat:"editor",desc:"",options:[{desc:"Tabs",value:"tabs"},{desc:"Spaces",value:"spaces"}],desc:"Sets the indentation unit (used by smart indent)",apply:function(e){"spaces"==e?(ye.setOption("indentWithTabs",!1),be.Tab=function(e){if(e.somethingSelected())e.indentSelection("add");else{var t=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t)}}):(ye.setOption("indentWithTabs",!0),be.Tab=function(){ye.execCommand("defaultTab")})}}),new o({id:"tabsize",name:"Tab/Indent Block Size",value:"4",type:"variable",cat:"editor",options:[{desc:"2",value:"2"},{desc:"4",value:"4"},{desc:"6",value:"6"},{desc:"8",value:"8"}],desc:"The number of spaces to indent by, or the visual size of tabs (used by smart indent)",apply:function(e){var t=parseInt(e,10);ye.setOption("indentUnit",t),ye.setOption("tabSize",t)}}),new o({id:"fontsize",name:"Font Size (px)",value:"12px",type:"variable",cat:"editor",options:[{desc:"10",value:"10px"},{desc:"12",value:"12px"},{desc:"14",value:"14px"},{desc:"16",value:"16px"}],desc:"The size of the font in the editor window",apply:function(e){$("#editor-wrap").css("font-size",e),ye.refresh()}}),new o({id:"spell_dic",name:"Spell Check Dictionary",value:"en_US",type:"variable",cat:"editor",options:[{desc:"US",value:"en_US"},{desc:"GB",value:"en_GB"}],desc:"The dictionary to spellcheck against",apply:function(e){ve=new Typo(e,ve._readFile("lib/typo/dictionaries/"+e+"/"+e+".aff"),ve._readFile("lib/typo/dictionaries/"+e+"/"+e+".dic"),{platform:"any"}),ye.forceSyntaxRedraw()}}),new o({id:"theme",name:"Editor Theme",value:"cs-light",type:"variable",cat:"editor",options:[{desc:"Dark",value:"cs-dark"},{desc:"Light",value:"cs-light"},{desc:"Dichromatic",value:"cs-dichromatic"}],desc:"Sets the colour and style of the editor window and its text",apply:function(e){("lesser-dark"==e||"choicescript"==e||"erlang-dark"==e)&&(e="cs-light"),ye.setOption("theme",e)}})]),app:ko.observableArray([new o({id:"version",name:"Version: "+q,value:"",type:"variable",options:[],desc:"",apply:function(){}}),new o({id:"autosave",name:"Autosave Scenes & Projects",value:!1,type:"binary",desc:"Save all unsaved changes automatically (every 5 minutes)",apply:function(e){e?autoSaveFn=setInterval(function(){z.session.save(function(e){e&&bootbox.alert("<h3>Save Error</h3>"+e.message)})},3e5):"undefined"!=typeof autoSaveFn&&autoSaveFn&&clearInterval(autoSaveFn)}}),new o({id:"persist",name:"Persistent Session",value:!1,type:"binary",desc:"Retain open scenes & project data between sessions",apply:function(e){}}),new o({id:"cmdhelp",name:"Command Help (prompts & links)",value:!1,type:"binary",desc:"Commands in the editor window will link to their appropriate choicescriptdev.wikia page when double-clicked",apply:function(e){e?$(".CodeMirror").off().on("mouseover",".cm-builtin, .cm-keyword",function(){$(this).css("cursor","pointer"),$(this).attr("title","Double-Click for help with this command")}).on("mouseout",".cm-builtin, .cm-keyword",function(){$(this).css("cursor",""),$(this).removeAttr("title")}).on("dblclick",".cm-builtin, .cm-keyword",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).parent().children(":first-child"),n=t.text().trim(),i=n.match(/^\*[\w_]+/);if(i){i=i[0].substring(1,n.length),N("help");var o="http://www.choicescriptdev.wikia.com/"+i;usingNode?gui.Shell.openExternal(o):window.open(o)}}):$(".CodeMirror").off()}}),new o({id:"project-path",name:"Project Folder",value:"default",type:"custom",options:[{desc:"Select",value:"select"},{desc:"Default",value:"default"}],desc:"",apply:function(t){var n=this;if("default"==t){if(usingNode)var i=process.env["win32"==process.platform?"USERPROFILE":"HOME"];var o=usingNode?i+"/Documents/Choicescript Projects/":"/Choicescript Projects/";n.setDesc(o),X.path=o}else"select"==t?(he.selectFolder(function(t){t&&(t=e(t),n.setValue(t),n.setDesc(t),X.path=t,oe.settings[n.getCat()][n.getId()]=t,O())}),n.setValue(X.path),oe.settings[n.getCat()][n.getId()]=X.path,O()):(n.setDesc(t),X.path=t)}}),new o({id:"update-channel",name:"Update Channel",value:"stable",type:"variable",options:[{desc:"Stable",value:"stable"},{desc:"Latest",value:"latest"},{desc:"None",value:"none"}],desc:"",apply:function(e){if("none"!=e&&usingNode){var t=de("","<i class='fa fa-refresh fa-spin'></i> Checking for updates...",{closeWith:!1,timeout:!1});updater.checkForUpdates({cside:q,nw:U},e,function(n,i){if(t.close(),n)de("Connection Error","Failed to obtain update data from server. "+n.message,{type:"error"});else if(i){var o=[{addClass:"btn btn-default",text:"Download",onClick:function(t){if(t.close(),!K){var n=de("Downloading Update","Do not close the program",{progress:!0,closeWith:!1,timeout:!1}),i={progress:function(e){isNaN(e)||n.setProgress(e)},error:function(e,t){de(e,t,{type:"error"})}};K=!0,updater.update(e,i,function(e){n.close(),K=!1,e?(de("Update Failed",e.message,{type:"error"}),updater.restore(function(e){e?de("Warning - Package Corruption",e.message,{type:"error"}):de("Rollback Succesful","The previous app package has been restored")})):de("Update Complete","Please restart the application.",{type:"success"})})}}},{addClass:"btn btn-default",text:"Cancel",onClick:function(e){e.close()}}];de("Update Available",i.desc,{closeWith:!1,timeout:!1,buttons:o})}})}}}),new o({id:"ui-colour",name:"Colour Scheme",value:"rgb(90, 90, 90)",type:"variable",desc:"",options:[{desc:"<div class='setting-colour-swatch' style='background-color: rgb(90, 90, 90)'></div>",value:"granite"},{desc:"<div class='setting-colour-swatch' style='background-color: rgb(175, 93, 111)'></div>",value:"garnet"},{desc:"<div class='setting-colour-swatch' style='background-color: rgb(147, 122, 175)'></div>",value:"amethyst"},{desc:"<div class='setting-colour-swatch' style='background-color: rgb(107, 166, 125)'></div>",value:"emerald"},{desc:"<div class='setting-colour-swatch' style='background-color: rgb(94,104,121)'></div>",value:"slate"},{desc:"<div class='setting-colour-swatch' style='background-color: rgb(129,127,122)'></div>",value:"sandstone"},{desc:"<div class='setting-colour-swatch' style='background-color: rgb(51, 164, 164)'></div>",value:"jade"},{desc:"<div class='setting-colour-swatch' style='background-color: rgb(76,91,152)'></div>",value:"sapphire"}],apply:function(e){var t;switch(e){case"granite":t="90,90,90";break;case"amethyst":t="147,122,175";break;case"garnet":t="175,93,111";break;case"emerald":t="60,100,80";break;case"slate":t="94,104,121";break;case"sandstone":t="129,127,122";break;case"jade":t="51,164,164";break;case"sapphire":t="76,91,152";break;default:t="90,90,90"}re(t)}})]),asObject:function(e){if("undefined"!=typeof xe[e]){for(var t=xe[e](),n={},i=0;i<t.length;i++)n[t[i].getId()]=t[i].getValue();return n}console.log("Invalid settings type passed to settings.asObject function.")}};z.getEditorSettings=ko.computed(function(){return xe.editor().map(function(e){return e.extAPI})}),z.getAppSettings=ko.computed(function(){return xe.app().map(function(e){return e.extAPI})}),z.scenePanel=function(){if(!$("#page-content-wrapper").is(":animated")&&!$("#sidebar").is(":animated")){var e=$("#sidebar").css("left");parseInt(e.slice(0,e.length-2))<0?($("#page-content-wrapper").animate({left:230},300,function(){}),$("#sidebar").animate({left:0},300,function(){})):($("#page-content-wrapper").animate({left:0},300,function(){}),$("#sidebar").animate({left:-230},300,function(){}))}};{var Ce=[],ke=0;ko.observable(0)}z.consoleInput=function(e,t){var n=/^\*(console_)?(clear|track|untrack|untrack_all|track_all|track_list|help)/,i=/^\*(?:set|temp|rand|print|achieve|restart|setref|goto|goto_scene)/;if(t){var o=t.originalEvent.target,r=o.value;if(38===t.keyCode){if(Ce.length<=0)return;--ke<0&&(ke=Ce.length-1),o.value=Ce[ke]}else if(40===t.keyCode){if(Ce.length<=0)return;++ke>Ce.length-1&&(ke=0),o.value=Ce[ke]}if(r&&13===t.keyCode){if(Ce.length>9&&Ce.shift(),Ce.push(r),ke=Ce.length,te().logToConsole("> "+r,"null"),"undefined"==typeof frames||"undefined"==typeof frames[0]||"undefined"==typeof frames[0].window.stats)return te().logToConsole("Error: no choicescript game running","error"),void(o.value="");try{var s;if(r.match(/^\*/))(s=r.match(i))||(s=r.match(n))?(s.length>1&&"console_"!==s[1]&&(r="*console_"+r.substring(1,r.length)),r.match(/^\*goto/)?r.match(/^\*goto\s+/)?(r=r.replace(/^\*goto\s+/,""),frames[0].window.stats.scene.CSIDEConsole_goto(r)):(r=r.replace(/^\*goto_scene\s+/,""),frames[0].window.stats.scene.CSIDEConsole_goto_scene(r)):frames[0].window.stats.scene.runCommand(r)||te().logToConsole("Error: an unknown error occured whilst attempting to execute that command","error")):te().logToConsole("Error: invalid console command","error");else{var a=frames[0].window.stats.scene.tokenizeExpr(r),l=frames[0].window.stats.scene.evaluateExpr(a);"string"==typeof l?l='"'+l+'"':l||(l="false"),te().logToConsole(l,"output")}}catch(c){c.message=c.message.replace(/line [0-9]+ of\s\w+: /,""),te().logToConsole("Error: "+c.message,"error")}o.value=""}}},z.tabPanel=function(e){function t(e){var t=e.width(),n=e.offsetParent().width(),i=100*t/n;return i}if(!$(".left-wrap").is(":animated")&&!$(".right-wrap").is(":animated")){var n=!0;if(t($(".left-wrap"))>60&&(n=!1),"close"==e&&n||!e&&n)$(".right-wrap").animate({right:"-50%"},500),$(".left-wrap").animate({width:"100%"},500,function(){ye.refresh()}),$("#expand-collapse-bar").addClass("collapsed");else{if(("open"!=e||n)&&(e||n))return n;$(".left-wrap").animate({width:"50%"},500),$(".right-wrap").animate({right:"0%"},500,function(){ye.refresh()}),$("#expand-collapse-bar").removeClass("collapsed")}}},z.openScene=function(e,t){u(e,t)},z.openFileBrowser=function(){if(usingNode){var e=$("#getFilePaths");e.off().change(function(){var e=$(this).val().split(";");(1!==e.length||""!==e[0])&&r(e,!0)}),e.trigger("click")}else j.open(function(e){e.length<1||(e=e.filter(function(e){return!e.isFolder()}).map(function(e){return e.path}),r(e,!0))})},z.spellCheck=function(e){return ye.options.spellcheck?ve.check(e)||ue.check(e.toLowerCase())||e.match(/^\d+$/):!0},ue={persistentList:{},persistentListArray:ko.observableArray([]),sessionList:{},add:function(e,t){ue[t+"List"][e.toLowerCase()]=!0,ue.update(t)},remove:function(e,t){ue[t+"List"]&&delete ue[t+"List"][e],ue.update(t)},check:function(e){var t=this.persistentList,n=this.sessionList;return n[e]||t[e]?!0:!1},load:function(){try{ue.persistentList=JSON.parse(localStorage.getItem("userDictionary"))||{};for(var e in ue.persistentList)ue.persistentList.hasOwnProperty(e)&&ue.persistentListArray.push(e)}catch(t){t?ue.update():bootbox.alert("Sorry, there was a problem loading or parsing your user dictionary data.<br>If you're seeing this message frequently please file a bug report.")}},update:function(e){if("undefined"==typeof e||"persistent"==e){var t=JSON.stringify(ue.persistentList,null,"	");localStorage.setItem("userDictionary",t),ue.persistentListArray.removeAll();for(var n in ue.persistentList)ue.persistentList.hasOwnProperty(n)&&ue.persistentListArray.push(n)}ye.forceSyntaxRedraw()}},z.dictWord=ko.observable(""),z.addToDictionary=function(e,t){if("click"==t.type||"keyup"==t.type&&13==t.keyCode){if(!z.dictWord().match(/^[\w\u00C0-\u017F\u0027]+$/))return void bootbox.alert("<h3>Error</h3>Unable to add to user dictionary: not a word!");ue.add(z.dictWord(),"persistent"),z.dictWord("")}},z.removeFromDictionary=function(e){ue.persistentList.hasOwnProperty(e)&&ue.remove(e,"persistent")},z.getDictionaryArray=ko.computed(function(){return ue.persistentListArray().sort()},this),z.init=function(){if(usingNode||(X.name="dropbox-user"),oe.settings.app.persist)for(var e=[],i=0;i<oe.openProjects.length;i++){e=oe.openProjects[i];

var o=new t(e);l(o);for(var r=0;r<e.openScenes.length;r++){var s=new n(e.openScenes[r]);o.addScene(s),s.load()}}for(var a=xe.editor(),i=0;i<a.length;i++){var c="undefined"!=typeof oe.settings.editor[a[i].getId()]?oe.settings.editor[a[i].getId()]:le.settings.editor[a[i].getId()];a[i].apply(c),a[i].setValue(c)}a=xe.app();for(var i=0;i<a.length;i++){var c="undefined"!=typeof oe.settings.app[a[i].getId()]?oe.settings.app[a[i].getId()]:le.settings.app[a[i].getId()];a[i].apply(c),a[i].setValue(c)}ue.load(),N("help")},z.slideUpAndOut=function(e){$(e).parent().find("ul").remove(),$(e).animate({minHeight:0,height:0,padding:0},400,function(){$(e).remove()})},z.slideDownAndIn=function(e){$(e).hide().slideDown(400)},z.fadeIn=function(e){$(e).hide().fadeIn("fast")},z.fadeOutAndUp=function(e){$(e).animate({opacity:0,height:0,padding:0},400,function(){$(e).remove()})},z.showWordCount=function(e){var t=e.getWordCount(),n=e.getWordCount(!0),i=e.getCharCount(),o="<h3>"+e.getName()+"</h3><br><h4>Word Count</h4> \r\n		    Including command lines: "+e.getWordCount()+"<br>Excluding command lines: "+e.getWordCount(!0);if(o+="<br><br><h4>Character count</h4>Character count: "+e.getCharCount(),"CSIDEScene"===e.constructor.name&&ee()===e){var r=ye.getSelection();r.length>0&&(t=y(r,!1),n=y(r,!0),i=e.getCharCount(!0),o+="<br><br><h4>Current Selection</h4> \r\n                    Words including command lines: "+t+"<br>Words excluding command lines: "+n+"<br>Characters: "+e.getCharCount(!0))}o+="<br><br>Please note that these figures are only approximations.<br>Project word counts only include those of open scenes.",bootbox.alert(o)},z.createProject=function(e){"string"==typeof e&&""!=e?c(e):bootbox.prompt({title:"Name of Project?",value:"",callback:function(e){e&&(e=e.trim(),b(e,!0,function(t){t?c(e):bootbox.alert("Invalid Name: Please use only letters, numbers, underscores and hypens")}))}})};var Se=!1,_e={getFreeLabelName:function(e,t){for(var n=0;t>n&&"undefined"!=typeof e.labels[t+("_"+n)];n++);return t+("_"+n)},"while":{transpile:function(e,t,n,i){var o=[],r=_e.getFreeLabelName(e,"while_loop");return o.push("*label "+r),o.push("*if"+t),o=o.concat(e.lines.slice(n+1,n+i)),o.push("	*goto "+r),o}}};if(z.makeSortable=function(e){F(e)},ko.bindingHandlers.bindIframe={init:function(e,t){function n(){try{var n=e.contentWindow.initChildFrame,i=e.contentDocument.body}catch(o){}n?n(ko,t()):i&&ko.applyBindings(t(),i)}n(),ko.utils.registerEventHandler(e,"load",n)}},ko.bindingHandlers.enableTextInput={init:function(e){$(e).prop("readOnly",!0)},update:function(e,t){$(e).prop("readOnly",!ko.utils.unwrapObservable(t()))}},ko.bindingHandlers.fadeVisible={init:function(e,t){var n=t();$(e).toggle(ko.utils.unwrapObservable(n))},update:function(e,t){var n=t();ko.utils.unwrapObservable(n)?$(e).show().animate({opacity:1},250):$(e).animate({opacity:0},250,function(){$(this).hide()})}},ko.bindingHandlers.fadeAndSlideVisible={init:function(e,t){var n=t();$(e).toggle(ko.unwrap(n))},update:function(e,t){var n=t();ko.unwrap(n)?$(e).slideDown(500).animate({opacity:1},{queue:!1,duration:350}):$(e).slideUp(500).animate({opacity:0},{queue:!1,duration:350})}},ko.bindingHandlers.initFiles={init:function(e){$(e).draggable({cursor:"move",cursorAt:{left:5,top:5},scroll:!0,start:function(e,t){t.helper.appendTo($("body"))},helper:function(){var e=$("<div></div>");return e.addClass("helper"),e.text($("folder.selected").length),$(e)}})},update:function(){}},ko.bindingHandlers.initFolders={init:function(e){$(e).droppable({accept:".file, .folder-ul",over:function(){$(this).css("background-color","#F7F7E1")},out:function(){$(this).css("background-color","")},drop:function(){$(this).delay(100).fadeOut().fadeIn("slow");var e=$(this);$(".folder-selected").each(function(){moveDropboxItem($(this),e)})}}).draggable({cursor:"move",cursorAt:{left:5,top:5},scroll:!0,start:function(e,t){t.helper.appendTo($("body"))},helper:function(){var e=$("<div></div>");return e.addClass("helper"),$(e)}})},update:function(){}},!usingNode,!usingNode){var j=new j;ko.applyBindings(j,$("#file-browser-canvas")[0])}var Te=ko.observableArray([new H("Open Scene",function(e){e.getTarget().open()})]),Ee=ko.observableArray([new H("Open Folder",function(e){e.getTarget().open()})]);if("mac_os"!==G){var Ae=ko.observableArray([new B({title:"<span title='Project' class='fa fa-folder-open-o '>",active:z.getSelectedProject,options:ko.computed(function(){return new R(te(),Q).getOptions()},this),target:ko.computed(function(){return te()},this)}),new B({title:"<span title='Scene' class='fa fa-file-text-o'>",active:z.getSelectedScene,options:ko.computed(function(){return new R(ee(),Y).getOptions()},this),target:ko.computed(function(){return ee()},this)})]);z.getToolbarMenus=ko.computed(function(){return Ae()},this)}var Ne=new W;ko.applyBindings(Ne,$("#context-menu")[0])}function SceneNavigator(e){this.setSceneList(e),this.startingStats={}}function callIos(e,t){_global.isIosApp&&(t=t?encodeURIComponent(t):"",setTimeout(function(){var n=document.createElement("IFRAME");n.setAttribute("src",e+"://"+t),n.setAttribute("style","display:none"),document.documentElement.appendChild(n),n.parentNode.removeChild(n),n=null},0))}function safeCall(e,t){if(t){var n="undefined"==typeof window,i=!1||!n&&window.debug;if(isIE||n)"undefined"!=typeof MSApp?MSApp.execUnsafeLocalFunction(e?function(){t.call(e)}:t):e?t.call(e):t.call();else try{e?t.call(e):t.call()}catch(o){if(o.message?window.onerror(o.message,o.fileName,o.lineNumber,o.stack):o.stack?window.onerror(o.stack,o.fileName,o.lineNumber,o.stack):window.onerror(toJson(o,"\n")),window.console&&(window.console.error(o),o.message&&window.console.error("Message: "+o.message),o.stack&&window.console.error("Stack: "+o.stack)),i)throw o}}}function safeCallback(e){return function(){safeCall(null,e)}}function safeTimeout(e,t){setTimeout(function(){safeCall(null,e)},t)}function isDefined(e){return"undefined"!=typeof e}function jsonStringifyAscii(e){var t=JSON.stringify(e,function(e,t){return"scene"==e?void 0:t}),n=t.replace(/(.)/g,function(e){var t=e.charCodeAt(0);if(t>127||32>t){var n=t.toString(16);switch(n.length){case 4:return"\\u"+n;case 3:return"\\u0"+n;case 2:return"\\u00"+n;case 1:return"\\u000"+n;default:return e}}return e});return n}function toJson(e,t){if("undefined"!=typeof JSON&&JSON.stringify)return jsonStringifyAscii(e);switch(typeof e){case"object":if(e){var n=[];if(e instanceof Array){for(var i=0;i<e.length;i++)n.push(toJson(e[i],t));return"["+n.join(",")+"]"}for(var o in e)"scene"!=o&&n.push(t||!/^[a-zA-Z][a-zA-Z_0-9]\w+$/.test(o)||/\b(abstract|boolean|break|byte|case|catch|char|class|comment|const|continue|debugger|default|delete|do|double|else|enum|export|extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|interface|label|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|this|throws|transient|true|try|typeof|var|void|volatile|while|with)\b/.test(o)?'"'+o+'":'+toJson(e[o],t):o+":"+toJson(e[o],t));return"{"+n.join(",")+"}"}return"null";case"string":var r=e.replace(/(.)/g,function(e){if("'"==e||'"'==e||"\\"==e)return"\\"+e;var t=e.charCodeAt(0);if(t>127||32>t){var n=t.toString(16);switch(n.length){case 4:return"\\u"+n;case 3:return"\\u0"+n;case 2:return"\\u00"+n;case 1:return"\\u000"+n;default:return e}}return e});return'"'+r+'"';case"number":case"boolean":return String(e);case"function":return"badfunction";case"undefined":return"undefined";default:throw new Error("invalid type: "+typeof e)}}function xhrAuthRequest(e,t,n){for(var i=new Array(3*arguments.length),o=3;o<arguments.length;o+=2)o>3&&i.push("&"),i.push(arguments[o]),i.push("="),i.push(arguments[o+1]);var r=i.join(""),s=findXhr();"POST"==e?(s.open(e,loginUrlBase+t+".php",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded")):s.open(e,loginUrlBase+t+".php?"+r,!0);var a=!1;s.onreadystatechange=function(){if(!a&&4==s.readyState){a=!0;var e=200==s.status,t={};try{s.responseText&&(t=JSON.parse(s.responseText))}catch(i){e=!1}e||t.error||(t.error="unknown error"),n&&safeCall(null,function(){n(e,t)})}},s.send(r)}function login(e,t,n,i,o){xhrAuthRequest("POST","login",o,"email",encodeURIComponent(e),"password",encodeURIComponent(t),"register",n,"subscribe",i)}function forgotPassword(e,t){xhrAuthRequest("POST","forgot",t,"email",encodeURIComponent(e))}function logout(e){document.cookie="login=0;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",xhrAuthRequest("GET","logout",e),recordLogin(!1),window.knownPurchases=null,"undefined"!=typeof FB&&FB.logout&&FB.logout(),"undefined"!=typeof gapi&&gapi.auth&&gapi.auth.signOut&&gapi.auth.signOut()}function recordLogin(e,t,n){initStore()?(e&&recordEmail(t),window.store.set("login",e,function(){safeCall(null,n)}),window.registered=e):safeTimeout(n,0)}function getRemoteEmail(e){xhrAuthRequest("GET","getuser",e)}function saveCookie(e,t,n,i,o,r){var s=computeCookie(n,i,o,r);return writeCookie(s,t,e)}function computeCookie(e,t,n,i){var o=e.scene;delete e.scene,o&&(e.sceneName=o.name);var r="UNKNOWN";"undefined"!=typeof window&&window&&window.version&&(r=window.version);var s=toJson({version:r,stats:e,temps:t,lineNum:n,indent:i});return e.scene=o,s}function writeCookie(e,t,n){return window.pseudoSave||(window.pseudoSave={}),t||(t=""),window.pseudoSave[t]=e,initStore()?void window.store.set("state"+t,e,safeCallback(n)):void(n&&safeTimeout(n,0))}function clearCookie(e,t){writeCookie("",t,safeCallback(e))}function areSaveSlotsSupported(){return!(!initStore()||"cookie"==window.Persist.type)}function recordSave(e,t){return areSaveSlotsSupported()?void restoreObject(initStore(),"save_list",[],function(n){n.push(e),window.store.set("save_list",toJson(n),safeCallback(t))}):void safeTimeout(t,0)}function recordDirtySlots(e,t){return areSaveSlotsSupported()?void restoreObject(initStore(),"dirty_save_list",[],function(n){saveSet={};for(var i=0;i<n.length;i++)saveSet[n[i]]=1;for(i=0;i<e.length;i++)saveSet[e[i]]||n.push(e[i]);window.store.set("dirty_save_list",toJson(n),safeCallback(t))}):void safeTimeout(t,0)}function recordEmail(e,t){initStore()?window.store.set("email",e,safeCallback(t)):safeTimeout(t,0)}function fetchEmail(e){return initStore()?(window.store.get("email",function(t,n){safeCall(null,function(){if(e){var i=e;e=null,i(t&&n?n:"")}})}),void safeTimeout(function(){if(e){var t=e;e=null,t("")}},1e3)):void safeTimeout(function(){e("")},0)}function restoreObject(e,t,n,i){return e?void e.get(t,function(e,t){var o=n;if(e&&t)try{o=jsonParse(t)}catch(r){}safeCall(null,function(){i(o)})}):void safeTimeout(function(){i(n)},0)}function getDirtySaveList(e){restoreObject(initStore(),"dirty_save_list",[],function(t){e(t)})}function remoteSaveMerger(e,t){var n=new Persist.Store(window.remoteStoreNames[e]);restoreObject(n,"save_list",[],function(i){fetchSavesFromSlotList(n,i,0,[],function(n){mergeRemoteSaves(n,0,function(){e++,e<window.remoteStoreNames.length?remoteSaveMerger(e,t):t.apply(null,arguments)})})})}function getSaves(e){if(window.remoteStoreNames&&window.remoteStoreNames.length)remoteSaveMerger(0,e);else if(window.remoteStoreName&&window.storeName!=window.remoteStoreName){var t=new Persist.Store(window.remoteStoreName);restoreObject(t,"save_list",[],function(n){fetchSavesFromSlotList(t,n,0,[],function(t){mergeRemoteSaves(t,0,e)})})}else restoreObject(initStore(),"save_list",[],function(t){fetchSavesFromSlotList(initStore(),t,0,[],e)})}function fetchSavesFromSlotList(e,t,n,i,o){return n>=t.length?safeCall(null,function(){o(i)}):void restoreObject(e,"state"+t[n],null,function(r){r&&(r.timestamp=t[n].substring(4),i.push(r)),fetchSavesFromSlotList(e,t,n+1,i,o)})}function isWebSavePossible(){return initStore()?/^http/.test(window.location.protocol)?document.domain==window.webSaveDomain||"localhost"==document.domain:!0:!1}function submitRemoteSave(e,t,n,i){return isWebSavePossible()?void window.store.get("state"+e,function(o,r){if(o){var s=e.substring(4),a=findXhr(),l=window.remoteStoreName||window.storeName,c="email="+t+"&game="+l+"&realGame="+window.storeName+"&json="+encodeURIComponent(r)+"&timestamp="+s+"&subscribe="+n;a.open("POST",webSaveUrl,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded");var u=!1;a.onreadystatechange=function(){if(!u&&4==a.readyState){u=!0;var t=200==a.status;t?safeCall(null,function(){i(!0)}):recordDirtySlots([e],function(){safeCall(null,function(){i(!1)})})}},a.send(c)}else recordDirtySlots([e],function(){asyncAlert("There was a problem uploading the saved game. This is probably a bug; please contact support@choiceofgames.com with code 17891.",function(){safeCall(null,function(){i(!1)})})})}):safeTimeout(function(){i(!1)})}function submitDirtySaves(e,t,n){function i(o){e[o]?submitRemoteSave(e[o],t,!1,function(e){e?i(o+1):safeCall(null,function(){n(!1)})}):window.store.remove("dirty_save_list",function(){safeCall(null,function(){n(!0)})})}i(0)}function submitAnyDirtySaves(e){e||(e=function(){});try{getDirtySaveList(function(t){if(t&&t.length)try{fetchEmail(function(n){n?submitDirtySaves(t,n,e):e(!1)})}catch(n){e(!1)}})}catch(t){e(!1)}}function getRemoteSaves(e,t){if(!isWebSavePossible())return void safeTimeout(function(){t([])},0);var n=findXhr(),i=window.remoteStoreName||window.storeName;n.open("GET",webSaveUrl+"?email="+e+"&game="+i,!0);var o=!1;n.onreadystatechange=function(){if(!o&&4==n.readyState)if(o=!0,200!=n.status)window.console&&console.log("Couldn't load remote saves. "+n.status+": "+n.responseText),safeCall(null,function(){t(null)});else{var e=n.responseText;e=jsonParse(e);for(var i=[],r=0;r<e.length;r++){var s=e[r].json;s.timestamp=e[r].timestamp,i.push(s)}safeCall(null,function(){t(i)})}},n.send()}function mergeRemoteSaves(e,t,n){return isWebSavePossible()?void restoreObject(initStore(),"save_list",[],function(i){fetchSavesFromSlotList(initStore(),i,0,[],function(o){function r(){c?window.store.set("save_list",toJson(i),function(){safeCall(null,function(){n(o,c,f)})}):safeCall(null,function(){n(o,c,f)})}for(var s={},a=0;a<i.length;a++)s[i[a]]=1;var l={};for(a=0;a<e.length;a++)l["save"+e[a].timestamp]=1;var c=0;for(a=0;a<e.length;a++){var u=e[a],h="save"+u.timestamp;s[h]||(saveCookie(null,h,u.stats,u.temps,u.lineNum,u.indent),i.push(h),o.push(u),c++)}var f=[];for(a=0;a<i.length;a++)l[i[a]]||f.push(i[a]);t?window.store.set("dirty_save_list",toJson(f),r):r()})}):void safeTimeout(function(){n([],0,[])},0)}function delayBreakStart(e){var t=Math.floor((new Date).getTime()/1e3);return initStore()?void window.store.get("delayBreakStart",function(n,i){var o=1*i;safeCall(null,function(){n&&i&&!isNaN(o)?e(o):(window.store.set("delayBreakStart",t),e(t))})}):void safeTimeout(function(){e(t)},0)}function delayBreakEnd(){initStore()&&window.store.remove("delayBreakStart")}function initStore(){if(!window.storeName)return!1;if(window.store)return window.store;try{window.store=new Persist.Store(window.storeName)}catch(e){}return window.store}function loadAndRestoreGame(e,t){function n(n,i){safeCall(null,function(){var o=null;if(n&&i&&""+i)o=jsonParse(i);else if("androidStorage"==window.Persist.type&&document.cookie)return upgradeAndroidCookies(e,t);restoreGame(o,t)})}return e||(e=""),window.pseudoSave&&pseudoSave[""]?n(!0,pseudoSave[""]):initStore()?void window.store.get("state"+e,n):restoreGame(null,t)}function upgradeAndroidCookies(e,t){function n(i){if(!o[i])return void loadAndRestoreGame(e,t);var r=o[i].split("="),s=r[0],a=s+"=x; path=/; domain=localhost; expires=Thu, 01-Jan-1970 00:00:01 GMT";document.cookie=a,s=unescape(s).substring(window.storeName.length+1);var l=unescape(r[1]);window.store.set(s,l,function(){n(i+1)})}var i=document.cookie,o=i.split("; ");safeCall(this,function(){n(0)})}function isStateValid(e){return e&&e.stats&&e.stats.sceneName?!0:!1}function restartGame(e){function t(e){e&&(submitAnyDirtySaves(),clearCookie(function(){},"temp"),clearCookie(function(){window.nav.resetStats(window.stats),clearScreen(restoreGame)},""))}return window.tickerRunning?void asyncAlert("Please wait until the timer has run out."):void(e?asyncConfirm("Start over from the beginning?",t):t(!0))}function restoreGame(e,t,n){var i,o=null,r="",s=null;if(/\|/.test(t)){var a=t.split("|");t=a[0],s=a[1]}if("choicescript_stats"==t?(o="stats",r="temp"):"choicescript_upgrade"==t&&(o="upgrade",r="temp"),isStateValid(e))t&&(e.stats.sceneName=t),window.stats=e.stats,i=new Scene(e.stats.sceneName,e.stats,window.nav,{debugMode:e.debug||window.debug,secondaryMode:o,saveSlot:r}),t||(i.temps=e.temps,i.lineNum=e.lineNum,i.indent=e.indent),n&&(i.temps.choice_user_restored=!0);else{var l=t?t:window.nav.getStartupScene();i=new Scene(l,window.stats,window.nav,{debugMode:window.debug,secondaryMode:o,saveSlot:r})}null!==s&&(i.targetLabel={label:s,origin:"url",originLine:0}),safeCall(i,i.execute)}function redirectScene(e,t,n){var i=new Scene(e,window.stats,window.nav,{debugMode:window.debug});t&&(i.targetLabel={label:t,origin:"choicescript_stats",originLine:n}),clearScreen(function(){i.execute()})}function transferTempStatWrites(){_global.isIosApp&&callIos("transferwrites",JSON.stringify(tempStatWrites))}function getCookieByName(e,t){if(t||(t=window.document.cookie),!t)return null;for(var n=t.split(/;/),i=0;i<n.length;i++){var o=trim(n[i]),r=o.split(/=/),s=decodeURIComponent(r[0]);if(s===e)return decodeURIComponent(r[1])}return null}function parseQueryString(e){if(!e)return null;for(var t={},n=String(e).substring(1).split("&"),i=n.length;i--;){var o=n[i],r=o.split("=");t[r[0]]=r[1]}return t}function trim(e){if(null===e||void 0===e)return null;var t=e.replace(/^\s+/g,"");return t.replace(/\s+$/g,"")}function findOptimalDomain(e){if(e||(e=document.domain),"localhost"==e||"127.0.0.1"==e)return null;if(/^\d+\.\d+\.\d+\.\d+$/.test(e))return null;var t=e.match(/(\w+\.\w{3}$)/);return t?t[1]:null}function num(e,t){t||(t="UNKNOWN");var n=1*e;if(isNaN(n))throw new Error("line "+t+": Not a number: "+e);return n}function bool(e,t){if(t||(t="UNKNOWN"),"boolean"==typeof e)return e;if("true"===e)return!0;if("false"===e)return!1;throw new Error("line "+t+": Neither true nor false: "+e)}function findXhr(){var e=isIE&&isFile;if(window.XMLHttpRequest&&!e)return new window.XMLHttpRequest;for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;3>n;n++)try{return new ActiveXObject(t[n])}catch(i){}throw new Error("Couldn't create XHR object")}function crc32(e,t){t||(t=0);var n=0,i=0;t=-1^t;for(var o=0,r=e.length;r>o;o++)n=255&(t^e.charCodeAt(o)),i="0x"+crcTable.substr(9*n,8),t=t>>>8^i;return-1^t}function simpleDateTimeFormat(e){var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],i=e.getMinutes();return 10>i&&(i="0"+i),t+" "+n+" "+e.getDate()+" "+e.getHours()+":"+i}function jsonParse(str){if("undefined"==typeof JSON)return eval("("+str+")");try{return JSON.parse(str)}catch(e){try{return eval("("+str+")")}catch(e2){try{eval("1")}catch(e3){var str2=(str+"").replace(/([,\{])\s*(\w+)\s*\:/g,'$1"$2":');try{return JSON.parse(str2)}catch(e4){}}return JSON.parse(str)}}}function cefQuerySimple(e){cefQuery({request:e,onSuccess:function(){console.log(e+" success")},onFailure:function(t,n){console.error(e+" error: "+n)}})}function parseDateStringInCurrentTimezone(e,t){var n=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!n)throw new Error("line "+t+": invalid date string "+e);var i=n[1],o=parseInt(n[2],10),r=parseInt(n[3],10),s=shortMonthStrings[o];return new Date(s+" "+r+", "+i)}function autotester(e,t,n,i){function o(e){"undefined"!=typeof console&&console.log(e)}function r(e){if(!e)return e;if(e instanceof Array||"array"==typeof e){for(var t=[],n=0;n<e.length;++n)t.push(r(e[n]));return t}if("object"!=typeof e&&"function"!=typeof e)return e;if(e.nodeType&&e.cloneNode)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());t=new e.constructor;for(n in e)n in t&&t[n]==e[n]||(t[n]=r(e[n]));return t}var s=[];printx=function(){};var a=[];Scene.prototype.oldSceneList||(Scene.prototype.oldSceneList=Scene.prototype.scene_list),Scene.prototype.scene_list=function(){if("startup"!=this.name||!this.screenEmpty||!this.initialCommands)throw new Error(this.lineMsg()+"Invalid scene_list instruction, only allowed at the top of startup.txt");for(var e=this.parseSceneList(),t=0;t<e.length;t++)this.verifySceneFile(e[t])},Scene.prototype.finish=function(e){this.paragraph(),this.finished=!0,e||(e="Next Chapter"),e=this.replaceVariables(e)},Scene.prototype.bug=Scene.prototype.finish,Scene.prototype.page_break=function(e){this.replaceVariables(e),this.resetCheckedPurchases()},Scene.prototype.subscribe=function(){},Scene.prototype.save=function(){},Scene.prototype.restore_purchases=function(){},Scene.prototype.purchase=function(e){var t=/^(\w+)\s+(\S+)\s+(.*)/.exec(e);if(!t)throw new Error(this.lineMsg()+"invalid line; can't parse purchaseable product: "+e);var n=t[1],i=(trim(t[2]),trim(t[3]));if("undefined"==typeof this.temps["choice_purchased_"+n])throw new Error(this.lineMsg()+"Didn't check_purchases on this page");if(!u[i]){var o=this.clone();o.testPath.push(","),o.testPath.push(this.lineNum+1),o.testPath.push("$"),o.lineNum=this.lineNum,o.rollbackLineCoverage(),o.indent=this.indent,o["goto"](i),o.rollbackLineCoverage(),o.resume=function(){this.lineNum=this.lineNum,o.printLoop()},a.push(o)}},Scene.prototype.delay_break=function(){},Scene.prototype.delay_ending=function(e){var t=e.split(/ /),n=t[0],i=t[1];if(isNaN(1*n))throw new Error(this.lineMsg()+"invalid duration");if(!/^\$/.test(i))throw new Error(this.lineMsg()+"invalid price");this.paragraph(),this.finished=!0},Scene.prototype.check_purchase=function(e){for(var t=e.split(/ /),n=0;n<t.length;n++)this.temps["choice_purchased_"+t[n]]=!0;this.temps.choice_purchase_supported=!1,this.temps.choice_purchased_everything=!0};var l;printInput=function(e,t,n,i){l=function(){n("text"==t?"blah blah":i)}},Scene.prototype.oldInputText||(Scene.prototype.oldInputText=Scene.prototype.input_text),Scene.prototype.oldInputNumber||(Scene.prototype.oldInputNumber=Scene.prototype.input_number),Scene.prototype.input_text=function(e){this.oldInputText(e),this.lineNum++,l()},Scene.prototype.input_number=function(e){this.oldInputNumber(e),this.lineNum++,l()},Scene.prototype.goto_random_scene=function(e){for(var t=this.parseGotoRandomScene(e),n=0;n<t.length;n++){var i=t[n].name;this.verifySceneFile(i)}/\ballow_no_selection\b/.test(e)||this.finish()},Scene.prototype.save_game=function(e){if(!e)throw new Error(this.lineMsg()+"*save_game requires a destination file name, e.g. *save_game Episode2");this.verifySceneFile(e)},Scene.prototype.restore_game=function(e){if(this.parseRestoreGame(!1),e){var t=/^cancel=(\S+)$/.exec(e);if(!t)throw new Error(this.lineMsg()+"invalid restore_game line: "+e);cancel=t[1],this["goto"](cancel)}},Scene.prototype.rollbackLineCoverage=function(e){e||(e=this.lineNum),s[e]--};try{Scene.prototype.__defineGetter__("lineNum",function(){return this._lineNum}),Scene.prototype.__defineSetter__("lineNum",function(e){s[e]?s[e]++:s[e]=1,this._lineNum=e})}catch(c){}Scene.prototype.choice=function(e){function t(e,n,i){i||(i={});for(var o=0;o<n.length;o++){var s=n[o];i[s.group]=o,s.suboptions?t(e,s.suboptions,i):(i.ultimateOption=s,e.push(r(i)))}}var n=["choice"];if(e){n=e.split(/ /);for(var i=0;i<n.length;i++)if(!/^\w*$/.test(n[i]))throw new Error(this.lineMsg()+"invalid choice group name: "+n[i])}var o=this.lineNum,s=this.parseOptions(this.indent,n),l=[];t(l,s);for(var c=0;c<l.length;c++){var u=l[c];this.printLine(u.ultimateOption.name);var h=this.clone();if(this.fakeChoice){h.temps.fakeChoiceEnd=this.lineNum;for(var f={},i=0;i<s.length;i++)f[s[i].line-1]=1;h.temps.fakeChoiceLines=f}h.testOption=u,h.testChoiceLine=o,h.testPath.push(","),h.testPath.push(o+1),h.testPath.push("#"),h.testPath.push(c+1),h.testPath.push(" ("),h.testPath.push(u.ultimateOption.line),h.testPath.push(")"),h.resume=function(){this.standardResolution(this.testOption.ultimateOption)},a.push(h)}this.finished=!0},Scene.prototype.clone=function(){this.stats.scene=null;var e=r(this.stats),t=new Scene(this.name,e,this.nav);return t.lines=this.lines,t.labels=this.labels,t.temps=r(this.temps),t.loaded=!0,t.testPath=r(this.testPath),t.firstTab=this.firstTab,t.firstSpace=this.firstSpace,this.stats.scene=this,t},Scene.prototype.conflictingOptions=function(){},Scene.prototype.oldRunCommand||(Scene.prototype.oldRunCommand=Scene.prototype.runCommand),Scene.prototype.runCommand=function(e){return s[this._lineNum]>1?/^\s*\*else/i.test(e)?this.oldRunCommand(e):h[this.lineNum]?this.oldRunCommand(e):this.finish():this.oldRunCommand(e)},Scene.prototype.oldGoto||(Scene.prototype.oldGoto=Scene.prototype["goto"]);var u={};Scene.prototype["goto"]=function(e,t){if(t)return void this.oldGoto(e,!0);var n=e.toLowerCase();return u[n]?void(this.finished=!0):(u[n]=1,void this.oldGoto(e))},Scene.prototype.oldGosub||(Scene.prototype.oldGosub=Scene.prototype.gosub),Scene.prototype.gosub=function(e){u[e.toLowerCase()]||this.oldGosub(e)},Scene.prototype.ending=Scene.prototype.finish,Scene.prototype.restart=Scene.prototype.finish,Scene.prototype.goto_scene=function(e){var t=this.parseGotoScene(e);this.verifySceneFile(t.sceneName),this.finish()},Scene.prototype.gosub_scene=function(e){var t=this.parseGotoScene(e);this.verifySceneFile(t.sceneName)},Scene.prototype["return"]=function(){var e;this.temps.choice_substack&&this.temps.choice_substack.length?(e=this.temps.choice_substack.pop(),this.lineNum=e.lineNum,this.indent=e.indent):this.finish()},Scene.prototype.oldElse||(Scene.prototype.oldElse=Scene.prototype["else"]),Scene.prototype["else"]=function(e,t){t?this.oldIf("true"):this.oldElse()},Scene.prototype.elseif=Scene.prototype.elsif=function(e,t){var n=this.tokenizeExpr(e),i=this.evaluateExpr(n);if("boolean"!=typeof i)throw new Error(this.lineMsg()+"Invalid boolean expression; this isn't a boolean: "+i);this["else"](e,t)},Scene.prototype.oldIf||(Scene.prototype.oldIf=Scene.prototype["if"]);var h={};Scene.prototype["if"]=function(e,t){var n=this.tokenizeExpr(e),i=this.evaluateExpr(n);if("boolean"!=typeof i)throw new Error(this.lineMsg()+"Invalid boolean expression; this isn't a boolean: "+i);if(t)return h[this.lineNum]=1,void this.oldIf("true");var o=this.clone();o.testPath.push(","),o.testPath.push(this.lineNum+1),o.testPath.push("F"),o.lineNum=this.lineNum,o.rollbackLineCoverage(),o.indent=this.indent,o.skipTrueBranch(),o.lineNum++,o.rollbackLineCoverage(),o.resume=function(){this.lineNum=this.lineNum,o.printLoop()},a.push(o),this.oldIf("true")},Scene.prototype.stat_chart=function(){this.parseStatChart()},n||(n="test");var f={};t||(t={repairStats:function(){},resetStats:function(){},startingStats:{},bugLog:[]}),t.resetStats(f);var d=new Scene(n,f,t),p=d;if(d.testPath=[n],d.loadLines(e),o("executing"),d.execute(),i)for(var g=0;g<i.length;g++){var m=i[g];d=new Scene(n,f,t),d.loadLines(e),d.targetLabel=m,d.testPath=[n,",","goto "+m.label],o(d.testPath.join("")),d.execute()}for(;d=a.shift();)o(d.testPath.join("")),d.resume();for(var v=[],b=null,g=0;g<s.length;g++)if(line=trim(p.lines[g]),s[g])b==g?(v.push(b),b=null):b&&(v.push(b+"-"+g),b=null);else if(null===b){if(!line||/\*(comment|bug)\b/.test(line))continue;b=g+1}return b&&v.push(b+"-"+(g-1)),v.length?(o("UNCOVERED:"),o(v.join("\n")),[s,v]):[s]}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=oe.type(e);return"function"===n||oe.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return oe.inArray(e,t)>=0!==n})}function o(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function r(e){var t=we[e]={};return oe.each(e.match(ye)||[],function(e,n){t[n]=!0}),t}function s(){pe.addEventListener?(pe.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1)):(pe.detachEvent("onreadystatechange",a),e.detachEvent("onload",a))}function a(){(pe.addEventListener||"load"===event.type||"complete"===pe.readyState)&&(s(),oe.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(_e,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Se.test(n)?oe.parseJSON(n):n}catch(o){}oe.data(e,t,n)}else n=void 0}return n}function c(e){var t;for(t in e)if(("data"!==t||!oe.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,n,i){if(oe.acceptData(e)){var o,r,s=oe.expando,a=e.nodeType,l=a?oe.cache:e,c=a?e[s]:e[s]&&s;if(c&&l[c]&&(i||l[c].data)||void 0!==n||"string"!=typeof t)return c||(c=a?e[s]=V.pop()||oe.guid++:s),l[c]||(l[c]=a?{}:{toJSON:oe.noop}),("object"==typeof t||"function"==typeof t)&&(i?l[c]=oe.extend(l[c],t):l[c].data=oe.extend(l[c].data,t)),r=l[c],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[oe.camelCase(t)]=n),"string"==typeof t?(o=r[t],null==o&&(o=r[oe.camelCase(t)])):o=r,o}}function h(e,t,n){if(oe.acceptData(e)){var i,o,r=e.nodeType,s=r?oe.cache:e,a=r?e[oe.expando]:oe.expando;if(s[a]){if(t&&(i=n?s[a]:s[a].data)){oe.isArray(t)?t=t.concat(oe.map(t,oe.camelCase)):t in i?t=[t]:(t=oe.camelCase(t),t=t in i?[t]:t.split(" ")),o=t.length;for(;o--;)delete i[t[o]];if(n?!c(i):!oe.isEmptyObject(i))return}(n||(delete s[a].data,c(s[a])))&&(r?oe.cleanData([e],!0):ne.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function f(){return!0}function d(){return!1}function p(){try{return pe.activeElement}catch(e){}}function g(e){var t=Fe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function m(e,t){var n,i,o=0,r=typeof e.getElementsByTagName!==ke?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==ke?e.querySelectorAll(t||"*"):void 0;if(!r)for(r=[],n=e.childNodes||e;null!=(i=n[o]);o++)!t||oe.nodeName(i,t)?r.push(i):oe.merge(r,m(i,t));return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],r):r}function v(e){Le.test(e.type)&&(e.defaultChecked=e.checked)}function b(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==oe.find.attr(e,"type"))+"/"+e.type,e}function w(e){var t=Ke.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function x(e,t){for(var n,i=0;null!=(n=e[i]);i++)oe._data(n,"globalEval",!t||oe._data(t[i],"globalEval"))}function C(e,t){if(1===t.nodeType&&oe.hasData(e)){var n,i,o,r=oe._data(e),s=oe._data(t,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,o=a[n].length;o>i;i++)oe.event.add(t,n,a[n][i])}s.data&&(s.data=oe.extend({},s.data))}}function k(e,t){var n,i,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ne.noCloneEvent&&t[oe.expando]){o=oe._data(t);for(i in o.events)oe.removeEvent(t,i,o.handle);t.removeAttribute(oe.expando)}"script"===n&&t.text!==e.text?(y(t).text=e.text,w(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ne.html5Clone&&e.innerHTML&&!oe.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Le.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function S(t,n){var i,o=oe(n.createElement(t)).appendTo(n.body),r=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(o[0]))?i.display:oe.css(o[0],"display");return o.detach(),r}function _(e){var t=pe,n=Ze[e];

return n||(n=S(e,t),"none"!==n&&n||(Je=(Je||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Je[0].contentWindow||Je[0].contentDocument).document,t.write(),t.close(),n=S(e,t),Je.detach()),Ze[e]=n),n}function T(e,t){return{get:function(){var n=e();return null!=n?n?void delete this.get:(this.get=t).apply(this,arguments):void 0}}}function E(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=ft.length;o--;)if(t=ft[o]+n,t in e)return t;return i}function A(e,t){for(var n,i,o,r=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(r[s]=oe._data(i,"olddisplay"),n=i.style.display,t?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Ae(i)&&(r[s]=oe._data(i,"olddisplay",_(i.nodeName)))):(o=Ae(i),(n&&"none"!==n||!o)&&oe._data(i,"olddisplay",o?n:oe.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[s]||"":"none"));return e}function N(e,t,n){var i=lt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function L(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=oe.css(e,n+Ee[r],!0,o)),i?("content"===n&&(s-=oe.css(e,"padding"+Ee[r],!0,o)),"margin"!==n&&(s-=oe.css(e,"border"+Ee[r]+"Width",!0,o))):(s+=oe.css(e,"padding"+Ee[r],!0,o),"padding"!==n&&(s+=oe.css(e,"border"+Ee[r]+"Width",!0,o)));return s}function D(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=et(e),s=ne.boxSizing&&"border-box"===oe.css(e,"boxSizing",!1,r);if(0>=o||null==o){if(o=tt(e,t,r),(0>o||null==o)&&(o=e.style[t]),it.test(o))return o;i=s&&(ne.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+L(e,t,n||(s?"border":"content"),i,r)+"px"}function O(e,t,n,i,o){return new O.prototype.init(e,t,n,i,o)}function P(){return setTimeout(function(){dt=void 0}),dt=oe.now()}function M(e,t){var n,i={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n=Ee[o],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function I(e,t,n){for(var i,o=(yt[t]||[]).concat(yt["*"]),r=0,s=o.length;s>r;r++)if(i=o[r].call(n,t,e))return i}function F(e,t,n){var i,o,r,s,a,l,c,u,h=this,f={},d=e.style,p=e.nodeType&&Ae(e),g=oe._data(e,"fxshow");n.queue||(a=oe._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,oe.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],c=oe.css(e,"display"),u="none"===c?oe._data(e,"olddisplay")||_(e.nodeName):c,"inline"===u&&"none"===oe.css(e,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==_(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ne.shrinkWrapBlocks()||h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],gt.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;p=!0}f[i]=g&&g[i]||oe.style(e,i)}else c=void 0;if(oe.isEmptyObject(f))"inline"===("none"===c?_(e.nodeName):c)&&(d.display=c);else{g?"hidden"in g&&(p=g.hidden):g=oe._data(e,"fxshow",{}),r&&(g.hidden=!p),p?oe(e).show():h.done(function(){oe(e).hide()}),h.done(function(){var t;oe._removeData(e,"fxshow");for(t in f)oe.style(e,t,f[t])});for(i in f)s=I(p?g[i]:0,i,h),i in g||(g[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function j(e,t){var n,i,o,r,s;for(n in e)if(i=oe.camelCase(n),o=t[i],r=e[n],oe.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),s=oe.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=o)}else t[i]=o}function R(e,t,n){var i,o,r=0,s=bt.length,a=oe.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=dt||P(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,r=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(r);return a.notifyWith(e,[c,r,n]),1>r&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:dt||P(),duration:n.duration,tweens:[],createTween:function(t,n){var i=oe.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(j(u,c.opts.specialEasing);s>r;r++)if(i=bt[r].call(c,e,u,c.opts))return i;return oe.map(u,I,c),oe.isFunction(c.opts.start)&&c.opts.start.call(e,c),oe.fx.timer(oe.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(ye)||[];if(oe.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function B(e,t,n,i){function o(a){var l;return r[a]=!0,oe.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=e===zt;return o(t.dataTypes[0])||!r["*"]&&o("*")}function $(e,t){var n,i,o=oe.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&oe.extend(!0,e,n),e}function W(e,t,n){for(var i,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(s in a)if(a[s]&&a[s].test(o)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}i||(i=s)}r=r||i}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function z(e,t,n,i){var o,r,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=c[l+" "+r]||c["* "+r],!s)for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[o]:c[o]!==!0&&(r=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function q(e,t,n,i){var o;if(oe.isArray(t))oe.each(t,function(t,o){n||Kt.test(e)?i(e,o):q(e+"["+("object"==typeof o?t:"")+"]",o,n,i)});else if(n||"object"!==oe.type(t))i(e,t);else for(o in t)q(e+"["+o+"]",t[o],n,i)}function U(){try{return new e.XMLHttpRequest}catch(t){}}function G(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function K(e){return oe.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var V=[],X=V.slice,Q=V.concat,Y=V.push,J=V.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,ne={},ie="1.11.3",oe=function(e,t){return new oe.fn.init(e,t)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ae=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return oe.each(this,e,t)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:V.sort,splice:V.splice},oe.extend=oe.fn.extend=function(){var e,t,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||oe.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(o=arguments[a]))for(i in o)e=s[i],n=o[i],s!==n&&(c&&n&&(oe.isPlainObject(n)||(t=oe.isArray(n)))?(t?(t=!1,r=e&&oe.isArray(e)?e:[]):r=e&&oe.isPlainObject(e)?e:{},s[i]=oe.extend(c,r,n)):void 0!==n&&(s[i]=n));return s},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray||function(e){return"array"===oe.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!oe.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&oe.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(se,"ms-").replace(ae,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var o,r=0,s=e.length,a=n(e);if(i){if(a)for(;s>r&&(o=t.apply(e[r],i),o!==!1);r++);else for(r in e)if(o=t.apply(e[r],i),o===!1)break}else if(a)for(;s>r&&(o=t.call(e[r],r,e[r]),o!==!1);r++);else for(r in e)if(o=t.call(e[r],r,e[r]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(re,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?oe.merge(i,"string"==typeof e?[e]:e):Y.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(J)return J.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;n>i;)e[o++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[o++]=t[i++];return e.length=o,e},grep:function(e,t,n){for(var i,o=[],r=0,s=e.length,a=!n;s>r;r++)i=!t(e[r],r),i!==a&&o.push(e[r]);return o},map:function(e,t,i){var o,r=0,s=e.length,a=n(e),l=[];if(a)for(;s>r;r++)o=t(e[r],r,i),null!=o&&l.push(o);else for(r in e)o=t(e[r],r,i),null!=o&&l.push(o);return Q.apply([],l)},guid:1,proxy:function(e,t){var n,i,o;return"string"==typeof t&&(o=e[t],t=e,e=o),oe.isFunction(e)?(n=X.call(arguments,2),i=function(){return e.apply(t||this,n.concat(X.call(arguments)))},i.guid=e.guid=e.guid||oe.guid++,i):void 0},now:function(){return+new Date},support:ne}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,i){var o,r,s,a,l,c,h,d,p,g;if((t?t.ownerDocument||t:B)!==O&&D(t),t=t||O,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!i&&M){if(11!==a&&(o=be.exec(e)))if(s=o[1]){if(9===a){if(r=t.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&R(t,r)&&r.id===s)return n.push(r),n}else{if(o[2])return J.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&x.getElementsByClassName)return J.apply(n,t.getElementsByClassName(s)),n}if(x.qsa&&(!I||!I.test(e))){if(d=h=H,p=t,g=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=_(e),(h=t.getAttribute("id"))?d=h.replace(we,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+f(c[l]);p=ye.test(e)&&u(t.parentNode)||t,g=c.join(",")}if(g)try{return J.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{h||t.removeAttribute("id")}}}return E(e.replace(le,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[H]=!0,e}function o(e){var t=O.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=e.length;i--;)C.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function f(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=W++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var a,l,c=[$,r];if(s){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(l=t[H]||(t[H]={}),(a=l[i])&&a[0]===$&&a[1]===r)return c[2]=a[2];if(l[i]=c,c[2]=e(t,n,s))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function g(e,n,i){for(var o=0,r=n.length;r>o;o++)t(e,n[o],i);return i}function m(e,t,n,i,o){for(var r,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(!n||n(r,i,o))&&(s.push(r),c&&t.push(a));return s}function v(e,t,n,o,r,s){return o&&!o[H]&&(o=v(o)),r&&!r[H]&&(r=v(r,s)),i(function(i,s,a,l){var c,u,h,f=[],d=[],p=s.length,v=i||g(t||"*",a.nodeType?[a]:a,[]),b=!e||!i&&t?v:m(v,f,e,a,l),y=n?r||(i?e:p||o)?[]:s:b;if(n&&n(b,y,a,l),o)for(c=m(y,d),o(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[d[u]]=!(b[d[u]]=h));if(i){if(r||e){if(r){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(b[u]=h);r(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=r?ee(i,h):f[u])>-1&&(i[c]=!(s[c]=h))}}else y=m(y===s?y.splice(p,y.length):y),r?r(null,s,y,l):J.apply(s,y)})}function b(e){for(var t,n,i,o=e.length,r=C.relative[e[0].type],s=r||C.relative[" "],a=r?1:0,l=d(function(e){return e===t},s,!0),c=d(function(e){return ee(t,e)>-1},s,!0),u=[function(e,n,i){var o=!r&&(i||n!==A)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,o}];o>a;a++)if(n=C.relative[e[a].type])u=[d(p(u),n)];else{if(n=C.filter[e[a].type].apply(null,e[a].matches),n[H]){for(i=++a;o>i&&!C.relative[e[i].type];i++);return v(a>1&&p(u),a>1&&f(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(le,"$1"),n,i>a&&b(e.slice(a,i)),o>i&&b(e=e.slice(i)),o>i&&f(e))}u.push(n)}return p(u)}function y(e,n){var o=n.length>0,r=e.length>0,s=function(i,s,a,l,c){var u,h,f,d=0,p="0",g=i&&[],v=[],b=A,y=i||r&&C.find.TAG("*",c),w=$+=null==b?1:Math.random()||.1,x=y.length;for(c&&(A=s!==O&&s);p!==x&&null!=(u=y[p]);p++){if(r&&u){for(h=0;f=e[h++];)if(f(u,s,a)){l.push(u);break}c&&($=w)}o&&((u=!f&&u)&&d--,i&&g.push(u))}if(d+=p,o&&p!==d){for(h=0;f=n[h++];)f(g,v,s,a);if(i){if(d>0)for(;p--;)g[p]||v[p]||(v[p]=Q.call(l));v=m(v)}J.apply(l,v),c&&!i&&v.length>0&&d+n.length>1&&t.uniqueSort(l)}return c&&($=w,A=b),g};return o?i(s):s}var w,x,C,k,S,_,T,E,A,N,L,D,O,P,M,I,F,j,R,H="sizzle"+1*new Date,B=e.document,$=0,W=0,z=n(),q=n(),U=n(),G=function(e,t){return e===t&&(L=!0),0},K=1<<31,V={}.hasOwnProperty,X=[],Q=X.pop,Y=X.push,J=X.push,Z=X.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ie.replace("w","w#"),re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),he=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(se),de=new RegExp("^"+oe+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ce=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ke=function(){D()};try{J.apply(X=Z.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(Se){J={apply:X.length?function(e,t){Y.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:B;return i!==O&&9===i.nodeType&&i.documentElement?(O=i,P=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),M=!S(i),x.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=o(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ve.test(i.getElementsByClassName),x.getById=o(function(e){return P.appendChild(e).id=H,!i.getElementsByName||!i.getElementsByName(H).length}),x.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&M){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(xe,Ce);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(xe,Ce);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.CLASS=x.getElementsByClassName&&function(e,t){return M?t.getElementsByClassName(e):void 0},F=[],I=[],(x.qsa=ve.test(i.querySelectorAll))&&(o(function(e){P.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||I.push("~="),e.querySelectorAll(":checked").length||I.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||I.push(".#.+[+~]")}),o(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=ve.test(j=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(e){x.disconnectedMatch=j.call(e,"div"),j.call(e,"[s!='']:x"),F.push("!=",se)}),I=I.length&&new RegExp(I.join("|")),F=F.length&&new RegExp(F.join("|")),t=ve.test(P.compareDocumentPosition),R=t||ve.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return L=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===B&&R(B,e)?-1:t===i||t.ownerDocument===B&&R(B,t)?1:N?ee(N,e)-ee(N,t):0:4&n?-1:1)}:function(e,t){if(e===t)return L=!0,0;var n,o=0,r=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!r||!a)return e===i?-1:t===i?1:r?-1:a?1:N?ee(N,e)-ee(N,t):0;if(r===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?s(l[o],c[o]):l[o]===B?-1:c[o]===B?1:0},i):O},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&D(e),n=n.replace(he,"='$1']"),!(!x.matchesSelector||!M||F&&F.test(n)||I&&I.test(n)))try{var i=j.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(o){}return t(n,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&D(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&D(e);var n=C.attrHandle[t.toLowerCase()],i=n&&V.call(C.attrHandle,t.toLowerCase())?n(e,t,!M):void 0;return void 0!==i?i:x.attributes||!M?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(L=!x.detectDuplicates,N=!x.sortStable&&e.slice(0),e.sort(G),L){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return N=null,e},k=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=k(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,Ce),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,Ce),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=_(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,Ce).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var r=t.attr(o,e);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(ae," ")+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,f,d,p,g=r!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a;if(m){if(r){for(;g;){for(h=t;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&b){for(u=m[H]||(m[H]={}),c=u[e]||[],d=c[0]===$&&c[1],f=c[0]===$&&c[2],h=d&&m.childNodes[d];h=++d&&h&&h[g]||(f=d=0)||p.pop();)if(1===h.nodeType&&++f&&h===t){u[e]=[$,d,f];break}}else if(b&&(c=(t[H]||(t[H]={}))[e])&&c[0]===$)f=c[1];else for(;(h=++d&&h&&h[g]||(f=d=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++f||(b&&((h[H]||(h[H]={}))[e]=[$,f]),h!==t)););return f-=o,f===i||f%i===0&&f/i>=0}}},PSEUDO:function(e,n){var o,r=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[H]?r(n):r.length>1?(o=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=r(e,n),s=o.length;s--;)i=ee(e,o[s]),e[i]=!(t[i]=o[s])}):function(e){return r(e,0,o)}):r}},pseudos:{not:i(function(e){var t=[],n=[],o=T(e.replace(le,"$1"));return o[H]?i(function(e,t,n,i){for(var r,s=o(e,null,i,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(xe,Ce),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,Ce).toLowerCase(),function(t){var n;do if(n=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);return h.prototype=C.filters=C.pseudos,C.setFilters=new h,_=t.tokenize=function(e,n){var i,o,r,s,a,l,c,u=q[e+" "];if(u)return n?0:u.slice(0);for(a=e,l=[],c=C.preFilter;a;){(!i||(o=ce.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=ue.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(le," ")}),a=a.slice(i.length));for(s in C.filter)!(o=pe[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):q(e,l).slice(0)},T=t.compile=function(e,t){var n,i=[],o=[],r=U[e+" "];if(!r){for(t||(t=_(e)),n=t.length;n--;)r=b(t[n]),r[H]?i.push(r):o.push(r);r=U(e,y(o,i)),r.selector=e}return r},E=t.select=function(e,t,n,i){var o,r,s,a,l,c="function"==typeof e&&e,h=!i&&_(e=c.selector||e);if(n=n||[],1===h.length){if(r=h[0]=h[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&x.getById&&9===t.nodeType&&M&&C.relative[r[1].type]){if(t=(C.find.ID(s.matches[0].replace(xe,Ce),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=pe.needsContext.test(e)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((l=C.find[a])&&(i=l(s.matches[0].replace(xe,Ce),ye.test(r[0].type)&&u(t.parentNode)||t))){if(r.splice(o,1),e=i.length&&f(r),!e)return J.apply(n,i),n;break}}return(c||T(e,h))(i,t,!M,n,ye.test(e)&&u(t.parentNode)||t),n},x.sortStable=H.split("").sort(G).join("")===H,x.detectDuplicates=!!L,D(),x.sortDetached=o(function(e){return 1&e.compareDocumentPosition(O.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);oe.find=ce,oe.expr=ce.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=ce.uniqueSort,oe.text=ce.getText,oe.isXMLDoc=ce.isXML,oe.contains=ce.contains;var ue=oe.expr.match.needsContext,he=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?oe.find.matchesSelector(i,e)?[i]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=[],i=this,o=i.length;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;o>t;t++)if(oe.contains(i[t],this))return!0}));for(t=0;o>t;t++)oe.find(e,i[t],n);return n=this.pushStack(o>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ue.test(e)?oe(e):e||[],!1).length}});var de,pe=e.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=oe.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ge.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||de).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:pe,!0)),he.test(n[1])&&oe.isPlainObject(t))for(n in t)oe.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=pe.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return de.find(e);this.length=1,this[0]=i}return this.context=pe,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?"undefined"!=typeof de.ready?de.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};me.prototype=oe.fn,de=oe(pe);var ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(e,t,n){for(var i=[],o=e[t];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!oe(o).is(n));)1===o.nodeType&&i.push(o),o=o[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),oe.fn.extend({has:function(e){var t,n=oe(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(oe.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,r=[],s=ue.test(e)||"string"!=typeof e?oe(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?oe.unique(r):r)},index:function(e){return e?"string"==typeof e?oe.inArray(this[0],oe(e)):oe.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.unique(oe.merge(this.get(),oe(e,t))));

},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return oe.dir(e,"parentNode")},parentsUntil:function(e,t,n){return oe.dir(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return oe.dir(e,"nextSibling")},prevAll:function(e){return oe.dir(e,"previousSibling")},nextUntil:function(e,t,n){return oe.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return oe.dir(e,"previousSibling",n)},siblings:function(e){return oe.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return oe.sibling(e.firstChild)},contents:function(e){return oe.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,i){var o=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=oe.filter(i,o)),this.length>1&&(be[e]||(o=oe.unique(o)),ve.test(e)&&(o=o.reverse())),this.pushStack(o)}});var ye=/\S+/g,we={};oe.Callbacks=function(e){e="string"==typeof e?we[e]||r(e):oe.extend({},e);var t,n,i,o,s,a,l=[],c=!e.once&&[],u=function(r){for(n=e.memory&&r,i=!0,s=a||0,a=0,o=l.length,t=!0;l&&o>s;s++)if(l[s].apply(r[0],r[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,l&&(c?c.length&&u(c.shift()):n?l=[]:h.disable())},h={add:function(){if(l){var i=l.length;!function r(t){oe.each(t,function(t,n){var i=oe.type(n);"function"===i?e.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),t?o=l.length:n&&(a=i,u(n))}return this},remove:function(){return l&&oe.each(arguments,function(e,n){for(var i;(i=oe.inArray(n,l,i))>-1;)l.splice(i,1),t&&(o>=i&&o--,s>=i&&s--)}),this},has:function(e){return e?oe.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=n=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,n||h.disable(),this},locked:function(){return!c},fireWith:function(e,n){return!l||i&&!c||(n=n||[],n=[e,n.slice?n.slice():n],t?c.push(n):u(n)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,r){var s=oe.isFunction(e[t])&&e[t];o[r[1]](function(){var e=s&&s.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,i):i}},o={};return i.pipe=i.then,oe.each(t,function(e,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,r=X.call(arguments),s=r.length,a=1!==s||e&&oe.isFunction(e.promise)?s:0,l=1===a?e:oe.Deferred(),c=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?X.call(arguments):o,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)r[o]&&oe.isFunction(r[o].promise)?r[o].promise().done(c(o,i,r)).fail(l.reject).progress(c(o,n,t)):--a;return a||l.resolveWith(i,r),l.promise()}});var xe;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){if(e===!0?!--oe.readyWait:!oe.isReady){if(!pe.body)return setTimeout(oe.ready);oe.isReady=!0,e!==!0&&--oe.readyWait>0||(xe.resolveWith(pe,[oe]),oe.fn.triggerHandler&&(oe(pe).triggerHandler("ready"),oe(pe).off("ready")))}}}),oe.ready.promise=function(t){if(!xe)if(xe=oe.Deferred(),"complete"===pe.readyState)setTimeout(oe.ready);else if(pe.addEventListener)pe.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1);else{pe.attachEvent("onreadystatechange",a),e.attachEvent("onload",a);var n=!1;try{n=null==e.frameElement&&pe.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!oe.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}s(),oe.ready()}}()}return xe.promise(t)};var Ce,ke="undefined";for(Ce in oe(ne))break;ne.ownLast="0"!==Ce,ne.inlineBlockNeedsLayout=!1,oe(function(){var e,t,n,i;n=pe.getElementsByTagName("body")[0],n&&n.style&&(t=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==ke&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=pe.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(t){ne.deleteExpando=!1}}e=null}(),oe.acceptData=function(e){var t=oe.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_e=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?oe.cache[e[oe.expando]]:e[oe.expando],!!e&&!c(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return h(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return h(e,t,!0)}}),oe.fn.extend({data:function(e,t){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=oe.data(r),1===r.nodeType&&!oe._data(r,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(r,i,o[i])));oe._data(r,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){oe.data(this,e)}):arguments.length>1?this.each(function(){oe.data(this,e,t)}):r?l(r,e,oe.data(r,e)):void 0},removeData:function(e){return this.each(function(){oe.removeData(this,e)})}}),oe.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=oe._data(e,t),n&&(!i||oe.isArray(n)?i=oe._data(e,t,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),i=n.length,o=n.shift(),r=oe._queueHooks(e,t),s=function(){oe.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return oe._data(e,n)||oe._data(e,n,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(e,t+"queue"),oe._removeData(e,n)})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):void 0===t?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=oe.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=oe._data(r[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(t)}});var Te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=["Top","Right","Bottom","Left"],Ae=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Ne=oe.access=function(e,t,n,i,o,r,s){var a=0,l=e.length,c=null==n;if("object"===oe.type(n)){o=!0;for(a in n)oe.access(e,t,a,n[a],!0,r,s)}else if(void 0!==i&&(o=!0,oe.isFunction(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(oe(e),n)})),t))for(;l>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return o?e:c?t.call(e):l?t(e[0],n):r},Le=/^(?:checkbox|radio)$/i;!function(){var e=pe.createElement("input"),t=pe.createElement("div"),n=pe.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===t.firstChild.nodeType,ne.tbody=!t.getElementsByTagName("tbody").length,ne.htmlSerialize=!!t.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==pe.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ne.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ne.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(i){ne.deleteExpando=!1}}}(),function(){var t,n,i=pe.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ne[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),ne[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var De=/^(?:input|select|textarea)$/i,Oe=/^key/,Pe=/^(?:mouse|pointer|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,Ie=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(e,t,n,i,o){var r,s,a,l,c,u,h,f,d,p,g,m=oe._data(e);if(m){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=oe.guid++),(s=m.events)||(s=m.events={}),(u=m.handle)||(u=m.handle=function(e){return typeof oe===ke||e&&oe.event.triggered===e.type?void 0:oe.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(ye)||[""],a=t.length;a--;)r=Ie.exec(t[a])||[],d=g=r[1],p=(r[2]||"").split(".").sort(),d&&(c=oe.event.special[d]||{},d=(o?c.delegateType:c.bindType)||d,c=oe.event.special[d]||{},h=oe.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:p.join(".")},l),(f=s[d])||(f=s[d]=[],f.delegateCount=0,c.setup&&c.setup.call(e,i,p,u)!==!1||(e.addEventListener?e.addEventListener(d,u,!1):e.attachEvent&&e.attachEvent("on"+d,u))),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,h):f.push(h),oe.event.global[d]=!0);e=null}},remove:function(e,t,n,i,o){var r,s,a,l,c,u,h,f,d,p,g,m=oe.hasData(e)&&oe._data(e);if(m&&(u=m.events)){for(t=(t||"").match(ye)||[""],c=t.length;c--;)if(a=Ie.exec(t[c])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(h=oe.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,f=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=f.length;r--;)s=f[r],!o&&g!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(f.splice(r,1),s.selector&&f.delegateCount--,h.remove&&h.remove.call(e,s));l&&!f.length&&(h.teardown&&h.teardown.call(e,p,m.handle)!==!1||oe.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)oe.event.remove(e,d+t[c],n,i,!0);oe.isEmptyObject(u)&&(delete m.handle,oe._removeData(e,"events"))}},trigger:function(t,n,i,o){var r,s,a,l,c,u,h,f=[i||pe],d=te.call(t,"type")?t.type:t,p=te.call(t,"namespace")?t.namespace.split("."):[];if(a=u=i=i||pe,3!==i.nodeType&&8!==i.nodeType&&!Me.test(d+oe.event.triggered)&&(d.indexOf(".")>=0&&(p=d.split("."),d=p.shift(),p.sort()),s=d.indexOf(":")<0&&"on"+d,t=t[oe.expando]?t:new oe.Event(d,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:oe.makeArray(n,[t]),c=oe.event.special[d]||{},o||!c.trigger||c.trigger.apply(i,n)!==!1)){if(!o&&!c.noBubble&&!oe.isWindow(i)){for(l=c.delegateType||d,Me.test(l+d)||(a=a.parentNode);a;a=a.parentNode)f.push(a),u=a;u===(i.ownerDocument||pe)&&f.push(u.defaultView||u.parentWindow||e)}for(h=0;(a=f[h++])&&!t.isPropagationStopped();)t.type=h>1?l:c.bindType||d,r=(oe._data(a,"events")||{})[t.type]&&oe._data(a,"handle"),r&&r.apply(a,n),r=s&&a[s],r&&r.apply&&oe.acceptData(a)&&(t.result=r.apply(a,n),t.result===!1&&t.preventDefault());if(t.type=d,!o&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(f.pop(),n)===!1)&&oe.acceptData(i)&&s&&i[d]&&!oe.isWindow(i)){u=i[s],u&&(i[s]=null),oe.event.triggered=d;try{i[d]()}catch(g){}oe.event.triggered=void 0,u&&(i[s]=u)}return t.result}},dispatch:function(e){e=oe.event.fix(e);var t,n,i,o,r,s=[],a=X.call(arguments),l=(oe._data(this,"events")||{})[e.type]||[],c=oe.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=oe.event.handlers.call(this,e,l),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((oe.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,r,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],r=0;a>r;r++)i=t[r],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?oe(n,this).index(l)>=0:oe.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},fix:function(e){if(e[oe.expando])return e;var t,n,i,o=e.type,r=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Pe.test(o)?this.mouseHooks:Oe.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new oe.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=r.srcElement||pe),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,r=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||pe,o=i.documentElement,n=i.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var o=oe.extend(new oe.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(o,null,t):oe.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=pe.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===ke&&(e[i]=null),e.detachEvent(i,n))},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:d):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return(!o||o!==i&&!oe.contains(i,o))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),ne.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=oe.nodeName(t,"input")||oe.nodeName(t,"button")?t.form:void 0;n&&!oe._data(n,"submitBubbles")&&(oe.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),oe._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&oe.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),ne.changeBubbles||(oe.event.special.change={setup:function(){return De.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,e,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(e){var t=e.target;De.test(t.nodeName)&&!oe._data(t,"changeBubbles")&&(oe.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||oe.event.simulate("change",this.parentNode,e,!0)}),oe._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!De.test(this.nodeName)}}),ne.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e),!0)};oe.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=oe._data(i,t);o||i.addEventListener(e,n,!0),oe._data(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=oe._data(i,t)-1;o?oe._data(i,t,o):(i.removeEventListener(e,n,!0),oe._removeData(i,t))}}}),oe.fn.extend({on:function(e,t,n,i,o){var r,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(r in e)this.on(r,t,n,e[r],o);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=d;else if(!i)return this;return 1===o&&(s=i,i=function(e){return oe().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=oe.guid++)),this.each(function(){oe.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,oe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=d),this.each(function(){oe.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?oe.event.trigger(e,t,n,!0):void 0}});var Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",je=/ jQuery\d+="(?:null|\d+)"/g,Re=new RegExp("<(?:"+Fe+")[\\s/>]","i"),He=/^\s+/,Be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$e=/<([\w:]+)/,We=/<tbody/i,ze=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^$|\/(?:java|ecma)script/i,Ke=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qe=g(pe),Ye=Qe.appendChild(pe.createElement("div"));Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td,oe.extend({clone:function(e,t,n){var i,o,r,s,a,l=oe.contains(e.ownerDocument,e);if(ne.html5Clone||oe.isXMLDoc(e)||!Re.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(Ye.innerHTML=e.outerHTML,Ye.removeChild(r=Ye.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(i=m(r),a=m(e),s=0;null!=(o=a[s]);++s)i[s]&&k(o,i[s]);if(t)if(n)for(a=a||m(e),i=i||m(r),s=0;null!=(o=a[s]);s++)C(o,i[s]);else C(e,r);return i=m(r,"script"),i.length>0&&x(i,!l&&m(e,"script")),i=a=o=null,r},buildFragment:function(e,t,n,i){for(var o,r,s,a,l,c,u,h=e.length,f=g(t),d=[],p=0;h>p;p++)if(r=e[p],r||0===r)if("object"===oe.type(r))oe.merge(d,r.nodeType?[r]:r);else if(ze.test(r)){for(a=a||f.appendChild(t.createElement("div")),l=($e.exec(r)||["",""])[1].toLowerCase(),u=Xe[l]||Xe._default,a.innerHTML=u[1]+r.replace(Be,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!ne.leadingWhitespace&&He.test(r)&&d.push(t.createTextNode(He.exec(r)[0])),!ne.tbody)for(r="table"!==l||We.test(r)?"<table>"!==u[1]||We.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)oe.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(oe.merge(d,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=f.lastChild}else d.push(t.createTextNode(r));for(a&&f.removeChild(a),ne.appendChecked||oe.grep(m(d,"input"),v),p=0;r=d[p++];)if((!i||-1===oe.inArray(r,i))&&(s=oe.contains(r.ownerDocument,r),a=m(f.appendChild(r),"script"),s&&x(a),n))for(o=0;r=a[o++];)Ge.test(r.type||"")&&n.push(r);return a=null,f},cleanData:function(e,t){for(var n,i,o,r,s=0,a=oe.expando,l=oe.cache,c=ne.deleteExpando,u=oe.event.special;null!=(n=e[s]);s++)if((t||oe.acceptData(n))&&(o=n[a],r=o&&l[o])){if(r.events)for(i in r.events)u[i]?oe.event.remove(n,i):oe.removeEvent(n,i,r.handle);l[o]&&(delete l[o],c?delete n[a]:typeof n.removeAttribute!==ke?n.removeAttribute(a):n[a]=null,V.push(o))}}}),oe.fn.extend({text:function(e){return Ne(this,function(e){return void 0===e?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pe).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?oe.filter(e,this):this,o=0;null!=(n=i[o]);o++)t||1!==n.nodeType||oe.cleanData(m(n)),n.parentNode&&(t&&oe.contains(n.ownerDocument,n)&&x(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&oe.cleanData(m(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&oe.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Ne(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(je,""):void 0;if(!("string"!=typeof e||qe.test(e)||!ne.htmlSerialize&&Re.test(e)||!ne.leadingWhitespace&&He.test(e)||Xe[($e.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Be,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(oe.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,oe.cleanData(m(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Q.apply([],e);var n,i,o,r,s,a,l=0,c=this.length,u=this,h=c-1,f=e[0],d=oe.isFunction(f);if(d||c>1&&"string"==typeof f&&!ne.checkClone&&Ue.test(f))return this.each(function(n){var i=u.eq(n);d&&(e[0]=f.call(this,n,i.html())),i.domManip(e,t)});if(c&&(a=oe.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(r=oe.map(m(a,"script"),y),o=r.length;c>l;l++)i=a,l!==h&&(i=oe.clone(i,!0,!0),o&&oe.merge(r,m(i,"script"))),t.call(this[l],i,l);if(o)for(s=r[r.length-1].ownerDocument,oe.map(r,w),l=0;o>l;l++)i=r[l],Ge.test(i.type||"")&&!oe._data(i,"globalEval")&&oe.contains(s,i)&&(i.src?oe._evalUrl&&oe._evalUrl(i.src):oe.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Ve,"")));a=n=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,i=0,o=[],r=oe(e),s=r.length-1;s>=i;i++)n=i===s?this:this.clone(!0),oe(r[i])[t](n),Y.apply(o,n.get());return this.pushStack(o)}});var Je,Ze={};!function(){var e;ne.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=pe.getElementsByTagName("body")[0],n&&n.style?(t=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==ke&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(pe.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var et,tt,nt=/^margin/,it=new RegExp("^("+Te+")(?!px)[a-z%]+$","i"),ot=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},tt=function(e,t,n){var i,o,r,s,a=e.style;return n=n||et(e),s=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==s||oe.contains(e.ownerDocument,e)||(s=oe.style(e,t)),it.test(s)&&nt.test(t)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0===s?s:s+""}):pe.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,n){var i,o,r,s,a=e.style;return n=n||et(e),s=n?n[t]:void 0,null==s&&a&&a[t]&&(s=a[t]),it.test(s)&&!ot.test(t)&&(i=a.left,o=e.runtimeStyle,r=o&&o.left,r&&(o.left=e.currentStyle.left),a.left="fontSize"===t?"1em":s,s=a.pixelLeft+"px",a.left=i,r&&(o.left=r)),void 0===s?s:s+""||"auto"}),!function(){function t(){var t,n,i,o;n=pe.getElementsByTagName("body")[0],n&&n.style&&(t=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=s=!1,l=!0,e.getComputedStyle&&(r="1%"!==(e.getComputedStyle(t,null)||{}).top,s="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,o=t.appendChild(pe.createElement("div")),o.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight),t.removeChild(o)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=t.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===o[0].offsetHeight,a&&(o[0].style.display="",o[1].style.display="none",a=0===o[0].offsetHeight),n.removeChild(i))}var n,i,o,r,s,a,l;n=pe.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=n.getElementsByTagName("a")[0],(i=o&&o.style)&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,oe.extend(ne,{reliableHiddenOffsets:function(){return null==a&&t(),a},boxSizingReliable:function(){return null==s&&t(),s},pixelPosition:function(){return null==r&&t(),r},reliableMarginRight:function(){return null==l&&t(),l}}))}(),oe.swap=function(e,t,n,i){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=s[r];return o};var rt=/alpha\([^)]*\)/i,st=/opacity\s*=\s*([^)]*)/,at=/^(none|table(?!-c[ea]).+)/,lt=new RegExp("^("+Te+")(.*)$","i"),ct=new RegExp("^([+-])=("+Te+")","i"),ut={position:"absolute",visibility:"hidden",display:"block"},ht={letterSpacing:"0",fontWeight:"400"},ft=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=oe.camelCase(t),l=e.style;if(t=oe.cssProps[a]||(oe.cssProps[a]=E(l,a)),s=oe.cssHooks[t]||oe.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:l[t];if(r=typeof n,"string"===r&&(o=ct.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(oe.css(e,t)),r="number"),null!=n&&n===n&&("number"!==r||oe.cssNumber[a]||(n+="px"),ne.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(e,n,i)))))try{l[t]=n}catch(c){}}},css:function(e,t,n,i){var o,r,s,a=oe.camelCase(t);return t=oe.cssProps[a]||(oe.cssProps[a]=E(e.style,a)),s=oe.cssHooks[t]||oe.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=tt(e,t,i)),"normal"===r&&t in ht&&(r=ht[t]),""===n||n?(o=parseFloat(r),n===!0||oe.isNumeric(o)?o||0:r):r}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,i){return n?at.test(oe.css(e,"display"))&&0===e.offsetWidth?oe.swap(e,ut,function(){return D(e,t,i)}):D(e,t,i):void 0},set:function(e,n,i){var o=i&&et(e);return N(e,n,i?L(e,t,i,ne.boxSizing&&"border-box"===oe.css(e,"boxSizing",!1,o),o):0)}}}),ne.opacity||(oe.cssHooks.opacity={get:function(e,t){return st.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=oe.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===oe.trim(r.replace(rt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),
""===t||i&&!i.filter)||(n.filter=rt.test(r)?r.replace(rt,o):r+" "+o)}}),oe.cssHooks.marginRight=T(ne.reliableMarginRight,function(e,t){return t?oe.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+Ee[i]+t]=r[i]||r[i-2]||r[0];return o}},nt.test(e)||(oe.cssHooks[e+t].set=N)}),oe.fn.extend({css:function(e,t){return Ne(this,function(e,t,n){var i,o,r={},s=0;if(oe.isArray(t)){for(i=et(e),o=t.length;o>s;s++)r[t[s]]=oe.css(e,t[s],!1,i);return r}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ae(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=O,O.prototype={constructor:O,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(oe.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.pos=t=this.options.duration?oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[oe.cssProps[e.prop]]||oe.cssHooks[e.prop])?oe.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},oe.fx=O.prototype.init,oe.fx.step={};var dt,pt,gt=/^(?:toggle|show|hide)$/,mt=new RegExp("^(?:([+-])=|)("+Te+")([a-z%]*)$","i"),vt=/queueHooks$/,bt=[F],yt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),o=mt.exec(t),r=o&&o[3]||(oe.cssNumber[e]?"":"px"),s=(oe.cssNumber[e]||"px"!==r&&+i)&&mt.exec(oe.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+i||1;do a=a||".5",s/=a,oe.style(n.elem,e,s+r);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]};oe.Animation=oe.extend(R,{tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,o=e.length;o>i;i++)n=e[i],yt[n]=yt[n]||[],yt[n].unshift(t)},prefilter:function(e,t){t?bt.unshift(e):bt.push(e)}}),oe.speed=function(e,t,n){var i=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=oe.isEmptyObject(e),r=oe.speed(t,n,i),s=function(){var t=R(this,oe.extend({},e),r);(o||oe._data(this,"finish"))&&t.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=oe.timers,s=oe._data(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&vt.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));(t||!n)&&oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=oe._data(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=oe.timers,s=i?i.length:0;for(n.finish=!0,oe.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(M(t,!0),e,i,o)}}),oe.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),oe.timers=[],oe.fx.tick=function(){var e,t=oe.timers,n=0;for(dt=oe.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||oe.fx.stop(),dt=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){pt||(pt=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(pt),pt=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(e,t){return e=oe.fx?oe.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,o;t=pe.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=pe.createElement("select"),o=n.appendChild(pe.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==t.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=o.selected,ne.enctype=!!pe.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!o.disabled,e=pe.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value}();var wt=/\r/g;oe.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=oe.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,oe(this).val()):e,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(e){return null==e?"":e+""})),t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(wt,""):null==n?"":n)):void 0}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e))}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==o||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var n,i,o=e.options,r=oe.makeArray(t),s=o.length;s--;)if(i=o[s],oe.inArray(oe.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){return oe.isArray(t)?e.checked=oe.inArray(oe(e).val(),t)>=0:void 0}},ne.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xt,Ct,kt=oe.expr.attrHandle,St=/^(?:checked|selected)$/i,_t=ne.getSetAttribute,Tt=ne.input;oe.fn.extend({attr:function(e,t){return Ne(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var i,o,r=e.nodeType;return e&&3!==r&&8!==r&&2!==r?typeof e.getAttribute===ke?oe.prop(e,t,n):(1===r&&oe.isXMLDoc(e)||(t=t.toLowerCase(),i=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?Ct:xt)),void 0===n?i&&"get"in i&&null!==(o=i.get(e,t))?o:(o=oe.find.attr(e,t),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(e,n,t))?o:(e.setAttribute(t,n+""),n):void oe.removeAttr(e,t)):void 0},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(ye);if(r&&1===e.nodeType)for(;n=r[o++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)?Tt&&_t||!St.test(n)?e[i]=!1:e[oe.camelCase("default-"+n)]=e[i]=!1:oe.attr(e,n,""),e.removeAttribute(_t?n:i)},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Ct={set:function(e,t,n){return t===!1?oe.removeAttr(e,n):Tt&&_t||!St.test(n)?e.setAttribute(!_t&&oe.propFix[n]||n,n):e[oe.camelCase("default-"+n)]=e[n]=!0,n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=kt[t]||oe.find.attr;kt[t]=Tt&&_t||!St.test(t)?function(e,t,i){var o,r;return i||(r=kt[t],kt[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,kt[t]=r),o}:function(e,t,n){return n?void 0:e[oe.camelCase("default-"+t)]?t.toLowerCase():null}}),Tt&&_t||(oe.attrHooks.value={set:function(e,t,n){return oe.nodeName(e,"input")?void(e.defaultValue=t):xt&&xt.set(e,t,n)}}),_t||(xt={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},kt.id=kt.name=kt.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},oe.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:xt.set},oe.attrHooks.contenteditable={set:function(e,t,n){xt.set(e,""===t?!1:t,n)}},oe.each(["width","height"],function(e,t){oe.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ne.style||(oe.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Et=/^(?:input|select|textarea|button|object)$/i,At=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Ne(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return e=oe.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,o,r,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(r=1!==s||!oe.isXMLDoc(e),r&&(t=oe.propFix[t]||t,o=oe.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}}}),ne.hrefNormalized||oe.each(["href","src"],function(e,t){oe.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ne.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),ne.enctype||(oe.propFix.enctype="encoding");var Nt=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,i,o,r,s,a=0,l=this.length,c="string"==typeof e&&e;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(ye)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Nt," "):" ")){for(r=0;o=t[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=oe.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,o,r,s,a=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(ye)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Nt," "):"")){for(r=0;o=t[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");s=e?oe.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(oe.isFunction(e)?function(n){oe(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,o=oe(this),r=e.match(ye)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===ke||"boolean"===n)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||e===!1?"":oe._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Nt," ").indexOf(t)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Lt=oe.now(),Dt=/\?/,Ot=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,o=oe.trim(t+"");return o&&!oe.trim(o.replace(Ot,function(e,t,o,r){return n&&t&&(i=0),0===i?e:(n=o||t,i+=!r-!o,"")}))?Function("return "+o)():oe.error("Invalid JSON: "+t)},oe.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),n};var Pt,Mt,It=/#.*$/,Ft=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Bt=/^\/\//,$t=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Wt={},zt={},qt="*/".concat("*");try{Mt=location.href}catch(Ut){Mt=pe.createElement("a"),Mt.href="",Mt=Mt.href}Pt=$t.exec(Mt.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt,type:"GET",isLocal:Rt.test(Pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$($(e,oe.ajaxSettings),t):$(oe.ajaxSettings,e)},ajaxPrefilter:H(Wt),ajaxTransport:H(zt),ajax:function(e,t){function n(e,t,n,i){var o,u,v,b,w,C=t;2!==y&&(y=2,a&&clearTimeout(a),c=void 0,s=i||"",x.readyState=e>0?4:0,o=e>=200&&300>e||304===e,n&&(b=W(h,x,n)),b=z(h,b,x,o),o?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(oe.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(oe.etag[r]=w)),204===e||"HEAD"===h.type?C="nocontent":304===e?C="notmodified":(C=b.state,u=b.data,v=b.error,o=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(t||C)+"",o?p.resolveWith(f,[u,C,x]):p.rejectWith(f,[x,C,v]),x.statusCode(m),m=void 0,l&&d.trigger(o?"ajaxSuccess":"ajaxError",[x,h,o?u:v]),g.fireWith(f,[x,C]),l&&(d.trigger("ajaxComplete",[x,h]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,r,s,a,l,c,u,h=oe.ajaxSetup({},t),f=h.context||h,d=h.context&&(f.nodeType||f.jquery)?oe(f):oe.event,p=oe.Deferred(),g=oe.Callbacks("once memory"),m=h.statusCode||{},v={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!u)for(u={};t=jt.exec(s);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return y||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return c&&c.abort(t),n(0,t),this}};if(p.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((e||h.url||Mt)+"").replace(It,"").replace(Bt,Pt[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=oe.trim(h.dataType||"*").toLowerCase().match(ye)||[""],null==h.crossDomain&&(i=$t.exec(h.url.toLowerCase()),h.crossDomain=!(!i||i[1]===Pt[1]&&i[2]===Pt[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Pt[3]||("http:"===Pt[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=oe.param(h.data,h.traditional)),B(Wt,h,t,x),2===y)return x;l=oe.event&&h.global,l&&0===oe.active++&&oe.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ht.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(Dt.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Ft.test(r)?r.replace(Ft,"$1_="+Lt++):r+(Dt.test(r)?"&":"?")+"_="+Lt++)),h.ifModified&&(oe.lastModified[r]&&x.setRequestHeader("If-Modified-Since",oe.lastModified[r]),oe.etag[r]&&x.setRequestHeader("If-None-Match",oe.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+qt+"; q=0.01":""):h.accepts["*"]);for(o in h.headers)x.setRequestHeader(o,h.headers[o]);if(h.beforeSend&&(h.beforeSend.call(f,x,h)===!1||2===y))return x.abort();w="abort";for(o in{success:1,error:1,complete:1})x[o](h[o]);if(c=B(zt,h,t,x)){x.readyState=1,l&&d.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},h.timeout));try{y=1,c.send(v,n)}catch(C){if(!(2>y))throw C;n(-1,C)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,i,o){return oe.isFunction(n)&&(o=o||i,i=n,n=void 0),oe.ajax({url:e,type:t,dataType:o,data:n,success:i})}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(e){if(oe.isFunction(e))return this.each(function(t){oe(this).wrapAll(e.call(this,t))});if(this[0]){var t=oe(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(oe.isFunction(e)?function(t){oe(this).wrapInner(e.call(this,t))}:function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||oe.css(e,"display"))},oe.expr.filters.visible=function(e){return!oe.expr.filters.hidden(e)};var Gt=/%20/g,Kt=/\[\]$/,Vt=/\r?\n/g,Xt=/^(?:submit|button|image|reset|file)$/i,Qt=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,i=[],o=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){o(this.name,this.value)});else for(n in e)q(n,e[n],t,o);return i.join("&").replace(Gt,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Qt.test(this.nodeName)&&!Xt.test(e)&&(this.checked||!Le.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(Vt,"\r\n")}}):{name:t.name,value:n.replace(Vt,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||G()}:U;var Yt=0,Jt={},Zt=oe.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Jt)Jt[e](void 0,!0)}),ne.cors=!!Zt&&"withCredentials"in Zt,Zt=ne.ajax=!!Zt,Zt&&oe.ajaxTransport(function(e){if(!e.crossDomain||ne.cors){var t;return{send:function(n,i){var o,r=e.xhr(),s=++Yt;if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)r[o]=e.xhrFields[o];e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(e.hasContent&&e.data||null),t=function(n,o){var a,l,c;if(t&&(o||4===r.readyState))if(delete Jt[s],t=void 0,r.onreadystatechange=oe.noop,o)4!==r.readyState&&r.abort();else{c={},a=r.status,"string"==typeof r.responseText&&(c.text=r.responseText);try{l=r.statusText}catch(u){l=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&i(a,l,c,r.getAllResponseHeaders())},e.async?4===r.readyState?setTimeout(t):r.onreadystatechange=Jt[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=pe.head||oe("head")[0]||pe.documentElement;return{send:function(i,o){t=pe.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||oe.expando+"_"+Lt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,s,a=t.jsonp!==!1&&(tn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(tn,"$1"+o):t.jsonp!==!1&&(t.url+=(Dt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||oe.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,en.push(o)),s&&oe.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||pe;var i=he.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=oe.buildFragment([e],t,o),o&&o.length&&oe(o).remove(),oe.merge([],i.childNodes))};var nn=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var i,o,r,s=this,a=e.indexOf(" ");return a>=0&&(i=oe.trim(e.slice(a,e.length)),e=e.slice(0,a)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&oe.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?oe("<div>").append(oe.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length};var on=e.document.documentElement;oe.offset={setOffset:function(e,t,n){var i,o,r,s,a,l,c,u=oe.css(e,"position"),h=oe(e),f={};"static"===u&&(e.style.position="relative"),a=h.offset(),r=oe.css(e,"top"),l=oe.css(e,"left"),c=("absolute"===u||"fixed"===u)&&oe.inArray("auto",[r,l])>-1,c?(i=h.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),oe.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+o),"using"in t?t.using.call(e,f):h.css(f)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;return r?(t=r.documentElement,oe.contains(t,o)?(typeof o.getBoundingClientRect!==ke&&(i=o.getBoundingClientRect()),n=K(r),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===oe.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(n=e.offset()),n.top+=oe.css(e[0],"borderTopWidth",!0),n.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-oe.css(i,"marginTop",!0),left:t.left-n.left-oe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||on;e&&!oe.nodeName(e,"html")&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||on})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);oe.fn[e]=function(i){return Ne(this,function(e,i,o){var r=K(e);return void 0===o?r?t in r?r[t]:r.document.documentElement[i]:e[i]:void(r?r.scrollTo(n?oe(r).scrollLeft():o,n?o:oe(r).scrollTop()):e[i]=o)},e,i,arguments.length,null)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=T(ne.pixelPosition,function(e,n){return n?(n=tt(e,t),it.test(n)?oe(e).position()[t]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){oe.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return Ne(this,function(t,n,i){var o;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?oe.css(t,n,s):oe.style(t,n,i,s)},t,r?i:void 0,r,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var rn=e.jQuery,sn=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=sn),t&&e.jQuery===oe&&(e.jQuery=rn),oe},typeof t===ke&&(e.jQuery=e.$=oe),oe}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,i){var o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,r=o.name,t.href&&r&&"map"===o.nodeName.toLowerCase()?(s=e("img[usemap='#"+r+"']")[0],!!s&&n(s)):!1):(/^(input|select|textarea|button|object)$/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),i="absolute"===n,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return i&&"static"===t.css("position")?!1:o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var i=e.attr(n,"tabindex"),o=isNaN(i);return(o||i>=0)&&t(n,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function i(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?s["inner"+n].call(this):this.each(function(){e(this).css(r,i(this,t)+"px")})},e.fn["outer"+n]=function(t,o){return"number"!=typeof t?s["outer"+n].call(this,t):this.each(function(){e(this).css(r,i(this,t,!0,o)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(i=parseInt(o.css("zIndex"),10),!isNaN(i)&&0!==i))return i;o=o.parent()}return 0}}),e.ui.plugin={add:function(t,n,i){var o,r=e.ui[t].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(e,t,n,i){var o,r=e.plugins[t];if(r&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;r.length>o;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,n)}};var i=0,o=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{i=e._data(o,"events"),i&&i.remove&&e(o).triggerHandler("remove")}catch(s){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var o,r,s,a,l={},c=t.split(".")[0];return t=t.split(".")[1],o=c+"-"+t,
i||(i=n,n=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},o=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}()):void(l[t]=i)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||t:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete r._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var n,i,r=o.call(arguments,1),s=0,a=r.length;a>s;s++)for(n in r[s])i=r[s][n],r[s].hasOwnProperty(n)&&void 0!==i&&(t[n]=e.isPlainObject(i)?e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=o.call(arguments,1),l=this;return s?this.each(function(){var n,o=e.data(this,i);return"instance"===r?(l=o,!1):o?e.isFunction(o[r])&&"_"!==r.charAt(0)?(n=o[r].apply(o,a),n!==o&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}):(a.length&&(r=e.widget.extend.apply(null,[r].concat(a))),this.each(function(){var t=e.data(this,i);t?(t.option(r||{}),t._init&&t._init()):e.data(this,i,new n(r,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;i.length-1>r;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(t=i.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,function(i,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):n.bind(c,a)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var o,r,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?n:o.effect||n:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&e.effects&&e.effects.effect[a]?i[t](o):a!==t&&i[a]?i[a](o.duration,o.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}}),e.widget;var r=!1;e(document).mouseup(function(){r=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,i=1===t.which,o="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return i&&!o&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),r=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),r=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(this.handleElement.is(t.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&e(n.activeElement).blur()}catch(i){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),o=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=e(o.containment),i=n[0],void(i&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var o=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,o))})},stop:function(t,n,i){var o=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))})},drag:function(t,n,i){e.each(i.sortables,function(){var o=!1,r=this;r.positionAbs=i.positionAbs,r.helperProportions=i.helperProportions,r.offset.click=i.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,i._parent=n.helper.parent(),r.currentItem=n.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return n.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=i.offset.click.top,r.offset.click.left=i.offset.click.left,r.offset.parent.left-=i.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=i.offset.parent.top-r.offset.parent.top,i._trigger("toSortable",t),i.dropped=r.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,r.fromOutside=i),r.currentItem&&(r._mouseDrag(t),n.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var o=e("body"),r=i.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,n,i){var o=i.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,n,i){var o=i.options;o._opacity&&e(n.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var o=i.options,r=!1,s=i.scrollParentNotHidden[0],a=i.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:t.pageY-i.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:t.pageX-i.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?r=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(r=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?r=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(r=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var o=i.options;i.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var o,r,s,a,l,c,u,h,f,d,p=i.options,g=p.snapTolerance,m=n.offset.left,v=m+i.helperProportions.width,b=n.offset.top,y=b+i.helperProportions.height;for(f=i.snapElements.length-1;f>=0;f--)l=i.snapElements[f].left-i.margins.left,c=l+i.snapElements[f].width,u=i.snapElements[f].top-i.margins.top,h=u+i.snapElements[f].height,l-g>v||m>c+g||u-g>y||b>h+g||!e.contains(i.snapElements[f].item.ownerDocument,i.snapElements[f].item)?(i.snapElements[f].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=!1):("inner"!==p.snapMode&&(o=g>=Math.abs(u-y),r=g>=Math.abs(h-b),s=g>=Math.abs(l-v),a=g>=Math.abs(c-m),o&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),d=o||r||s||a,"outer"!==p.snapMode&&(o=g>=Math.abs(u-b),r=g>=Math.abs(h-y),s=g>=Math.abs(l-m),a=g>=Math.abs(c-v),o&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[f].snapping&&(o||r||s||a||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=o||r||s||a||d)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var o,r=i.options,s=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,n,i){var o=i.options;o._zIndex&&e(n.helper).css("zIndex",o._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var i=e.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current,o=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");return n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,n){return e>=t&&t+n>e}return function(t,n,i,o){if(!n.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,a=r+t.helperProportions.width,l=s+t.helperProportions.height,c=n.offset.left,u=n.offset.top,h=c+n.proportions().width,f=u+n.proportions().height;switch(i){case"fit":return r>=c&&h>=a&&s>=u&&f>=l;case"intersect":return r+t.helperProportions.width/2>c&&h>a-t.helperProportions.width/2&&s+t.helperProportions.height/2>u&&f>l-t.helperProportions.height/2;case"pointer":return e(o.pageY,u,n.proportions().height)&&e(o.pageX,c,n.proportions().width);case"touch":return(s>=u&&f>=s||l>=u&&f>=l||u>s&&l>f)&&(r>=c&&h>=r||a>=c&&h>=a||c>r&&a>h);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i,o,r=e.ui.ddmanager.droppables[t.options.scope]||[],s=n?n.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;r.length>i;i++)if(!(r[i].options.disabled||t&&!r[i].accept.call(r[i].element[0],t.currentItem||t.element))){for(o=0;a.length>o;o++)if(a[o]===r[i].element[0]){r[i].proportions().height=0;continue e}r[i].visible="none"!==r[i].element.css("display"),r[i].visible&&("mousedown"===s&&r[i]._activate.call(r[i],n),r[i].offset=r[i].element.offset(),r[i].proportions({width:r[i].element[0].offsetWidth,height:r[i].element[0].offsetHeight
}))}},drop:function(t,n){var i=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,o,r,s=e.ui.intersect(t,this,this.options.tolerance,n),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===o}),r.length&&(i=e(r[0]).droppable("instance"),i.greedyChild="isover"===a)),i&&"isover"===a&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,n),i&&"isout"===a&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0?!0:(t[i]=1,o=t[i]>0,t[i]=0,o)},_create:function(){var t,n,i,o,r,s=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)i=e.trim(t[n]),r="ui-resizable-"+i,o=e("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:a.zIndex}),"se"===i&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(o);this._renderAxis=function(t){var n,i,o,r;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(e(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,o=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var n,i,o,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,i+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,o=this.originalMousePosition,r=this.axis,s=t.pageX-o.left||0,a=t.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),l?(n=l.apply(this,[t,s,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,i,o,r,s,a,l,c=this.options,u=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),o=i&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height,r=i?0:u.sizeDiff.width,s={width:u.helper.width()-r,height:u.helper.height()-o},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,i=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),i>r.minHeight&&(r.minHeight=i),r.maxWidth>n&&(r.maxWidth=n),r.maxHeight>o&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),s&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&c&&(e.left=a-t.minWidth),i&&c&&(e.left=a-t.maxWidth),s&&u&&(e.top=l-t.minHeight),o&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)n[t]=parseInt(i[t],10)||0,n[t]+=parseInt(o[t],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,o=this.originalPosition;return{top:o.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&n._hasScroll(o[0],"left")?0:n.sizeDiff.height,a=r?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,o,r,s,a,l=e(this).resizable("instance"),c=l.options,u=l.element,h=c.containment,f=h instanceof e?h.get(0):/parent/.test(h)?u.parent().get(0):h;f&&(l.containerElement=e(f),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(f),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=l._num(t.css("padding"+i))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(f,"left")?f.scrollWidth:r,a=l._hasScroll(f)?f.scrollHeight:o,l.parentData={element:f,left:i.left,top:i.top,width:s,height:a}))},resize:function(t){var n,i,o,r,s=e(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||t.shiftKey,h={top:0,left:0},f=s.containerElement,d=!0;f[0]!==document&&/static/.test(f.css("position"))&&(h=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-h.left),u&&(s.size.height=s.size.width/s.aspectRatio,d=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,d=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),n=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-h.left:s.offset.left-l.left)),i=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-h.top:s.offset.top-l.top)),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,u&&(s.size.height=s.size.width/s.aspectRatio,d=!1)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,u&&(s.size.width=s.size.height*s.aspectRatio,d=!1)),d||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,o=t.containerPosition,r=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(r.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(r.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,n){var i=e(this).resizable("instance"),o=i.options,r=i.originalSize,s=i.originalPosition,a={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0};e(o.alsoResize).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),o={},r=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var n=(i[t]||0)+(a[t]||0);n&&n>=0&&(o[t]=n||null)}),t.css(o)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,o=n.size,r=n.originalSize,s=n.originalPosition,a=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,h=Math.round((o.width-r.width)/c)*c,f=Math.round((o.height-r.height)/u)*u,d=r.width+h,p=r.height+f,g=i.maxWidth&&d>i.maxWidth,m=i.maxHeight&&p>i.maxHeight,v=i.minWidth&&i.minWidth>d,b=i.minHeight&&i.minHeight>p;i.grid=l,v&&(d+=c),b&&(p+=u),g&&(d-=c),m&&(p-=u),/^(se|s|e)$/.test(a)?(n.size.width=d,n.size.height=p):/^(ne)$/.test(a)?(n.size.width=d,n.size.height=p,n.position.top=s.top-f):/^(sw)$/.test(a)?(n.size.width=d,n.size.height=p,n.position.left=s.left-h):((0>=p-u||0>=d-c)&&(t=n._getPaddingPlusBorderDimensions(this)),p-u>0?(n.size.height=p,n.position.top=s.top-f):(p=u-t.height,n.size.height=p,n.position.top=s.top+r.height-p),d-c>0?(n.size.width=d,n.position.left=s.left-h):(d=c-t.width,n.size.width=d,n.position.left=s.left+r.width-d))}}),e.ui.resizable,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().addBack().each(function(){var i,o=e.data(this,"selectable-item");return o?(i=!t.metaKey&&!t.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),o.unselecting=!i,o.selecting=i,o.selected=i,i?n._trigger("selecting",t,{selecting:o.element}):n._trigger("unselecting",t,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,i=this,o=this.options,r=this.opos[0],s=this.opos[1],a=t.pageX,l=t.pageY;return r>a&&(n=a,a=r,r=n),s>l&&(n=l,l=s,s=n),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),c=!1;n&&n.element!==i.element[0]&&("touch"===o.tolerance?c=!(n.left>a||r>n.right||n.top>l||s>n.bottom):"fit"===o.tolerance&&(c=n.left>r&&a>n.right&&n.top>s&&l>n.bottom),c?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,i._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var i=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(i=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(i=e(t.target)),i&&(!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,i){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),t.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],o=i.item[0],r=this._intersectsWithPointer(i),r&&i.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>a&&l>i+c,f="y"===this.options.axis||t+u>r&&s>t+u,d=h&&f;

return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:t+this.helperProportions.width/2>r&&s>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>a&&l>o-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&n,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return i?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){a.push(this)}var i,o,r,s,a=[],l=[],c=this._connectWith();if(c&&t)for(i=c.length-1;i>=0;i--)for(r=e(c[i],this.document[0]),o=r.length-1;o>=0;o--)s=e.data(r[o],this.widgetFullName),s&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,o,r,s,a,l,c,u=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(o=e(f[n],this.document[0]),i=o.length-1;i>=0;i--)r=e.data(o[i],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(h.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(n=h.length-1;n>=0;n--)for(s=h[n][1],a=h[n][0],i=0,c=a.length;c>i;i++)l=e(a[i]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,o,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=o.outerWidth(),i.height=o.outerHeight()),r=o.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o)):"tr"===i?t._createTrPlaceholder(t.currentItem,o):"img"===i&&o.attr("src",t.currentItem.attr("src")),n||o.css("visibility","hidden"),o},update:function(e,o){(!n||i.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var i=this;t.children().each(function(){e("<td>&#160;</td>",i.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,i,o,r,s,a,l,c,u,h,f=null,d=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&e.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],d=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(o=1e4,r=null,u=f.floating||this._isFloating(this.currentItem),s=u?"left":"top",a=u?"width":"height",h=u?"clientX":"clientY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[d].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[s],c=!1,t[h]-l>this.items[i][a]/2&&(c=!0),o>Math.abs(t[h]-l)&&(o=Math.abs(t[h]-l),r=this.items[i],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],n=e(o.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(t){var n,i,o=this.options,r=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-o.grid[1]:n+o.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||o.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;o.length>i;i++)o[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,i;t=t.cloneNode(!1),n=t.href.replace(e,""),i=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(o){}try{i=decodeURIComponent(i)}catch(o){}return t.hash.length>1&&n===i}}(),_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each(function(n,o){return e(o).attr("aria-controls")===i?(t=n,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(n),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i===this.options.active?!1:i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,o),t.ctrlKey||t.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){function i(){return t>o&&(t=0),0>t&&(t=o),t}for(var o=this.tabs.length-1;-1!==e.inArray(i(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,i=this.anchors,o=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,i){var o,r,s,a=e(i).uniqueId().attr("id"),l=e(i).closest("li"),c=l.attr("aria-controls");t._isLocal(i)?(o=i.hash,s=o.substring(1),r=t.element.find(t._sanitizeSelector(o))):(s=l.attr("aria-controls")||e({}).uniqueId()[0].id,o="#"+s,r=t.element.find(o),r.length||(r=t._createPanel(s),r.insertAfter(t.panels[n-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":s,"aria-labelledby":a}),r.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),n&&(this._off(n.not(this.tabs)),this._off(i.not(this.anchors)),this._off(o.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,i=0;n=this.tabs[i];i++)t===!0||-1!==e.inArray(i,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,o=e(t.currentTarget),r=o.closest("li"),s=r[0]===i[0],a=s&&n.collapsible,l=a?e():this._getPanelForTab(r),c=i.length?this._getPanelForTab(i):e(),u={oldTab:i,oldPanel:c,newTab:a?e():r,newPanel:l};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||s&&!n.collapsible||this._trigger("beforeActivate",t,u)===!1||(n.active=a?!1:this.tabs.index(r),this.active=s?e():r,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),t),this._toggle(t,u))},_toggle:function(t,n){function i(){r.running=!1,r._trigger("activate",t,n)}function o(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&r.options.show?r._show(s,r.options.show,i):(s.show(),i())}var r=this,s=n.newPanel,a=n.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),s.length&&a.length?n.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;n!==!1&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,n){return n!==t?n:null})),this._setupDisabled(n))},disable:function(t){var n=this.options.disabled;if(n!==!0){if(void 0===t)n=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setupDisabled(n)}},load:function(t,n){t=this._getIndex(t);var i=this,o=this.tabs.eq(t),r=o.find(".ui-tabs-anchor"),s=this._getPanelForTab(o),a={tab:o,panel:s},l=function(e,t){"abort"===t&&i.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),s.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr};this._isLocal(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,n,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done(function(e,t,o){setTimeout(function(){s.html(e),i._trigger("load",n,a),l(o,t)},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})))},_ajaxSettings:function(t,n,i){var o=this;return{url:t.attr("href"),beforeSend:function(t,r){return o._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:r},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){var t={init:function(t){return this.options=e.extend({},e.noty.defaults,t),this.options.layout=this.options.custom?e.noty.layouts.inline:e.noty.layouts[this.options.layout],e.noty.themes[this.options.theme]?this.options.theme=e.noty.themes[this.options.theme]:t.themeClassName=this.options.theme,delete t.layout,delete t.theme,this.options=e.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=e.extend({},this.options,t),this._build(),this},_build:function(){var t=e('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(t.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?e(this.options.layout.parent.object).css(this.options.layout.parent.css).append(t):t,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=e("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var i=this;e.each(this.options.buttons,function(t,n){var o=e("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+t).appendTo(i.$bar.find(".noty_buttons")).bind("click",function(){e.isFunction(n.onClick)&&n.onClick.call(o,i)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),e.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):e(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),"function"===e.type(t.options.layout.css)?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(e(t.options.layout.container.selector)),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),e.inArray("click",t.options.closeWith)>-1&&t.$bar.css("cursor","pointer").one("click",function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),e.inArray("hover",t.options.closeWith)>-1&&t.$bar.one("mouseenter",function(){t.close()}),e.inArray("button",t.options.closeWith)>-1&&t.$closeButton.one("click",function(e){t.stopPropagation(e),t.close()}),-1==e.inArray("button",t.options.closeWith)&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var t=this;if(this.showing)return void t.$bar.queue(function(){t.close.apply(t)});if(!this.shown&&!this.showing){var n=[];return e.each(e.noty.queue,function(e,i){i.options.id!=t.options.id&&n.push(i)}),void(e.noty.queue=n)}t.$bar.addClass("i-am-closing-now"),t.options.callback.onClose&&t.options.callback.onClose.apply(t),t.$bar.clearQueue().stop().animate(t.options.animation.close,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t)}).promise().done(function(){t.options.modal&&(e.notyRenderer.setModalCount(-1),0==e.notyRenderer.getModalCount()&&e(".noty_modal").fadeOut("fast",function(){e(this).remove()})),e.notyRenderer.setLayoutCountFor(t,-1),0==e.notyRenderer.getLayoutCountFor(t)&&e(t.options.layout.container.selector).remove(),"undefined"!=typeof t.$bar&&null!==t.$bar&&(t.$bar.remove(),t.$bar=null,t.closed=!0),delete e.noty.store[t.options.id],t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t),t.options.dismissQueue||(e.noty.ontap=!0,e.notyRenderer.render()),t.options.maxVisible>0&&t.options.dismissQueue&&e.notyRenderer.render();

})}},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){e=e||window.event,"undefined"!=typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};e.notyRenderer={},e.notyRenderer.init=function(n){var i=Object.create(t).init(n);return i.options.killer&&e.noty.closeAll(),i.options.force?e.noty.queue.unshift(i):e.noty.queue.push(i),e.notyRenderer.render(),"object"==e.noty.returns?i:i.options.id},e.notyRenderer.render=function(){var t=e.noty.queue[0];"object"===e.type(t)?t.options.dismissQueue?t.options.maxVisible>0?e(t.options.layout.container.selector+" li").length<t.options.maxVisible&&e.notyRenderer.show(e.noty.queue.shift()):e.notyRenderer.show(e.noty.queue.shift()):e.noty.ontap&&(e.notyRenderer.show(e.noty.queue.shift()),e.noty.ontap=!1):e.noty.ontap=!0},e.notyRenderer.show=function(t){t.options.modal&&(e.notyRenderer.createModalFor(t),e.notyRenderer.setModalCount(1)),t.options.custom?0==t.options.custom.find(t.options.layout.container.selector).length?t.options.custom.append(e(t.options.layout.container.object).addClass("i-am-new")):t.options.custom.find(t.options.layout.container.selector).removeClass("i-am-new"):0==e(t.options.layout.container.selector).length?e("body").append(e(t.options.layout.container.object).addClass("i-am-new")):e(t.options.layout.container.selector).removeClass("i-am-new"),e.notyRenderer.setLayoutCountFor(t,1),t.show()},e.notyRenderer.createModalFor=function(t){0==e(".noty_modal").length&&e("<div/>").addClass("noty_modal").data("noty_modal_count",0).css(t.options.theme.modal.css).prependTo(e("body")).fadeIn("fast")},e.notyRenderer.getLayoutCountFor=function(t){return e(t.options.layout.container.selector).data("noty_layout_count")||0},e.notyRenderer.setLayoutCountFor=function(t,n){return e(t.options.layout.container.selector).data("noty_layout_count",e.notyRenderer.getLayoutCountFor(t)+n)},e.notyRenderer.getModalCount=function(){return e(".noty_modal").data("noty_modal_count")||0},e.notyRenderer.setModalCount=function(t){return e(".noty_modal").data("noty_modal_count",e.notyRenderer.getModalCount()+t)},e.fn.noty=function(t){return t.custom=e(this),e.notyRenderer.init(t)},e.noty={},e.noty.queue=[],e.noty.ontap=!0,e.noty.layouts={},e.noty.themes={},e.noty.returns="object",e.noty.store={},e.noty.get=function(t){return e.noty.store.hasOwnProperty(t)?e.noty.store[t]:!1},e.noty.close=function(t){return e.noty.get(t)?e.noty.get(t).close():!1},e.noty.setText=function(t,n){return e.noty.get(t)?e.noty.get(t).setText(n):!1},e.noty.setType=function(t,n){return e.noty.get(t)?e.noty.get(t).setType(n):!1},e.noty.clearQueue=function(){e.noty.queue=[]},e.noty.closeAll=function(){e.noty.clearQueue(),e.each(e.noty.store,function(e,t){t.close()})};var n=window.alert;e.noty.consumeAlert=function(t){window.alert=function(n){t?t.text=n:t={text:n},e.notyRenderer.init(t)}},e.noty.stopConsumeAlert=function(){window.alert=n},e.noty.defaults={layout:"bottomRight",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:250},timeout:5e3,force:!1,modal:!1,maxVisible:10,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},e(window).resize(function(){e.each(e.noty.layouts,function(t,n){n.container.style.apply(e(n.container.selector))})})}(jQuery),window.noty=function(e){return jQuery.notyRenderer.init(e)},function(e){e.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){e(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){e(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){e(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){e(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){e(this).css({position:"fixed",width:"500px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"}):e(this).animate({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"500px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){e(this).css({left:20,position:"fixed",width:"500px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){e(this).css({right:20,position:"fixed",width:"500px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){e(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){e(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){e(this).css({top:20,left:0,position:"fixed",width:"500px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"500px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){e(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){e(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var t=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).last().css({borderRadius:"0px 0px 0px 0px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({"border-top-left-radius":"0px","border-top-right-radius":"0px"}),e(t).last().css({"border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"});break;case"bottom":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({borderRadius:"0px 0px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){e(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){e(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 0px 0px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"0px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"0px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"0px 0px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#ECECEC",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#d9534f",borderColor:"#d43f3a",color:"#FFF"}),this.$message.css({fontWeight:"normal"}),this.$buttons.css({borderTop:"1px solid #d43f3a"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#ECECEC",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){var t={init:function(t){return this.options=e.extend({},e.noty.defaults,t),this.options.layout=this.options.custom?e.noty.layouts.inline:e.noty.layouts[this.options.layout],e.noty.themes[this.options.theme]?this.options.theme=e.noty.themes[this.options.theme]:t.themeClassName=this.options.theme,delete t.layout,delete t.theme,this.options=e.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=e.extend({},this.options,t),this._build(),this},_build:function(){var t=e('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(t.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?e(this.options.layout.parent.object).css(this.options.layout.parent.css).append(t):t,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=e("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var i=this;e.each(this.options.buttons,function(t,n){var o=e("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+t).appendTo(i.$bar.find(".noty_buttons")).bind("click",function(){e.isFunction(n.onClick)&&n.onClick.call(o,i)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),e.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):e(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),"function"===e.type(t.options.layout.css)?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(e(t.options.layout.container.selector)),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),e.inArray("click",t.options.closeWith)>-1&&t.$bar.css("cursor","pointer").one("click",function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),e.inArray("hover",t.options.closeWith)>-1&&t.$bar.one("mouseenter",function(){t.close()}),e.inArray("button",t.options.closeWith)>-1&&t.$closeButton.one("click",function(e){t.stopPropagation(e),t.close()}),-1==e.inArray("button",t.options.closeWith)&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var t=this;if(this.showing)return void t.$bar.queue(function(){t.close.apply(t)});if(!this.shown&&!this.showing){var n=[];return e.each(e.noty.queue,function(e,i){i.options.id!=t.options.id&&n.push(i)}),void(e.noty.queue=n)}t.$bar.addClass("i-am-closing-now"),t.options.callback.onClose&&t.options.callback.onClose.apply(t),t.$bar.clearQueue().stop().animate(t.options.animation.close,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t)}).promise().done(function(){t.options.modal&&(e.notyRenderer.setModalCount(-1),0==e.notyRenderer.getModalCount()&&e(".noty_modal").fadeOut("fast",function(){e(this).remove()})),e.notyRenderer.setLayoutCountFor(t,-1),0==e.notyRenderer.getLayoutCountFor(t)&&e(t.options.layout.container.selector).remove(),"undefined"!=typeof t.$bar&&null!==t.$bar&&(t.$bar.remove(),t.$bar=null,t.closed=!0),delete e.noty.store[t.options.id],t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t),t.options.dismissQueue||(e.noty.ontap=!0,e.notyRenderer.render()),t.options.maxVisible>0&&t.options.dismissQueue&&e.notyRenderer.render()})}},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){e=e||window.event,"undefined"!=typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};e.notyRenderer={},e.notyRenderer.init=function(n){var i=Object.create(t).init(n);return i.options.killer&&e.noty.closeAll(),i.options.force?e.noty.queue.unshift(i):e.noty.queue.push(i),e.notyRenderer.render(),"object"==e.noty.returns?i:i.options.id},e.notyRenderer.render=function(){var t=e.noty.queue[0];"object"===e.type(t)?t.options.dismissQueue?t.options.maxVisible>0?e(t.options.layout.container.selector+" li").length<t.options.maxVisible&&e.notyRenderer.show(e.noty.queue.shift()):e.notyRenderer.show(e.noty.queue.shift()):e.noty.ontap&&(e.notyRenderer.show(e.noty.queue.shift()),e.noty.ontap=!1):e.noty.ontap=!0},e.notyRenderer.show=function(t){t.options.modal&&(e.notyRenderer.createModalFor(t),e.notyRenderer.setModalCount(1)),t.options.custom?0==t.options.custom.find(t.options.layout.container.selector).length?t.options.custom.append(e(t.options.layout.container.object).addClass("i-am-new")):t.options.custom.find(t.options.layout.container.selector).removeClass("i-am-new"):0==e(t.options.layout.container.selector).length?e("body").append(e(t.options.layout.container.object).addClass("i-am-new")):e(t.options.layout.container.selector).removeClass("i-am-new"),e.notyRenderer.setLayoutCountFor(t,1),t.show()},e.notyRenderer.createModalFor=function(t){0==e(".noty_modal").length&&e("<div/>").addClass("noty_modal").data("noty_modal_count",0).css(t.options.theme.modal.css).prependTo(e("body")).fadeIn("fast")},e.notyRenderer.getLayoutCountFor=function(t){return e(t.options.layout.container.selector).data("noty_layout_count")||0},e.notyRenderer.setLayoutCountFor=function(t,n){return e(t.options.layout.container.selector).data("noty_layout_count",e.notyRenderer.getLayoutCountFor(t)+n)},e.notyRenderer.getModalCount=function(){return e(".noty_modal").data("noty_modal_count")||0},e.notyRenderer.setModalCount=function(t){return e(".noty_modal").data("noty_modal_count",e.notyRenderer.getModalCount()+t)},e.fn.noty=function(t){return t.custom=e(this),e.notyRenderer.init(t)},e.noty={},e.noty.queue=[],e.noty.ontap=!0,e.noty.layouts={},e.noty.themes={},e.noty.returns="object",e.noty.store={},e.noty.get=function(t){return e.noty.store.hasOwnProperty(t)?e.noty.store[t]:!1},e.noty.close=function(t){return e.noty.get(t)?e.noty.get(t).close():!1},e.noty.setText=function(t,n){return e.noty.get(t)?e.noty.get(t).setText(n):!1},e.noty.setType=function(t,n){return e.noty.get(t)?e.noty.get(t).setType(n):!1},e.noty.clearQueue=function(){e.noty.queue=[]},e.noty.closeAll=function(){e.noty.clearQueue(),e.each(e.noty.store,function(e,t){t.close()})};var n=window.alert;e.noty.consumeAlert=function(t){window.alert=function(n){t?t.text=n:t={text:n},e.notyRenderer.init(t)}},e.noty.stopConsumeAlert=function(){window.alert=n},e.noty.defaults={layout:"bottomRight",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:250},timeout:5e3,force:!1,modal:!1,maxVisible:10,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},e(window).resize(function(){e.each(e.noty.layouts,function(t,n){n.container.style.apply(e(n.container.selector))})})}(jQuery),window.noty=function(e){return jQuery.notyRenderer.init(e)},function(e){e.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){e(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){e(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){e(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){e(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){e(this).css({position:"fixed",width:"500px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"}):e(this).animate({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"500px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){e(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){e(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){e(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){e(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){e(this).css({top:20,left:0,position:"fixed",width:"500px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"500px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){e(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){e(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"500px"},addClass:""}}(jQuery),function(e){e.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var t=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).last().css({borderRadius:"0px 0px 0px 0px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({"border-top-left-radius":"0px","border-top-right-radius":"0px"}),e(t).last().css({"border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"});break;case"bottom":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({borderRadius:"0px 0px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#ECECEC"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){e(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){e(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 0px 0px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"0px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"0px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"0px 0px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":
case"notification":this.$bar.css({backgroundColor:"#ECECEC",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#d9534f",borderColor:"#d43f3a",color:"#FFF"}),this.$message.css({fontWeight:"normal"}),this.$buttons.css({borderTop:"1px solid #d43f3a"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#ECECEC",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery),"undefined"!=typeof module&&module.exports&&(this["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]),function(e){"use strict";function t(e,t,n){return e>=t&&n>=e}function n(e,t){return-1!==e.indexOf(t)}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function o(e){for(var t=String(e),n=t.length,i=0,o=[];n>i;){var r=t.charCodeAt(i);if(55296>r||r>57343)o.push(r);else if(r>=56320&&57343>=r)o.push(65533);else if(r>=55296&&56319>=r)if(i===n-1)o.push(65533);else{var s=t.charCodeAt(i+1);if(s>=56320&&57343>=s){var a=1023&r,l=1023&s;o.push(65536+(a<<10)+l),i+=1}else o.push(65533)}i+=1}return o}function r(e){for(var t="",n=0;n<e.length;++n){var i=e[n];65535>=i?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode((i>>10)+55296,(1023&i)+56320))}return t}function s(e){return e>=0&&127>=e}function a(e){this.tokens=[].slice.call(e),this.tokens.reverse()}function l(e,t){if(e)throw TypeError("Decoder error");return t||65533}function c(e){throw TypeError("The code point "+e+" could not be encoded.")}function u(){}function h(){}function f(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(V,e)?V[e]:null}function d(e,t){return t?t[e]||null:null}function p(e,t){var n=t.indexOf(e);return-1===n?null:n}function g(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js?");return e["encoding-indexes"][t]}function m(e){if(e>39419&&189e3>e||e>1237575)return null;if(7457===e)return 59335;var t,n=0,i=0,o=g("gb18030-ranges");for(t=0;t<o.length;++t){var r=o[t];if(!(r[0]<=e))break;n=r[0],i=r[1]}return i+e-n}function v(e){if(59335===e)return 7457;var t,n=0,i=0,o=g("gb18030-ranges");for(t=0;t<o.length;++t){var r=o[t];if(!(r[1]<=e))break;n=r[1],i=r[0]}return i+e-n}function b(e){X=X||g("jis0208").map(function(e,n){return t(n,8272,8835)?null:e});var n=X;return n.indexOf(e)}function y(e){Q=Q||g("big5").map(function(e,t){return 5024>t?null:e});var t=Q;return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):p(e,t)}function w(e,t){if(!(this instanceof w))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):Z,t=i(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=f(e);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+e);if(!J[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js?");var o=this;return o._encoding=n,Boolean(t.fatal)&&(o._error_mode="fatal"),Boolean(t.ignoreBOM)&&(o._ignoreBOM=!0),Object.defineProperty||(this.encoding=o._encoding.name.toLowerCase(),this.fatal="fatal"===o._error_mode,this.ignoreBOM=o._ignoreBOM),o}function x(t,n){if(!(this instanceof x))throw TypeError("Called as a function. Did you forget 'new'?");n=i(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";var o=this;if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){t=void 0!==t?String(t):Z;var r=f(t);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+t);if(!Y[r.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js?");o._encoding=r}else o._encoding=f("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=o._encoding.name.toLowerCase()),o}function C(e){var n=e.fatal,i=0,o=0,r=0,s=128,a=191;this.handler=function(e,c){if(c===U&&0!==r)return r=0,l(n);if(c===U)return G;if(0===r){if(t(c,0,127))return c;if(t(c,194,223))r=1,i=31&c;else if(t(c,224,239))224===c&&(s=160),237===c&&(a=159),r=2,i=15&c;else{if(!t(c,240,244))return l(n);240===c&&(s=144),244===c&&(a=143),r=3,i=7&c}return null}if(!t(c,s,a))return i=r=o=0,s=128,a=191,e.prepend(c),l(n);if(s=128,a=191,i=i<<6|63&c,o+=1,o!==r)return null;var u=i;return i=r=o=0,u}}function k(e){e.fatal;this.handler=function(e,n){if(n===U)return G;if(q(n))return n;var i,o;t(n,128,2047)?(i=1,o=192):t(n,2048,65535)?(i=2,o=224):t(n,65536,1114111)&&(i=3,o=240);for(var r=[(n>>6*i)+o];i>0;){var s=n>>6*(i-1);r.push(128|63&s),i-=1}return r}}function S(e,t){var n=t.fatal;this.handler=function(t,i){if(i===U)return G;if(s(i))return i;var o=e[i-128];return null===o?l(n):o}}function _(e,t){t.fatal;this.handler=function(t,n){if(n===U)return G;if(q(n))return n;var i=p(n,e);return null===i&&c(n),i+128}}function T(e){var n=e.fatal,i=0,o=0,r=0;this.handler=function(e,a){if(a===U&&0===i&&0===o&&0===r)return G;a!==U||0===i&&0===o&&0===r||(i=0,o=0,r=0,l(n));var c;if(0!==r){c=null,t(a,48,57)&&(c=m(10*(126*(10*(i-129)+o-48)+r-129)+a-48));var u=[o,r,a];return i=0,o=0,r=0,null===c?(e.prepend(u),l(n)):c}if(0!==o)return t(a,129,254)?(r=a,null):(e.prepend([o,a]),i=0,o=0,l(n));if(0!==i){if(t(a,48,57))return o=a,null;var h=i,f=null;i=0;var p=127>a?64:65;return(t(a,64,126)||t(a,128,254))&&(f=190*(h-129)+(a-p)),c=null===f?null:d(f,g("gb18030")),null===c&&s(a)&&e.prepend(a),null===c?l(n):c}return s(a)?a:128===a?8364:t(a,129,254)?(i=a,null):l(n)}}function E(e,t){e.fatal;this.handler=function(e,n){if(n===U)return G;if(q(n))return n;if(58853===n)return c(n);if(t&&8364===n)return 128;var i=p(n,g("gb18030"));if(null!==i){var o=z(i/190)+129,r=i%190,s=63>r?64:65;return[o,r+s]}if(t)return c(n);i=v(n);var a=z(i/10/126/10);i-=10*a*126*10;var l=z(i/10/126);i-=10*l*126;var u=z(i/10),h=i-10*u;return[a+129,l+48,u+129,h+48]}}function A(e){var n=e.fatal,i=0;this.handler=function(e,o){if(o===U&&0!==i)return i=0,l(n);if(o===U&&0===i)return G;if(0!==i){var r=i,a=null;i=0;var c=127>o?64:98;switch((t(o,64,126)||t(o,161,254))&&(a=157*(r-129)+(o-c)),a){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var u=null===a?null:d(a,g("big5"));return null===u&&s(o)&&e.prepend(o),null===u?l(n):u}return s(o)?o:t(o,129,254)?(i=o,null):l(n)}}function N(e){e.fatal;this.handler=function(e,t){if(t===U)return G;if(q(t))return t;var n=y(t);if(null===n)return c(t);var i=z(n/157)+129;if(161>i)return c(t);var o=n%157,r=63>o?64:98;return[i,o+r]}}function L(e){var n=e.fatal,i=!1,o=0;this.handler=function(e,r){if(r===U&&0!==o)return o=0,l(n);if(r===U&&0===o)return G;if(142===o&&t(r,161,223))return o=0,65216+r;if(143===o&&t(r,161,254))return i=!0,o=r,null;if(0!==o){var a=o;o=0;var c=null;return t(a,161,254)&&t(r,161,254)&&(c=d(94*(a-161)+(r-161),g(i?"jis0212":"jis0208"))),i=!1,t(r,161,254)||e.prepend(r),null===c?l(n):c}return s(r)?r:142===r||143===r||t(r,161,254)?(o=r,null):l(n)}}function D(e){e.fatal;this.handler=function(e,n){if(n===U)return G;if(q(n))return n;if(165===n)return 92;if(8254===n)return 126;if(t(n,65377,65439))return[142,n-65377+161];8722===n&&(n=65293);var i=p(n,g("jis0208"));if(null===i)return c(n);var o=z(i/94)+161,r=i%94+161;return[o,r]}}function O(e){var n=e.fatal,i={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},o=i.ASCII,r=i.ASCII,s=0,a=!1;this.handler=function(e,c){switch(o){default:case i.ASCII:return 27===c?(o=i.EscapeStart,null):t(c,0,127)&&14!==c&&15!==c&&27!==c?(a=!1,c):c===U?G:(a=!1,l(n));case i.Roman:return 27===c?(o=i.EscapeStart,null):92===c?(a=!1,165):126===c?(a=!1,8254):t(c,0,127)&&14!==c&&15!==c&&27!==c&&92!==c&&126!==c?(a=!1,c):c===U?G:(a=!1,l(n));case i.Katakana:return 27===c?(o=i.EscapeStart,null):t(c,33,95)?(a=!1,65344+c):c===U?G:(a=!1,l(n));case i.LeadByte:return 27===c?(o=i.EscapeStart,null):t(c,33,126)?(a=!1,s=c,o=i.TrailByte,null):c===U?G:(a=!1,l(n));case i.TrailByte:if(27===c)return o=i.EscapeStart,l(n);if(t(c,33,126)){o=i.LeadByte;var u=94*(s-33)+c-33,h=d(u,g("jis0208"));return null===h?l(n):h}return c===U?(o=i.LeadByte,e.prepend(c),l(n)):(o=i.LeadByte,l(n));case i.EscapeStart:return 36===c||40===c?(s=c,o=i.Escape,null):(e.prepend(c),a=!1,o=r,l(n));case i.Escape:var f=s;s=0;var p=null;if(40===f&&66===c&&(p=i.ASCII),40===f&&74===c&&(p=i.Roman),40===f&&73===c&&(p=i.Katakana),36!==f||64!==c&&66!==c||(p=i.LeadByte),null!==p){o=o=p;var m=a;return a=!0,m?l(n):null}return e.prepend([f,c]),a=!1,o=r,l(n)}}}function P(e){var t=(e.fatal,{ASCII:0,Roman:1,jis0208:2}),n=t.ASCII;this.handler=function(e,i){if(i===U&&n!==t.ASCII)return e.prepend(i),n=t.ASCII,[27,40,66];if(i===U&&n===t.ASCII)return G;if(!(n!==t.ASCII&&n!==t.Roman||14!==i&&15!==i&&27!==i))return c(65533);if(n===t.ASCII&&q(i))return i;if(n===t.Roman&&(q(i)&&92!==i&&126!==i||165==i||8254==i)){if(q(i))return i;if(165===i)return 92;if(8254===i)return 126}if(q(i)&&n!==t.ASCII)return e.prepend(i),n=t.ASCII,[27,40,66];if((165===i||8254===i)&&n!==t.Roman)return e.prepend(i),n=t.Roman,[27,40,74];8722===i&&(i=65293);var o=p(i,g("jis0208"));if(null===o)return c(i);if(n!==t.jis0208)return e.prepend(i),n=t.jis0208,[27,36,66];var r=z(o/94)+33,s=o%94+33;return[r,s]}}function M(e){var n=e.fatal,i=0;this.handler=function(e,o){if(o===U&&0!==i)return i=0,l(n);if(o===U&&0===i)return G;if(0!==i){var r=i,a=null;i=0;var c=127>o?64:65,u=160>r?129:193;if((t(o,64,126)||t(o,128,252))&&(a=188*(r-u)+o-c),t(a,8836,10715))return 48508+a;var h=null===a?null:d(a,g("jis0208"));return null===h&&s(o)&&e.prepend(o),null===h?l(n):h}return s(o)||128===o?o:t(o,161,223)?65216+o:t(o,129,159)||t(o,224,252)?(i=o,null):l(n)}}function I(e){e.fatal;this.handler=function(e,n){if(n===U)return G;if(q(n)||128===n)return n;if(165===n)return 92;if(8254===n)return 126;if(t(n,65377,65439))return n-65377+161;8722===n&&(n=65293);var i=b(n);if(null===i)return c(n);var o=z(i/188),r=31>o?129:193,s=i%188,a=63>s?64:65;return[o+r,s+a]}}function F(e){var n=e.fatal,i=0;this.handler=function(e,o){if(o===U&&0!==i)return i=0,l(n);if(o===U&&0===i)return G;if(0!==i){var r=i,a=null;i=0,t(o,65,254)&&(a=190*(r-129)+(o-65));var c=null===a?null:d(a,g("euc-kr"));return null===a&&s(o)&&e.prepend(o),null===c?l(n):c}return s(o)?o:t(o,129,254)?(i=o,null):l(n)}}function j(e){e.fatal;this.handler=function(e,t){if(t===U)return G;if(q(t))return t;var n=p(t,g("euc-kr"));if(null===n)return c(t);var i=z(n/190)+129,o=n%190+65;return[i,o]}}function R(e,t){var n=e>>8,i=255&e;return t?[n,i]:[i,n]}function H(e,n){var i=n.fatal,o=null,r=null;this.handler=function(n,s){if(s===U&&(null!==o||null!==r))return l(i);if(s===U&&null===o&&null===r)return G;if(null===o)return o=s,null;var a;if(a=e?(o<<8)+s:(s<<8)+o,o=null,null!==r){var c=r;return r=null,t(a,56320,57343)?65536+1024*(c-55296)+(a-56320):(n.prepend(R(a,e)),l(i))}return t(a,55296,56319)?(r=a,null):t(a,56320,57343)?l(i):a}}function B(e,n){n.fatal;this.handler=function(n,i){if(i===U)return G;if(t(i,0,65535))return R(i,e);var o=R((i-65536>>10)+55296,e),r=R((i-65536&1023)+56320,e);return o.concat(r)}}function $(e){e.fatal;this.handler=function(e,t){return t===U?G:s(t)?t:63360+t-128}}function W(e){e.fatal;this.handler=function(e,n){return n===U?G:q(n)?n:t(n,63360,63487)?n-63360+128:c(n)}}var z=Math.floor,q=s,U=-1;a.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():U},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var G=-1;u.prototype={handler:function(){}},h.prototype={handler:function(){}};var K=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],V={};K.forEach(function(e){e.encodings.forEach(function(e){e.labels.forEach(function(t){V[t]=e})})});var X,Q,Y={},J={},Z="utf-8";Object.defineProperty&&(Object.defineProperty(w.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(w.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(w.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),w.prototype.decode=function(e,t){function o(e){return!n(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)||this._ignoreBOM||this._BOMseen||(e.length>0&&65279===e[0]?(this._BOMseen=!0,e.shift()):e.length>0&&(this._BOMseen=!0)),r(e)}var s;s="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._do_not_flush||(this._decoder=J[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var l,c=new a(s),u=[];;){var h=c.read();if(h===U)break;if(l=this._decoder.handler(c,h),l===G)break;null!==l&&(Array.isArray(l)?u.push.apply(u,l):u.push(l))}if(!this._do_not_flush){do{if(l=this._decoder.handler(c,c.read()),l===G)break;null!==l&&(Array.isArray(l)?u.push.apply(u,l):u.push(l))}while(!c.endOfStream());this._decoder=null}return o.call(this,u)},Object.defineProperty&&Object.defineProperty(x.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),x.prototype.encode=function(e,t){e=e?String(e):"",t=i(t),this._do_not_flush||(this._encoder=Y[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var n,r=new a(o(e)),s=[];;){var l=r.read();if(l===U)break;if(n=this._encoder.handler(r,l),n===G)break;Array.isArray(n)?s.push.apply(s,n):s.push(n)}if(!this._do_not_flush){for(;;){if(n=this._encoder.handler(r,r.read()),n===G)break;Array.isArray(n)?s.push.apply(s,n):s.push(n)}this._encoder=null}return new Uint8Array(s)},Y["UTF-8"]=function(e){return new k(e)},J["UTF-8"]=function(e){return new C(e)},function(){"encoding-indexes"in e&&K.forEach(function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach(function(e){var t=e.name,n=g(t.toLowerCase());J[t]=function(e){return new S(n,e)},Y[t]=function(e){return new _(n,e)}})})}(),J.GBK=function(e){return new T(e)},Y.GBK=function(e){return new E(e,!0)},Y.gb18030=function(e){return new E(e)},J.gb18030=function(e){return new T(e)},Y.Big5=function(e){return new N(e)},J.Big5=function(e){return new A(e)},Y["EUC-JP"]=function(e){return new D(e)},J["EUC-JP"]=function(e){return new L(e)},Y["ISO-2022-JP"]=function(e){return new P(e)},J["ISO-2022-JP"]=function(e){return new O(e)},Y.Shift_JIS=function(e){return new I(e)},J.Shift_JIS=function(e){return new M(e)},Y["EUC-KR"]=function(e){return new j(e)},J["EUC-KR"]=function(e){return new F(e)},Y["UTF-16BE"]=function(e){return new B(!0,e)},J["UTF-16BE"]=function(e){return new H(!0,e)},Y["UTF-16LE"]=function(e){return new B(!1,e)},J["UTF-16LE"]=function(e){return new H(!1,e)},Y["x-user-defined"]=function(e){return new W(e)},J["x-user-defined"]=function(e){return new $(e)},e.TextEncoder||(e.TextEncoder=x),e.TextDecoder||(e.TextDecoder=w),"undefined"!=typeof module&&module.exports&&(module.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})}(this);var Typo=function(e,t,n,i){if(i=i||{},this.platform=i.platform||"chrome",this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=i.flags||{},e){if(this.dictionary=e,"chrome"==this.platform)t||(t=this._readFile(chrome.extension.getURL("lib/typo/dictionaries/"+e+"/"+e+".aff"))),n||(n=this._readFile(chrome.extension.getURL("lib/typo/dictionaries/"+e+"/"+e+".dic")));else{var o=i.dictionaryPath||"";t||(t=this._readFile(o+"/"+e+"/"+e+".aff")),n||(n=this._readFile(o+"/"+e+"/"+e+".dic"))}this.rules=this._parseAFF(t),this.compoundRuleCodes={};for(var r=0,s=this.compoundRules.length;s>r;r++)for(var a=this.compoundRules[r],l=0,c=a.length;c>l;l++)this.compoundRuleCodes[a[l]]=[];"ONLYINCOMPOUND"in this.flags&&(this.compoundRuleCodes[this.flags.ONLYINCOMPOUND]=[]),this.dictionaryTable=this._parseDIC(n);for(var r in this.compoundRuleCodes)0==this.compoundRuleCodes[r].length&&delete this.compoundRuleCodes[r];for(var r=0,s=this.compoundRules.length;s>r;r++){for(var u=this.compoundRules[r],h="",l=0,c=u.length;c>l;l++){var f=u[l];h+=f in this.compoundRuleCodes?"("+this.compoundRuleCodes[f].join("|")+")":f}this.compoundRules[r]=new RegExp(h,"i")}}return this};if(Typo.prototype={load:function(e){for(var t in e)this[t]=e[t];return this},_readFile:function(e,t){t||(t="ISO8859-1");var n=new XMLHttpRequest;return n.open("GET",e,!1),n.overrideMimeType&&n.overrideMimeType("text/plain; charset="+t),n.send(null),n.responseText},_parseAFF:function(e){var t={};e=this._removeAffixComments(e);for(var n=e.split("\n"),i=0,o=n.length;o>i;i++){var r=n[i],s=r.split(/\s+/),a=s[0];if("PFX"==a||"SFX"==a){for(var l=s[1],c=s[2],u=parseInt(s[3],10),h=[],f=i+1,d=i+1+u;d>f;f++){var r=n[f],p=r.split(/\s+/),g=p[2],m=p[3].split("/"),v=m[0];"0"===v&&(v="");var b=this.parseRuleCodes(m[1]),y=p[4],w={};w.add=v,b.length>0&&(w.continuationClasses=b),"."!==y&&(w.match=new RegExp("SFX"===a?y+"$":"^"+y)),"0"!=g&&(w.remove="SFX"===a?new RegExp(g+"$"):g),h.push(w)}t[l]={type:a,combineable:"Y"==c,entries:h},i+=u}else if("COMPOUNDRULE"===a){for(var u=parseInt(s[1],10),f=i+1,d=i+1+u;d>f;f++){var r=n[f],p=r.split(/\s+/);this.compoundRules.push(p[1])}i+=u}else if("REP"===a){var p=r.split(/\s+/);3===p.length&&this.replacementTable.push([p[1],p[2]])}else this.flags[a]=s[1]}return t},_removeAffixComments:function(e){return e=e.replace(/#.*$/gm,""),e=e.replace(/^\s\s*/m,"").replace(/\s\s*$/m,""),e=e.replace(/\n{2,}/g,"\n"),e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){function t(e,t){e in i&&"object"==typeof i[e]||(i[e]=[]),i[e].push(t)}e=this._removeDicComments(e);for(var n=e.split("\n"),i={},o=1,r=n.length;r>o;o++){var s=n[o],a=s.split("/",2),l=a[0];if(a.length>1){var c=this.parseRuleCodes(a[1]);"NEEDAFFIX"in this.flags&&-1!=c.indexOf(this.flags.NEEDAFFIX)||t(l,c);for(var u=0,h=c.length;h>u;u++){var f=c[u],d=this.rules[f];if(d)for(var p=this._applyRule(l,d),g=0,m=p.length;m>g;g++){var v=p[g];if(t(v,[]),d.combineable)for(var b=u+1;h>b;b++){var y=c[b],w=this.rules[y];if(w&&w.combineable&&d.type!=w.type)for(var x=this._applyRule(v,w),C=0,k=x.length;k>C;C++){var S=x[C];t(S,[])}}}f in this.compoundRuleCodes&&this.compoundRuleCodes[f].push(l)}}else t(l,[])}return i},_removeDicComments:function(e){return e=e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"===this.flags.FLAG){for(var t=[],n=0,i=e.length;i>n;n+=2)t.push(e.substr(n,2));return t}return"num"===this.flags.FLAG?textCode.split(","):void 0},_applyRule:function(e,t){for(var n=t.entries,i=[],o=0,r=n.length;r>o;o++){var s=n[o];if(!s.match||e.match(s.match)){var a=e;if(s.remove&&(a=a.replace(s.remove,"")),"SFX"===t.type?a+=s.add:a=s.add+a,i.push(a),"continuationClasses"in s)for(var l=0,c=s.continuationClasses.length;c>l;l++){var u=this.rules[s.continuationClasses[l]];u&&(i=i.concat(this._applyRule(a,u)))}}}return i},check:function(e){var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}var i=t.toLowerCase();if(i!==t){if(this.hasFlag(i,"KEEPCASE"))return!1;if(this.checkExact(i))return!0}return!1},checkExact:function(e){var t=this.dictionaryTable[e];if("undefined"==typeof t){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(var n=0,i=this.compoundRules.length;i>n;n++)if(e.match(this.compoundRules[n]))return!0;return!1}for(var n=0,i=t.length;i>n;n++)if(!this.hasFlag(e,"ONLYINCOMPOUND",t[n]))return!0;return!1},hasFlag:function(e,t,n){if(t in this.flags){if("undefined"==typeof n)var n=Array.prototype.concat.apply([],this.dictionaryTable[e]);if(n&&-1!==n.indexOf(this.flags[t]))return!0}return!1},alphabet:"",suggest:function(e,t,n){function i(e,t){for(var n=4,i=[],o=[],r=[],s=function(){for(var e=0;n>e;++e)if(!r[e])return;t(i)},a=0;n>a;++a){var l=new Worker("lib/typo/wordprocessor.js");l.addEventListener("message",function(e){return function(t){i=i.concat(t.data),r[e]=!0,this.terminate(),s()}}(a)),o.push(l),r.push(!1)}for(var c=e.length/n,a=0;n>a;++a)o[a].postMessage(a!=n-1?e.slice(c*a,c*(a+1)):e.slice(c*a))}function o(e){for(var t=[],n=0;n<e.length;n++)u.check(e[n])&&t.push(e[n]);return t}function r(e,n){i([e],function(e){i(e,function(i){function r(e,t){return e[1]<t[1]?-1:1}for(var s=o(e).concat(o(i)),a={},l=0,c=s.length;c>l;l++)s[l]in a?a[s[l]]+=1:a[s[l]]=1;var h=[];for(var l in a)h.push([l,a[l]]);h.sort(r).reverse();for(var f=[],l=0,c=Math.min(t,h.length);c>l;l++)u.hasFlag(h[l][0],"NOSUGGEST")||f.push(h[l][0]);n(f)})})}if(t||(t=5),this.check(e))return void n([]);for(var s=0,a=this.replacementTable.length;a>s;s++){var l=this.replacementTable[s];if(-1!==e.indexOf(l[0])){var c=e.replace(l[0],l[1]);if(this.check(c))return void n([c])}}var u=this;u.alphabet="abcdefghijklmnopqrstuvwxyz",r(e,function(e){n(e)})}},!function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);(this||window).CodeMirror=e()}}(function(){"use strict";function e(n,i){if(!(this instanceof e))return new e(n,i);this.options=i=i?Ro(i):{},Ro(Zr,i,!1),d(i);var o=i.value;"string"==typeof o&&(o=new ks(o,i.mode,null,i.lineSeparator)),this.doc=o;var r=new e.inputStyles[i.inputStyle](this),s=this.display=new t(n,o,r);s.wrapper.CodeMirror=this,c(this),a(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),i.autofocus&&!Nr&&s.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Do,keySeq:null,specialChars:null};var l=this;yr&&11>wr&&setTimeout(function(){l.display.input.reset(!0)},20),Wt(this),Qo(),wt(this),this.curOp.forceUpdate=!0,Qi(this,o),i.autofocus&&!Nr||l.hasFocus()?setTimeout(Ho(vn,this),20):bn(this);for(var u in es)es.hasOwnProperty(u)&&es[u](this,i[u],ts);C(this),i.finishInit&&i.finishInit(this);for(var h=0;h<rs.length;++h)rs[h](this);Ct(this),xr&&i.lineWrapping&&"optimizelegibility"==getComputedStyle(s.lineDiv).textRendering&&(s.lineDiv.style.textRendering="auto")}function t(e,t,n){var i=this;this.input=n,i.scrollbarFiller=zo("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=zo("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=zo("div",null,"CodeMirror-code"),i.selectionDiv=zo("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=zo("div",null,"CodeMirror-cursors"),i.measure=zo("div",null,"CodeMirror-measure"),i.lineMeasure=zo("div",null,"CodeMirror-measure"),i.lineSpace=zo("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=zo("div",[zo("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=zo("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=zo("div",null,null,"position: absolute; height: "+Ms+"px; width: 1px;"),i.gutters=zo("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=zo("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=zo("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),yr&&8>wr&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),xr||mr&&Nr||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),i(t)}function i(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,He(e,100),e.state.modeGen++,e.curOp&&It(e)}function o(e){e.options.lineWrapping?(Ys(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Qs(e.display.wrapper,"CodeMirror-wrap"),f(e)),s(e),It(e),at(e),setTimeout(function(){b(e)},100)}function r(e){var t=bt(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/yt(e.display)-3);return function(o){if(Ci(e.doc,o))return 0;var r=0;if(o.widgets)for(var s=0;s<o.widgets.length;s++)o.widgets[s].height&&(r+=o.widgets[s].height);return n?r+(Math.ceil(o.text.length/i)||1)*t:r+t}}function s(e){var t=e.doc,n=r(e);t.iter(function(e){var t=n(e);t!=e.height&&eo(e,t)})}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),at(e)}function l(e){c(e),It(e),setTimeout(function(){x(e)},20)}function c(e){var t=e.display.gutters,n=e.options.gutters;qo(t);for(var i=0;i<n.length;++i){var o=n[i],r=t.appendChild(zo("div",null,"CodeMirror-gutter "+o));"CodeMirror-linenumbers"==o&&(e.display.lineGutter=r,r.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none",u(e)}function u(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function h(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=gi(i);){var o=t.find(0,!0);i=o.from.line,n+=o.from.ch-o.to.ch}for(i=e;t=mi(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,i=o.to.line,n+=i.text.length-o.to.ch}return n}function f(e){var t=e.display,n=e.doc;t.maxLine=Yi(n,n.first),t.maxLineLength=h(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=h(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function d(e){var t=Mo(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function p(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+qe(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Ge(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function g(e,t,n){this.cm=n;var i=this.vert=zo("div",[zo("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=zo("div",[zo("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(o),Ns(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),Ns(o,"scroll",function(){
o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,yr&&8>wr&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function m(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Qs(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Ns(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?rn(t,e):on(t,e)},t),t.display.scrollbars.addClass&&Ys(t.display.wrapper,t.display.scrollbars.addClass)}function b(e,t){t||(t=p(e));var n=e.display.barWidth,i=e.display.barHeight;y(e,t);for(var o=0;4>o&&n!=e.display.barWidth||i!=e.display.barHeight;o++)n!=e.display.barWidth&&e.options.lineWrapping&&D(e),y(e,p(e)),n=e.display.barWidth,i=e.display.barHeight}function y(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function w(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-ze(e));var o=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,r=no(t,i),s=no(t,o);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;r>a?(r=a,s=no(t,io(Yi(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(r=no(t,io(Yi(t,l))-e.wrapper.clientHeight),s=l)}return{from:r,to:Math.max(s,r+1)}}function x(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=S(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,r=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&n[s].gutter&&(n[s].gutter.style.left=r);var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=r}e.options.fixedGutter&&(t.gutters.style.left=i+o+"px")}}function C(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=k(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var o=i.measure.appendChild(zo("div",[zo("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),r=o.firstChild.offsetWidth,s=o.offsetWidth-r;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(r,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",u(e),!0}return!1}function k(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function S(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function _(e,t,n){var i=e.display;this.viewport=t,this.visible=w(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Ke(e),this.force=n,this.dims=P(e),this.events=[]}function T(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ge(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ge(e)+"px",t.scrollbarsClipped=!0)}function E(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return jt(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==$t(e))return!1;C(e)&&(jt(e),t.dims=P(e));var o=i.first+i.size,r=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(o,t.visible.to+e.options.viewportMargin);n.viewFrom<r&&r-n.viewFrom<20&&(r=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(o,n.viewTo)),Fr&&(r=wi(e.doc,r),s=xi(e.doc,s));var a=r!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Bt(e,r,s),n.viewOffset=io(Yi(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=$t(e);if(!a&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Go();return l>4&&(n.lineDiv.style.display="none"),M(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,c&&Go()!=c&&c.offsetHeight&&c.focus(),qo(n.cursorDiv),qo(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,He(e,400)),n.updateLineNumbers=null,!0}function A(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Ke(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+qe(e.display)-Ve(e),n.top)}),t.visible=w(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&E(e,t);i=!1){D(e);var o=p(e);Me(e),L(e,o),b(e,o)}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function N(e,t){var n=new _(e,t);if(E(e,n)){D(e),A(e,n);var i=p(e);Me(e),L(e,i),b(e,i),n.finish()}}function L(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight+e.display.barHeight+Ge(e),t.clientHeight)+"px"}function D(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var o,r=t.view[i];if(!r.hidden){if(yr&&8>wr){var s=r.node.offsetTop+r.node.offsetHeight;o=s-n,n=s}else{var a=r.node.getBoundingClientRect();o=a.bottom-a.top}var l=r.line.height-o;if(2>o&&(o=bt(t)),(l>.001||-.001>l)&&(eo(r.line,o),O(r.line),r.rest))for(var c=0;c<r.rest.length;c++)O(r.rest[c])}}}function O(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function P(e){for(var t=e.display,n={},i={},o=t.gutters.clientLeft,r=t.gutters.firstChild,s=0;r;r=r.nextSibling,++s)n[e.options.gutters[s]]=r.offsetLeft+r.clientLeft+o,i[e.options.gutters[s]]=r.clientWidth;return{fixedPos:S(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function M(e,t,n){function i(t){var n=t.nextSibling;return xr&&Lr&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var o=e.display,r=e.options.lineNumbers,s=o.lineDiv,a=s.firstChild,l=o.view,c=o.viewFrom,u=0;u<l.length;u++){var h=l[u];if(h.hidden);else if(h.node&&h.node.parentNode==s){for(;a!=h.node;)a=i(a);var f=r&&null!=t&&c>=t&&h.lineNumber;h.changes&&(Mo(h.changes,"gutter")>-1&&(f=!1),I(e,h,c,n)),f&&(qo(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(k(e.options,c)))),a=h.node.nextSibling}else{var d=z(e,h,c,n);s.insertBefore(d,a)}c+=h.size}for(;a;)a=i(a)}function I(e,t,n,i){for(var o=0;o<t.changes.length;o++){var r=t.changes[o];"text"==r?H(e,t):"gutter"==r?$(e,t,n,i):"class"==r?B(t):"widget"==r&&W(e,t,i)}t.changes=null}function F(e){return e.node==e.text&&(e.node=zo("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),yr&&8>wr&&(e.node.style.zIndex=2)),e.node}function j(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=F(e);e.background=n.insertBefore(zo("div",null,t),n.firstChild)}}function R(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Ri(e,t)}function H(e,t){var n=t.text.className,i=R(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,B(t)):n&&(t.text.className=n)}function B(e){j(e),e.line.wrapClass?F(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function $(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=F(t);t.gutterBackground=zo("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),o.insertBefore(t.gutterBackground,t.text)}var r=t.line.gutterMarkers;if(e.options.lineNumbers||r){var o=F(t),s=t.gutter=zo("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),o.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(zo("div",k(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),r)for(var a=0;a<e.options.gutters.length;++a){var l=e.options.gutters[a],c=r.hasOwnProperty(l)&&r[l];c&&s.appendChild(zo("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function W(e,t,n){t.alignable&&(t.alignable=null);for(var i,o=t.node.firstChild;o;o=i){var i=o.nextSibling;"CodeMirror-linewidget"==o.className&&t.node.removeChild(o)}q(e,t,n)}function z(e,t,n,i){var o=R(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),B(t),$(e,t,n,i),q(e,t,i),t.node}function q(e,t,n){if(U(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)U(e,t.rest[i],t,n,!1)}function U(e,t,n,i,o){if(t.widgets)for(var r=F(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=zo("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),G(l,c,n,i),e.display.input.setUneditable(c),o&&l.above?r.insertBefore(c,n.gutter||n.text):r.appendChild(c),_o(l,"redraw")}}function G(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var o=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(o-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function K(e){return jr(e.line,e.ch)}function V(e,t){return Rr(e,t)<0?t:e}function X(e,t){return Rr(e,t)<0?e:t}function Q(e){e.state.focused||(e.display.input.focus(),vn(e))}function Y(e,t,n,i,o){var r=e.doc;e.display.shift=!1,i||(i=r.sel);var s=e.state.pasteIncoming||"paste"==o,a=r.splitLines(t),l=null;if(s&&i.ranges.length>1)if(Hr&&Hr.join("\n")==t){if(i.ranges.length%Hr.length==0){l=[];for(var c=0;c<Hr.length;c++)l.push(r.splitLines(Hr[c]))}}else a.length==i.ranges.length&&(l=Io(a,function(e){return[e]}));for(var c=i.ranges.length-1;c>=0;c--){var u=i.ranges[c],h=u.from(),f=u.to();u.empty()&&(n&&n>0?h=jr(h.line,h.ch-n):e.state.overwrite&&!s&&(f=jr(f.line,Math.min(Yi(r,f.line).text.length,f.ch+Po(a).length))));var d=e.curOp.updateInput,p={from:h,to:f,text:l?l[c%l.length]:a,origin:o||(s?"paste":e.state.cutIncoming?"cut":"+input")};Tn(e.doc,p),_o(e,"inputRead",e,p)}t&&!s&&Z(e,t),Rn(e),e.curOp.updateInput=d,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function J(e,t){var n=e.clipboardData&&e.clipboardData.getData("text/plain");return n?(e.preventDefault(),t.isReadOnly()||t.options.disableInput||Nt(t,function(){Y(t,n,0,null,"paste")}),!0):void 0}function Z(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var o=n.ranges[i];if(!(o.head.ch>100||i&&n.ranges[i-1].head.line==o.head.line)){var r=e.getModeAt(o.head),s=!1;if(r.electricChars){for(var a=0;a<r.electricChars.length;a++)if(t.indexOf(r.electricChars.charAt(a))>-1){s=Bn(e,o.head.line,"smart");break}}else r.electricInput&&r.electricInput.test(Yi(e.doc,o.head.line).text.slice(0,o.head.ch))&&(s=Bn(e,o.head.line,"smart"));s&&_o(e,"electricInput",e,o.head.line)}}}function ee(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var o=e.doc.sel.ranges[i].head.line,r={anchor:jr(o,0),head:jr(o+1,0)};n.push(r),t.push(e.getRange(r.anchor,r.head))}return{text:t,ranges:n}}function te(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function ne(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Do,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function ie(){var e=zo("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=zo("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return xr?e.style.width="1000px":e.setAttribute("wrap","off"),Ar&&(e.style.border="1px solid black"),te(e),t}function oe(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Do,this.gracePeriod=!1}function re(e,t){var n=Ze(e,t.line);if(!n||n.hidden)return null;var i=Yi(e.doc,t.line),o=Qe(n,i,t.line),r=oo(i),s="left";if(r){var a=ur(r,t.ch);s=a%2?"right":"left"}var l=nt(o.map,t.ch,s);return l.offset="right"==l.collapse?l.end:l.start,l}function se(e,t){return t&&(e.bad=!0),e}function ae(e,t,n){var i;if(t==e.display.lineDiv){if(i=e.display.lineDiv.childNodes[n],!i)return se(e.clipPos(jr(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var r=e.display.view[o];if(r.node==i)return le(r,t,n)}}function le(e,t,n){function i(t,n,i){for(var o=-1;o<(u?u.length:0);o++)for(var r=0>o?c.map:u[o],s=0;s<r.length;s+=3){var a=r[s+2];if(a==t||a==n){var l=to(0>o?e.line:e.rest[o]),h=r[s]+i;return(0>i||a!=t)&&(h=r[s+(i?1:0)]),jr(l,h)}}}var o=e.text.firstChild,r=!1;if(!t||!Ks(o,t))return se(jr(to(e.line),0),!0);if(t==o&&(r=!0,t=o.childNodes[n],n=0,!t)){var s=e.rest?Po(e.rest):e.line;return se(jr(to(s),s.text.length),r)}var a=3==t.nodeType?t:null,l=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));l.parentNode!=o;)l=l.parentNode;var c=e.measure,u=c.maps,h=i(a,l,n);if(h)return se(h,r);for(var f=l.nextSibling,d=a?a.nodeValue.length-n:0;f;f=f.nextSibling){if(h=i(f,f.firstChild,0))return se(jr(h.line,h.ch-d),r);d+=f.textContent.length}for(var p=l.previousSibling,d=n;p;p=p.previousSibling){if(h=i(p,p.firstChild,-1))return se(jr(h.line,h.ch+d),r);d+=f.textContent.length}}function ce(e,t,n,i,o){function r(e){return function(t){return t.id==e}}function s(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return""==n&&(n=t.textContent.replace(/\u200b/g,"")),void(a+=n);var u,h=t.getAttribute("cm-marker");if(h){var f=e.findMarks(jr(i,0),jr(o+1,0),r(+h));return void(f.length&&(u=f[0].find())&&(a+=Ji(e.doc,u.from,u.to).join(c)))}if("false"==t.getAttribute("contenteditable"))return;for(var d=0;d<t.childNodes.length;d++)s(t.childNodes[d]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var p=t.nodeValue;if(!p)return;l&&(a+=c,l=!1),a+=p}}for(var a="",l=!1,c=e.doc.lineSeparator();s(t),t!=n;)t=t.nextSibling;return a}function ue(e,t){this.ranges=e,this.primIndex=t}function he(e,t){this.anchor=e,this.head=t}function fe(e,t){var n=e[t];e.sort(function(e,t){return Rr(e.from(),t.from())}),t=Mo(e,n);for(var i=1;i<e.length;i++){var o=e[i],r=e[i-1];if(Rr(r.to(),o.from())>=0){var s=X(r.from(),o.from()),a=V(r.to(),o.to()),l=r.empty()?o.from()==o.head:r.from()==r.head;t>=i&&--t,e.splice(--i,2,new he(l?a:s,l?s:a))}}return new ue(e,t)}function de(e,t){return new ue([new he(e,t||e)],0)}function pe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ge(e,t){if(t.line<e.first)return jr(e.first,0);var n=e.first+e.size-1;return t.line>n?jr(n,Yi(e,n).text.length):me(t,Yi(e,t.line).text.length)}function me(e,t){var n=e.ch;return null==n||n>t?jr(e.line,t):0>n?jr(e.line,0):e}function ve(e,t){return t>=e.first&&t<e.first+e.size}function be(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=ge(e,t[i]);return n}function ye(e,t,n,i){if(e.cm&&e.cm.display.shift||e.extend){var o=t.anchor;if(i){var r=Rr(n,o)<0;r!=Rr(i,o)<0?(o=n,n=i):r!=Rr(n,i)<0&&(n=i)}return new he(o,n)}return new he(i||n,n)}function we(e,t,n,i){Te(e,new ue([ye(e,e.sel.primary(),t,n)],0),i)}function xe(e,t,n){for(var i=[],o=0;o<e.sel.ranges.length;o++)i[o]=ye(e,e.sel.ranges[o],t[o],null);var r=fe(i,e.sel.primIndex);Te(e,r,n)}function Ce(e,t,n,i){var o=e.sel.ranges.slice(0);o[t]=n,Te(e,fe(o,e.sel.primIndex),i)}function ke(e,t,n,i){Te(e,de(t,n),i)}function Se(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new he(ge(e,t[n].anchor),ge(e,t[n].head))},origin:n&&n.origin};return Os(e,"beforeSelectionChange",e,i),e.cm&&Os(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?fe(i.ranges,i.ranges.length-1):t}function _e(e,t,n){var i=e.history.done,o=Po(i);o&&o.ranges?(i[i.length-1]=t,Ee(e,t,n)):Te(e,t,n)}function Te(e,t,n){Ee(e,t,n),ho(e,e.sel,e.cm?e.cm.curOp.id:0/0,n)}function Ee(e,t,n){(No(e,"beforeSelectionChange")||e.cm&&No(e.cm,"beforeSelectionChange"))&&(t=Se(e,t,n));var i=n&&n.bias||(Rr(t.primary().head,e.sel.primary().head)<0?-1:1);Ae(e,Le(e,t,i,!0)),n&&n.scroll===!1||!e.cm||Rn(e.cm)}function Ae(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Ao(e.cm)),_o(e,"cursorActivity",e))}function Ne(e){Ae(e,Le(e,e.sel,null,!1),Fs)}function Le(e,t,n,i){for(var o,r=0;r<t.ranges.length;r++){var s=t.ranges[r],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[r],l=Oe(e,s.anchor,a&&a.anchor,n,i),c=Oe(e,s.head,a&&a.head,n,i);(o||l!=s.anchor||c!=s.head)&&(o||(o=t.ranges.slice(0,r)),o[r]=new he(l,c))}return o?fe(o,t.primIndex):t}function De(e,t,n,i,o){var r=Yi(e,t.line);if(r.markedSpans)for(var s=0;s<r.markedSpans.length;++s){var a=r.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(l.inclusiveRight?a.to>=t.ch:a.to>t.ch))){if(o&&(Os(l,"beforeCursorEnter"),l.explicitlyCleared)){if(r.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var c,u=l.find(0>i?1:-1);if((0>i?l.inclusiveRight:l.inclusiveLeft)&&(u=Pe(e,u,-i,u&&u.line==t.line?r:null)),u&&u.line==t.line&&(c=Rr(u,n))&&(0>i?0>c:c>0))return De(e,u,t,i,o)}var h=l.find(0>i?-1:1);return(0>i?l.inclusiveLeft:l.inclusiveRight)&&(h=Pe(e,h,i,h.line==t.line?r:null)),h?De(e,h,t,i,o):null}}return t}function Oe(e,t,n,i,o){var r=i||1,s=De(e,t,n,r,o)||!o&&De(e,t,n,r,!0)||De(e,t,n,-r,o)||!o&&De(e,t,n,-r,!0);return s?s:(e.cantEdit=!0,jr(e.first,0))}function Pe(e,t,n,i){return 0>n&&0==t.ch?t.line>e.first?ge(e,jr(t.line-1)):null:n>0&&t.ch==(i||Yi(e,t.line)).text.length?t.line<e.first+e.size-1?jr(t.line+1,0):null:new jr(t.line,t.ch+n)}function Me(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ie(e,t){for(var n=e.doc,i={},o=i.cursors=document.createDocumentFragment(),r=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t!==!1||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&Fe(e,a.head,o),l||je(e,a,r)}}return i}function Fe(e,t,n){var i=dt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=n.appendChild(zo("div","Â ","CodeMirror-cursor"));if(o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var r=n.appendChild(zo("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));r.style.display="",r.style.left=i.other.left+"px",r.style.top=i.other.top+"px",r.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function je(e,t,n){function i(e,t,n,i){0>t&&(t=0),t=Math.round(t),i=Math.round(i),a.appendChild(zo("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(i-t)+"px"))}function o(t,n,o){function r(n,i){return ft(e,jr(t,n),"div",h,i)}var a,l,h=Yi(s,t),f=h.text.length;return tr(oo(h),n||0,null==o?f:o,function(e,t,s){var h,d,p,g=r(e,"left");if(e==t)h=g,d=p=g.left;else{if(h=r(t-1,"right"),"rtl"==s){var m=g;g=h,h=m}d=g.left,p=h.right}null==n&&0==e&&(d=c),h.top-g.top>3&&(i(d,g.top,null,g.bottom),d=c,g.bottom<h.top&&i(d,g.bottom,null,h.top)),null==o&&t==f&&(p=u),(!a||g.top<a.top||g.top==a.top&&g.left<a.left)&&(a=g),(!l||h.bottom>l.bottom||h.bottom==l.bottom&&h.right>l.right)&&(l=h),c+1>d&&(d=c),i(d,h.top,p-d,h.bottom)}),{start:a,end:l}}var r=e.display,s=e.doc,a=document.createDocumentFragment(),l=Ue(e.display),c=l.left,u=Math.max(r.sizerWidth,Ke(e)-r.sizer.offsetLeft)-l.right,h=t.from(),f=t.to();if(h.line==f.line)o(h.line,h.ch,f.ch);else{var d=Yi(s,h.line),p=Yi(s,f.line),g=bi(d)==bi(p),m=o(h.line,h.ch,g?d.text.length+1:null).end,v=o(f.line,g?0:null,f.ch).start;g&&(m.top<v.top-2?(i(m.right,m.top,null,m.bottom),i(c,v.top,v.left,v.bottom)):i(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&i(c,m.bottom,null,v.top)}n.appendChild(a)}function Re(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function He(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Ho(Be,e))}function Be(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=as(t.mode,We(e,t.frontier)),o=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(r){if(t.frontier>=e.display.viewFrom){var s=r.styles,a=r.text.length>e.options.maxHighlightLength,l=Mi(e,r,a?as(t.mode,i):i,!0);r.styles=l.styles;var c=r.styleClasses,u=l.classes;u?r.styleClasses=u:c&&(r.styleClasses=null);for(var h=!s||s.length!=r.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),f=0;!h&&f<s.length;++f)h=s[f]!=r.styles[f];h&&o.push(t.frontier),r.stateAfter=a?i:as(t.mode,i)}else r.text.length<=e.options.maxHighlightLength&&Fi(e,r.text,i),r.stateAfter=t.frontier%5==0?as(t.mode,i):null;return++t.frontier,+new Date>n?(He(e,e.options.workDelay),!0):void 0}),o.length&&Nt(e,function(){for(var t=0;t<o.length;t++)Ft(e,o[t],"text")})}}function $e(e,t,n){for(var i,o,r=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=r.first)return r.first;var l=Yi(r,a-1);if(l.stateAfter&&(!n||a<=r.frontier))return a;var c=Hs(l.text,null,e.options.tabSize);(null==o||i>c)&&(o=a-1,i=c)}return o}function We(e,t,n){var i=e.doc,o=e.display;if(!i.mode.startState)return!0;var r=$e(e,t,n),s=r>i.first&&Yi(i,r-1).stateAfter;return s=s?as(i.mode,s):ls(i.mode),i.iter(r,t,function(n){Fi(e,n.text,s);var a=r==t-1||r%5==0||r>=o.viewFrom&&r<o.viewTo;n.stateAfter=a?as(i.mode,s):null,++r}),n&&(i.frontier=r),s}function ze(e){return e.lineSpace.offsetTop}function qe(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ue(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Uo(e.measure,zo("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Ge(e){return Ms-e.display.nativeBarWidth}function Ke(e){return e.display.scroller.clientWidth-Ge(e)-e.display.barWidth}function Ve(e){return e.display.scroller.clientHeight-Ge(e)-e.display.barHeight}function Xe(e,t,n){var i=e.options.lineWrapping,o=i&&Ke(e);if(!t.measure.heights||i&&t.measure.width!=o){var r=t.measure.heights=[];if(i){t.measure.width=o;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&r.push((l.bottom+c.top)/2-n.top)}}r.push(n.bottom-n.top)}}function Qe(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var i=0;i<e.rest.length;i++)if(to(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Ye(e,t){t=bi(t);var n=to(t),i=e.display.externalMeasured=new Pt(e.doc,t,n);i.lineN=n;var o=i.built=Ri(e,i);return i.text=o.pre,Uo(e.display.lineMeasure,o.pre),i}function Je(e,t,n,i){return tt(e,et(e,t),n,i)}function Ze(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Rt(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function et(e,t){var n=to(t),i=Ze(e,n);i&&!i.text?i=null:i&&i.changes&&(I(e,i,n,P(e)),e.curOp.forceUpdate=!0),i||(i=Ye(e,t));var o=Qe(i,t,n);return{line:t,view:i,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function tt(e,t,n,i,o){t.before&&(n=-1);var r,s=n+(i||"");return t.cache.hasOwnProperty(s)?r=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Xe(e,t.view,t.rect),t.hasHeights=!0),r=it(e,t,n,i),r.bogus||(t.cache[s]=r)),{left:r.left,right:r.right,top:o?r.rtop:r.top,bottom:o?r.rbottom:r.bottom}}function nt(e,t,n){for(var i,o,r,s,a=0;a<e.length;a+=3){var l=e[a],c=e[a+1];if(l>t?(o=0,r=1,s="left"):c>t?(o=t-l,r=o+1):(a==e.length-3||t==c&&e[a+3]>t)&&(r=c-l,o=r-1,t>=c&&(s="right")),null!=o){if(i=e[a+2],l==c&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==o)for(;a&&e[a-2]==e[a-3]&&e[a-1].insertLeft;)i=e[(a-=3)+2],s="left";if("right"==n&&o==c-l)for(;a<e.length-3&&e[a+3]==e[a+4]&&!e[a+5].insertLeft;)i=e[(a+=3)+2],s="right";break}}return{node:i,start:o,end:r,collapse:s,coverStart:l,coverEnd:c}}function it(e,t,n,i){var o,r=nt(t.map,n,i),s=r.node,a=r.start,l=r.end,c=r.collapse;if(3==s.nodeType){for(var u=0;4>u;u++){for(;a&&Wo(t.line.text.charAt(r.coverStart+a));)--a;for(;r.coverStart+l<r.coverEnd&&Wo(t.line.text.charAt(r.coverStart+l));)++l;if(yr&&9>wr&&0==a&&l==r.coverEnd-r.coverStart)o=s.parentNode.getBoundingClientRect();else if(yr&&e.options.lineWrapping){var h=zs(s,a,l).getClientRects();o=h.length?h["right"==i?h.length-1:0]:zr}else o=zs(s,a,l).getBoundingClientRect()||zr;if(o.left||o.right||0==a)break;l=a,a-=1,c="right"}yr&&11>wr&&(o=ot(e.display.measure,o))}else{a>0&&(c=i="right");var h;o=e.options.lineWrapping&&(h=s.getClientRects()).length>1?h["right"==i?h.length-1:0]:s.getBoundingClientRect()}if(yr&&9>wr&&!a&&(!o||!o.left&&!o.right)){var f=s.parentNode.getClientRects()[0];o=f?{left:f.left,right:f.left+yt(e.display),top:f.top,bottom:f.bottom}:zr}for(var d=o.top-t.rect.top,p=o.bottom-t.rect.top,g=(d+p)/2,m=t.view.measure.heights,u=0;u<m.length-1&&!(g<m[u]);u++);var v=u?m[u-1]:0,b=m[u],y={left:("right"==c?o.right:o.left)-t.rect.left,right:("left"==c?o.left:o.right)-t.rect.left,top:v,bottom:b};return o.left||o.right||(y.bogus=!0),e.options.singleCursorHeightPerLine||(y.rtop=d,y.rbottom=p),y}function ot(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!er(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function rt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function st(e){e.display.externalMeasure=null,qo(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)rt(e.display.view[t])}function at(e){st(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function lt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ct(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ut(e,t,n,i){if(t.widgets)for(var o=0;o<t.widgets.length;++o)if(t.widgets[o].above){var r=_i(t.widgets[o]);n.top+=r,n.bottom+=r}if("line"==i)return n;i||(i="local");var s=io(t);if("local"==i?s+=ze(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:ct());var l=a.left+("window"==i?0:lt());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function ht(e,t,n){if("div"==n)return t;var i=t.left,o=t.top;if("page"==n)i-=lt(),o-=ct();else if("local"==n||!n){var r=e.display.sizer.getBoundingClientRect();i+=r.left,o+=r.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:o-s.top}}function ft(e,t,n,i,o){return i||(i=Yi(e.doc,t.line)),ut(e,i,Je(e,i,t.ch,o),n)}function dt(e,t,n,i,o,r){function s(t,s){var a=tt(e,o,t,s?"right":"left",r);return s?a.left=a.right:a.right=a.left,ut(e,i,a,n)}function a(e,t){var n=l[t],i=n.level%2;return e==nr(n)&&t&&n.level<l[t-1].level?(n=l[--t],e=ir(n)-(n.level%2?0:1),i=!0):e==ir(n)&&t<l.length-1&&n.level<l[t+1].level&&(n=l[++t],e=nr(n)-n.level%2,i=!1),i&&e==n.to&&e>n.from?s(e-1):s(e,i)}i=i||Yi(e.doc,t.line),o||(o=et(e,i));var l=oo(i),c=t.ch;if(!l)return s(c);var u=ur(l,c),h=a(c,u);return null!=ra&&(h.other=a(c,ra)),h}function pt(e,t){var n=0,t=ge(e.doc,t);e.options.lineWrapping||(n=yt(e.display)*t.ch);var i=Yi(e.doc,t.line),o=io(i)+ze(e.display);return{left:n,right:n,top:o,bottom:o+i.height}}function gt(e,t,n,i){var o=jr(e,t);return o.xRel=i,n&&(o.outside=!0),o}function mt(e,t,n){var i=e.doc;if(n+=e.display.viewOffset,0>n)return gt(i.first,0,!0,-1);var o=no(i,n),r=i.first+i.size-1;if(o>r)return gt(i.first+i.size-1,Yi(i,r).text.length,!0,1);0>t&&(t=0);for(var s=Yi(i,o);;){var a=vt(e,s,o,t,n),l=mi(s),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;o=to(s=c.to.line)}}function vt(e,t,n,i,o){function r(i){var o=dt(e,jr(n,i),"line",t,c);return a=!0,s>o.bottom?o.left-l:s<o.top?o.left+l:(a=!1,o.left)}var s=o-io(t),a=!1,l=2*e.display.wrapper.clientWidth,c=et(e,t),u=oo(t),h=t.text.length,f=or(t),d=rr(t),p=r(f),g=a,m=r(d),v=a;if(i>m)return gt(n,d,v,1);for(;;){if(u?d==f||d==fr(t,f,1):1>=d-f){for(var b=p>i||m-i>=i-p?f:d,y=i-(b==f?p:m);Wo(t.text.charAt(b));)++b;var w=gt(n,b,b==f?g:v,-1>y?-1:y>1?1:0);return w}var x=Math.ceil(h/2),C=f+x;if(u){C=f;for(var k=0;x>k;++k)C=fr(t,C,1)}var S=r(C);S>i?(d=C,m=S,(v=a)&&(m+=1e3),h=x):(f=C,p=S,g=a,h-=x)}}function bt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Br){Br=zo("pre");for(var t=0;49>t;++t)Br.appendChild(document.createTextNode("x")),Br.appendChild(zo("br"));Br.appendChild(document.createTextNode("x"))}Uo(e.measure,Br);var n=Br.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),qo(e.measure),n||1}function yt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=zo("span","xxxxxxxxxx"),n=zo("pre",[t]);Uo(e.measure,n);var i=t.getBoundingClientRect(),o=(i.right-i.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function wt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ur},qr?qr.ops.push(e.curOp):e.curOp.ownsGroup=qr={ops:[e.curOp],delayedCallbacks:[]}}function xt(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var o=e.ops[i];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm);

}}while(n<t.length)}function Ct(e){var t=e.curOp,n=t.ownsGroup;if(n)try{xt(n)}finally{qr=null;for(var i=0;i<n.ops.length;i++)n.ops[i].cm.curOp=null;kt(n)}}function kt(e){for(var t=e.ops,n=0;n<t.length;n++)St(t[n]);for(var n=0;n<t.length;n++)_t(t[n]);for(var n=0;n<t.length;n++)Tt(t[n]);for(var n=0;n<t.length;n++)Et(t[n]);for(var n=0;n<t.length;n++)At(t[n])}function St(e){var t=e.cm,n=t.display;T(t),e.updateMaxLine&&f(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new _(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function _t(e){e.updatedDisplay=e.mustUpdate&&E(e.cm,e.update)}function Tt(e){var t=e.cm,n=t.display;e.updatedDisplay&&D(t),e.barMeasure=p(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Je(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Ge(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Ke(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Et(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&rn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&L(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&b(t,e.barMeasure),e.selectionChanged&&Re(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),!e.focus||e.focus!=Go()||document.hasFocus&&!document.hasFocus()||Q(e.cm)}function At(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&A(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(i.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(i.scrollTop),n.scroller.scrollTop=i.scrollTop),null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(i.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,e.scrollLeft)),n.scrollbars.setScrollLeft(i.scrollLeft),n.scroller.scrollLeft=i.scrollLeft,x(t)),e.scrollToPos){var o=Mn(t,ge(i,e.scrollToPos.from),ge(i,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Pn(t,o)}var r=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(r)for(var a=0;a<r.length;++a)r[a].lines.length||Os(r[a],"hide");if(s)for(var a=0;a<s.length;++a)s[a].lines.length&&Os(s[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Os(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Nt(e,t){if(e.curOp)return t();wt(e);try{return t()}finally{Ct(e)}}function Lt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);wt(e);try{return t.apply(e,arguments)}finally{Ct(e)}}}function Dt(e){return function(){if(this.curOp)return e.apply(this,arguments);wt(this);try{return e.apply(this,arguments)}finally{Ct(this)}}}function Ot(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);wt(t);try{return e.apply(this,arguments)}finally{Ct(t)}}}function Pt(e,t,n){this.line=t,this.rest=yi(t),this.size=this.rest?to(Po(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Ci(e,t)}function Mt(e,t,n){for(var i,o=[],r=t;n>r;r=i){var s=new Pt(e.doc,Yi(e.doc,r),r);i=r+s.size,o.push(s)}return o}function It(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var o=e.display;if(i&&n<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)Fr&&wi(e.doc,t)<o.viewTo&&jt(e);else if(n<=o.viewFrom)Fr&&xi(e.doc,n+i)>o.viewFrom?jt(e):(o.viewFrom+=i,o.viewTo+=i);else if(t<=o.viewFrom&&n>=o.viewTo)jt(e);else if(t<=o.viewFrom){var r=Ht(e,n,n+i,1);r?(o.view=o.view.slice(r.index),o.viewFrom=r.lineN,o.viewTo+=i):jt(e)}else if(n>=o.viewTo){var r=Ht(e,t,t,-1);r?(o.view=o.view.slice(0,r.index),o.viewTo=r.lineN):jt(e)}else{var s=Ht(e,t,t,-1),a=Ht(e,n,n+i,1);s&&a?(o.view=o.view.slice(0,s.index).concat(Mt(e,s.lineN,a.lineN)).concat(o.view.slice(a.index)),o.viewTo+=i):jt(e)}var l=o.externalMeasured;l&&(n<l.lineN?l.lineN+=i:t<l.lineN+l.size&&(o.externalMeasured=null))}function Ft(e,t,n){e.curOp.viewChanged=!0;var i=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var r=i.view[Rt(e,t)];if(null!=r.node){var s=r.changes||(r.changes=[]);-1==Mo(s,n)&&s.push(n)}}}function jt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Rt(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var n=e.display.view,i=0;i<n.length;i++)if(t-=n[i].size,0>t)return i}function Ht(e,t,n,i){var o,r=Rt(e,t),s=e.display.view;if(!Fr||n==e.doc.first+e.doc.size)return{index:r,lineN:n};for(var a=0,l=e.display.viewFrom;r>a;a++)l+=s[a].size;if(l!=t){if(i>0){if(r==s.length-1)return null;o=l+s[r].size-t,r++}else o=l-t;t+=o,n+=o}for(;wi(e.doc,n)!=n;){if(r==(0>i?0:s.length-1))return null;n+=i*s[r-(0>i?1:0)].size,r+=i}return{index:r,lineN:n}}function Bt(e,t,n){var i=e.display,o=i.view;0==o.length||t>=i.viewTo||n<=i.viewFrom?(i.view=Mt(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Mt(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Rt(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Mt(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Rt(e,n)))),i.viewTo=n}function $t(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var o=t[i];o.hidden||o.node&&!o.changes||++n}return n}function Wt(e){function t(){o.activeTouch&&(r=setTimeout(function(){o.activeTouch=null},1e3),s=o.activeTouch,s.end=+new Date)}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function i(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}var o=e.display;Ns(o.scroller,"mousedown",Lt(e,Kt)),yr&&11>wr?Ns(o.scroller,"dblclick",Lt(e,function(t){if(!Eo(e,t)){var n=Gt(e,t);if(n&&!Jt(e,t)&&!Ut(e.display,t)){Ts(t);var i=e.findWordAt(n);we(e.doc,i.anchor,i.head)}}})):Ns(o.scroller,"dblclick",function(t){Eo(e,t)||Ts(t)}),Mr||Ns(o.scroller,"contextmenu",function(t){yn(e,t)});var r,s={end:0};Ns(o.scroller,"touchstart",function(t){if(!Eo(e,t)&&!n(t)){clearTimeout(r);var i=+new Date;o.activeTouch={start:i,moved:!1,prev:i-s.end<=300?s:null},1==t.touches.length&&(o.activeTouch.left=t.touches[0].pageX,o.activeTouch.top=t.touches[0].pageY)}}),Ns(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),Ns(o.scroller,"touchend",function(n){var r=o.activeTouch;if(r&&!Ut(o,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=e.coordsChar(o.activeTouch,"page");s=!r.prev||i(r,r.prev)?new he(a,a):!r.prev.prev||i(r,r.prev.prev)?e.findWordAt(a):new he(jr(a.line,0),ge(e.doc,jr(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),Ts(n)}t()}),Ns(o.scroller,"touchcancel",t),Ns(o.scroller,"scroll",function(){o.scroller.clientHeight&&(on(e,o.scroller.scrollTop),rn(e,o.scroller.scrollLeft,!0),Os(e,"scroll",e))}),Ns(o.scroller,"mousewheel",function(t){sn(e,t)}),Ns(o.scroller,"DOMMouseScroll",function(t){sn(e,t)}),Ns(o.wrapper,"scroll",function(){o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(t){Eo(e,t)||As(t)},over:function(t){Eo(e,t)||(tn(e,t),As(t))},start:function(t){en(e,t)},drop:Lt(e,Zt),leave:function(){nn(e)}};var a=o.input.getField();Ns(a,"keyup",function(t){pn.call(e,t)}),Ns(a,"keydown",Lt(e,fn)),Ns(a,"keypress",Lt(e,gn)),Ns(a,"focus",Ho(vn,e)),Ns(a,"blur",Ho(bn,e))}function zt(t,n,i){var o=i&&i!=e.Init;if(!n!=!o){var r=t.display.dragFunctions,s=n?Ns:Ds;s(t.display.scroller,"dragstart",r.start),s(t.display.scroller,"dragenter",r.enter),s(t.display.scroller,"dragover",r.over),s(t.display.scroller,"dragleave",r.leave),s(t.display.scroller,"drop",r.drop)}}function qt(e){var t=e.display;(t.lastWrapHeight!=t.wrapper.clientHeight||t.lastWrapWidth!=t.wrapper.clientWidth)&&(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Ut(e,t){for(var n=Co(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Gt(e,t,n,i){var o=e.display;if(!n&&"true"==Co(t).getAttribute("cm-not-content"))return null;var r,s,a=o.lineSpace.getBoundingClientRect();try{r=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var l,c=mt(e,r,s);if(i&&1==c.xRel&&(l=Yi(e.doc,c.line).text).length==c.ch){var u=Hs(l,l.length,e.options.tabSize)-l.length;c=jr(c.line,Math.max(0,Math.round((r-Ue(e.display).left)/yt(e.display))-u))}return c}function Kt(e){var t=this,n=t.display;if(!(Eo(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.shift=e.shiftKey,Ut(n,e))return void(xr||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Jt(t,e)){var i=Gt(t,e);switch(window.focus(),ko(e)){case 1:t.state.selectingText?t.state.selectingText(e):i?Vt(t,e,i):Co(e)==n.scroller&&Ts(e);break;case 2:xr&&(t.state.lastMiddleDown=+new Date),i&&we(t.doc,i),setTimeout(function(){n.input.focus()},20),Ts(e);break;case 3:Mr?yn(t,e):mn(t)}}}}function Vt(e,t,n){yr?setTimeout(Ho(Q,e),0):e.curOp.focus=Go();var i,o=+new Date;Wr&&Wr.time>o-400&&0==Rr(Wr.pos,n)?i="triple":$r&&$r.time>o-400&&0==Rr($r.pos,n)?(i="double",Wr={time:o,pos:n}):(i="single",$r={time:o,pos:n});var r,s=e.doc.sel,a=Lr?t.metaKey:t.ctrlKey;e.options.dragDrop&&Zs&&!e.isReadOnly()&&"single"==i&&(r=s.contains(n))>-1&&(Rr((r=s.ranges[r]).from(),n)<0||n.xRel>0)&&(Rr(r.to(),n)>0||n.xRel<0)?Xt(e,t,n,a):Qt(e,t,n,i,a)}function Xt(e,t,n,i){var o=e.display,r=+new Date,s=Lt(e,function(a){xr&&(o.scroller.draggable=!1),e.state.draggingText=!1,Ds(document,"mouseup",s),Ds(o.scroller,"drop",s),Math.abs(t.clientX-a.clientX)+Math.abs(t.clientY-a.clientY)<10&&(Ts(a),!i&&+new Date-200<r&&we(e.doc,n),xr||yr&&9==wr?setTimeout(function(){document.body.focus(),o.input.focus()},20):o.input.focus())});xr&&(o.scroller.draggable=!0),e.state.draggingText=s,o.scroller.dragDrop&&o.scroller.dragDrop(),Ns(document,"mouseup",s),Ns(o.scroller,"drop",s)}function Qt(e,t,n,i,o){function r(t){if(0!=Rr(m,t))if(m=t,"rect"==i){for(var o=[],r=e.options.tabSize,s=Hs(Yi(c,n.line).text,n.ch,r),a=Hs(Yi(c,t.line).text,t.ch,r),l=Math.min(s,a),d=Math.max(s,a),p=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));g>=p;p++){var v=Yi(c,p).text,b=Bs(v,l,r);l==d?o.push(new he(jr(p,b),jr(p,b))):v.length>b&&o.push(new he(jr(p,b),jr(p,Bs(v,d,r))))}o.length||o.push(new he(n,n)),Te(c,fe(f.ranges.slice(0,h).concat(o),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=u,w=y.anchor,x=t;if("single"!=i){if("double"==i)var C=e.findWordAt(t);else var C=new he(jr(t.line,0),ge(c,jr(t.line+1,0)));Rr(C.anchor,w)>0?(x=C.head,w=X(y.from(),C.anchor)):(x=C.anchor,w=V(y.to(),C.head))}var o=f.ranges.slice(0);o[h]=new he(ge(c,w),x),Te(c,fe(o,h),js)}}function s(t){var n=++b,o=Gt(e,t,!0,"rect"==i);if(o)if(0!=Rr(o,m)){e.curOp.focus=Go(),r(o);var a=w(l,c);(o.line>=a.to||o.line<a.from)&&setTimeout(Lt(e,function(){b==n&&s(t)}),150)}else{var u=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;u&&setTimeout(Lt(e,function(){b==n&&(l.scroller.scrollTop+=u,s(t))}),50)}}function a(t){e.state.selectingText=!1,b=1/0,Ts(t),l.input.focus(),Ds(document,"mousemove",y),Ds(document,"mouseup",x),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;Ts(t);var u,h,f=c.sel,d=f.ranges;if(o&&!t.shiftKey?(h=c.sel.contains(n),u=h>-1?d[h]:new he(n,n)):(u=c.sel.primary(),h=c.sel.primIndex),t.altKey)i="rect",o||(u=new he(n,n)),n=Gt(e,t,!0,!0),h=-1;else if("double"==i){var p=e.findWordAt(n);u=e.display.shift||c.extend?ye(c,u,p.anchor,p.head):p}else if("triple"==i){var g=new he(jr(n.line,0),ge(c,jr(n.line+1,0)));u=e.display.shift||c.extend?ye(c,u,g.anchor,g.head):g}else u=ye(c,u,n);o?-1==h?(h=d.length,Te(c,fe(d.concat([u]),h),{scroll:!1,origin:"*mouse"})):d.length>1&&d[h].empty()&&"single"==i&&!t.shiftKey?(Te(c,fe(d.slice(0,h).concat(d.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),f=c.sel):Ce(c,h,u,js):(h=0,Te(c,new ue([u],0),js),f=c.sel);var m=n,v=l.wrapper.getBoundingClientRect(),b=0,y=Lt(e,function(e){ko(e)?s(e):a(e)}),x=Lt(e,a);e.state.selectingText=x,Ns(document,"mousemove",y),Ns(document,"mouseup",x)}function Yt(e,t,n,i){try{var o=t.clientX,r=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&Ts(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(r>a.bottom||!No(e,n))return xo(t);r-=a.top-s.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=o){var u=no(e.doc,r),h=e.options.gutters[l];return Os(e,n,e,u,h,t),xo(t)}}}function Jt(e,t){return Yt(e,t,"gutterClick",!0)}function Zt(e){var t=this;if(nn(t),!Eo(t,e)&&!Ut(t.display,e)){Ts(e),yr&&(Gr=+new Date);var n=Gt(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,r=Array(o),s=0,a=function(e,i){if(!t.options.allowDropFileTypes||-1!=Mo(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=Lt(t,function(){var e=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),r[i]=e,++s==o){n=ge(t.doc,n);var l={from:n,to:n,text:t.doc.splitLines(r.join(t.doc.lineSeparator())),origin:"paste"};Tn(t.doc,l),_e(t.doc,de(n,Jr(l)))}}),a.readAsText(e)}},l=0;o>l;++l)a(i[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{var r=e.dataTransfer.getData("Text");if(r){if(t.state.draggingText&&!(Lr?e.altKey:e.ctrlKey))var c=t.listSelections();if(Ee(t.doc,de(n,n)),c)for(var l=0;l<c.length;++l)On(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(r,"around","paste"),t.display.input.focus()}}catch(e){}}}}function en(e,t){if(yr&&(!e.state.draggingText||+new Date-Gr<100))return void As(t);if(!Eo(e,t)&&!Ut(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!_r)){var n=zo("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Sr&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Sr&&n.parentNode.removeChild(n)}}function tn(e,t){var n=Gt(e,t);if(n){var i=document.createDocumentFragment();Fe(e,n,i),e.display.dragCursor||(e.display.dragCursor=zo("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),Uo(e.display.dragCursor,i)}}function nn(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function on(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,mr||N(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),mr&&N(e),He(e,100))}function rn(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,x(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function sn(e,t){var n=Xr(t),i=n.x,o=n.y,r=e.display,s=r.scroller,a=s.scrollWidth>s.clientWidth,l=s.scrollHeight>s.clientHeight;if(i&&a||o&&l){if(o&&Lr&&xr)e:for(var c=t.target,u=r.view;c!=s;c=c.parentNode)for(var h=0;h<u.length;h++)if(u[h].node==c){e.display.currentWheelTarget=c;break e}if(i&&!mr&&!Sr&&null!=Vr)return o&&l&&on(e,Math.max(0,Math.min(s.scrollTop+o*Vr,s.scrollHeight-s.clientHeight))),rn(e,Math.max(0,Math.min(s.scrollLeft+i*Vr,s.scrollWidth-s.clientWidth))),(!o||o&&l)&&Ts(t),void(r.wheelStartX=null);if(o&&null!=Vr){var f=o*Vr,d=e.doc.scrollTop,p=d+r.wrapper.clientHeight;0>f?d=Math.max(0,d+f-50):p=Math.min(e.doc.height,p+f+50),N(e,{top:d,bottom:p})}20>Kr&&(null==r.wheelStartX?(r.wheelStartX=s.scrollLeft,r.wheelStartY=s.scrollTop,r.wheelDX=i,r.wheelDY=o,setTimeout(function(){if(null!=r.wheelStartX){var e=s.scrollLeft-r.wheelStartX,t=s.scrollTop-r.wheelStartY,n=t&&r.wheelDY&&t/r.wheelDY||e&&r.wheelDX&&e/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(Vr=(Vr*Kr+n)/(Kr+1),++Kr)}},200)):(r.wheelDX+=i,r.wheelDY+=o))}}function an(e,t,n){if("string"==typeof t&&(t=cs[t],!t))return!1;e.display.input.ensurePolled();var i=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),o=t(e)!=Is}finally{e.display.shift=i,e.state.suppressEdits=!1}return o}function ln(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var o=hs(t,e.state.keyMaps[i],n,e);if(o)return o}return e.options.extraKeys&&hs(t,e.options.extraKeys,n,e)||hs(t,e.options.keyMap,n,e)}function cn(e,t,n,i){var o=e.state.keySeq;if(o){if(fs(t))return"handled";Qr.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())}),t=o+" "+t}var r=ln(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&_o(e,"keyHandled",e,t,n),("handled"==r||"multi"==r)&&(Ts(n),Re(e)),o&&!r&&/\'$/.test(t)?(Ts(n),!0):!!r}function un(e,t){var n=ds(t,!0);return n?t.shiftKey&&!e.state.keySeq?cn(e,"Shift-"+n,t,function(t){return an(e,t,!0)})||cn(e,n,t,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?an(e,t):void 0}):cn(e,n,t,function(t){return an(e,t)}):!1}function hn(e,t,n){return cn(e,"'"+n+"'",t,function(t){return an(e,t,!0)})}function fn(e){var t=this;if(t.curOp.focus=Go(),!Eo(t,e)){yr&&11>wr&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=un(t,e);Sr&&(Yr=i?n:null,!i&&88==n&&!na&&(Lr?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||dn(t)}}function dn(e){function t(e){18!=e.keyCode&&e.altKey||(Qs(n,"CodeMirror-crosshair"),Ds(document,"keyup",t),Ds(document,"mouseover",t))}var n=e.display.lineDiv;Ys(n,"CodeMirror-crosshair"),Ns(document,"keyup",t),Ns(document,"mouseover",t)}function pn(e){16==e.keyCode&&(this.doc.sel.shift=!1),Eo(this,e)}function gn(e){var t=this;if(!(Ut(t.display,e)||Eo(t,e)||e.ctrlKey&&!e.altKey||Lr&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(Sr&&n==Yr)return Yr=null,void Ts(e);if(!Sr||e.which&&!(e.which<10)||!un(t,e)){var o=String.fromCharCode(null==i?n:i);hn(t,e,o)||t.display.input.onKeyPress(e)}}}function mn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,bn(e))},100)}function vn(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Os(e,"focus",e),e.state.focused=!0,Ys(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),xr&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Re(e))}function bn(e){e.state.delayingBlurEvent||(e.state.focused&&(Os(e,"blur",e),e.state.focused=!1,Qs(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function yn(e,t){Ut(e.display,t)||wn(e,t)||Eo(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function wn(e,t){return No(e,"gutterContextMenu")?Yt(e,t,"gutterContextMenu",!1):!1}function xn(e,t){if(Rr(e,t.from)<0)return e;if(Rr(e,t.to)<=0)return Jr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Jr(t).ch-t.to.ch),jr(n,i)}function Cn(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var o=e.sel.ranges[i];n.push(new he(xn(o.anchor,t),xn(o.head,t)))}return fe(n,e.sel.primIndex)}function kn(e,t,n){return e.line==t.line?jr(n.line,e.ch-t.ch+n.ch):jr(n.line+(e.line-t.line),e.ch)}function Sn(e,t,n){for(var i=[],o=jr(e.first,0),r=o,s=0;s<t.length;s++){var a=t[s],l=kn(a.from,o,r),c=kn(Jr(a),o,r);if(o=a.to,r=c,"around"==n){var u=e.sel.ranges[s],h=Rr(u.head,u.anchor)<0;i[s]=new he(h?c:l,h?l:c)}else i[s]=new he(l,l)}return new ue(i,e.sel.primIndex)}function _n(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(t,n,i,o){t&&(this.from=ge(e,t)),n&&(this.to=ge(e,n)),i&&(this.text=i),void 0!==o&&(this.origin=o)}),Os(e,"beforeChange",e,i),e.cm&&Os(e.cm,"beforeChange",e.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Tn(e,t,n){if(e.cm){if(!e.cm.curOp)return Lt(e.cm,Tn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(No(e,"beforeChange")||e.cm&&No(e.cm,"beforeChange"))||(t=_n(e,t,!0))){var i=Ir&&!n&&li(e,t.from,t.to);if(i)for(var o=i.length-1;o>=0;--o)En(e,{from:i[o].from,to:i[o].to,text:o?[""]:t.text});else En(e,t)}}function En(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Rr(t.from,t.to)){var n=Cn(e,t);co(e,t,n,e.cm?e.cm.curOp.id:0/0),Ln(e,t,n,ri(e,t));var i=[];Xi(e,function(e,n){n||-1!=Mo(i,e.history)||(wo(e.history,t),i.push(e.history)),Ln(e,t,null,ri(e,t))})}}function An(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var i,o=e.history,r=e.sel,s="undo"==t?o.done:o.undone,a="undo"==t?o.undone:o.done,l=0;l<s.length&&(i=s[l],n?!i.ranges||i.equals(e.sel):i.ranges);l++);if(l!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;i=s.pop(),i.ranges;){if(fo(i,a),n&&!i.equals(e.sel))return void Te(e,i,{clearRedo:!1});r=i}var c=[];fo(r,a),a.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var u=No(e,"beforeChange")||e.cm&&No(e.cm,"beforeChange"),l=i.changes.length-1;l>=0;--l){var h=i.changes[l];if(h.origin=t,u&&!_n(e,h,!1))return void(s.length=0);c.push(so(e,h));var f=l?Cn(e,h):Po(s);Ln(e,h,f,ai(e,h)),!l&&e.cm&&e.cm.scrollIntoView({from:h.from,to:Jr(h)});var d=[];Xi(e,function(e,t){t||-1!=Mo(d,e.history)||(wo(e.history,h),d.push(e.history)),Ln(e,h,null,ai(e,h))})}}}}function Nn(e,t){if(0!=t&&(e.first+=t,e.sel=new ue(Io(e.sel.ranges,function(e){return new he(jr(e.anchor.line+t,e.anchor.ch),jr(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){It(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Ft(e.cm,i,"gutter")}}function Ln(e,t,n,i){if(e.cm&&!e.cm.curOp)return Lt(e.cm,Ln)(e,t,n,i);if(t.to.line<e.first)return void Nn(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);Nn(e,o),t={from:jr(e.first,0),to:jr(t.to.line+o,t.to.ch),text:[Po(t.text)],origin:t.origin}}var r=e.lastLine();t.to.line>r&&(t={from:t.from,to:jr(r,Yi(e,r).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ji(e,t.from,t.to),n||(n=Cn(e,t)),e.cm?Dn(e.cm,t,i):Gi(e,t,i),Ee(e,n,Fs)}}function Dn(e,t,n){var i=e.doc,o=e.display,s=t.from,a=t.to,l=!1,c=s.line;e.options.lineWrapping||(c=to(bi(Yi(i,s.line))),i.iter(c,a.line+1,function(e){return e==o.maxLine?(l=!0,!0):void 0})),i.sel.contains(t.from,t.to)>-1&&Ao(e),Gi(i,t,n,r(e)),e.options.lineWrapping||(i.iter(c,s.line+t.text.length,function(e){var t=h(e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,s.line),He(e,400);var u=t.text.length-(a.line-s.line)-1;t.full?It(e):s.line!=a.line||1!=t.text.length||Ui(e.doc,t)?It(e,s.line,a.line+1,u):Ft(e,s.line,"text");var f=No(e,"changes"),d=No(e,"change");if(d||f){var p={from:s,to:a,text:t.text,removed:t.removed,origin:t.origin};d&&_o(e,"change",e,p),f&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function On(e,t,n,i,o){if(i||(i=n),Rr(i,n)<0){var r=i;i=n,n=r}"string"==typeof t&&(t=e.splitLines(t)),Tn(e,{from:n,to:i,text:t,origin:o})}function Pn(e,t){if(!Eo(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),o=null;if(t.top+i.top<0?o=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Er){var r=zo("div","â€‹",null,"position: absolute; top: "+(t.top-n.viewOffset-ze(e.display))+"px; height: "+(t.bottom-t.top+Ge(e)+n.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(r),r.scrollIntoView(o),e.display.lineSpace.removeChild(r)}}}function Mn(e,t,n,i){null==i&&(i=0);for(var o=0;5>o;o++){var r=!1,s=dt(e,t),a=n&&n!=t?dt(e,n):s,l=Fn(e,Math.min(s.left,a.left),Math.min(s.top,a.top)-i,Math.max(s.left,a.left),Math.max(s.bottom,a.bottom)+i),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=l.scrollTop&&(on(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(r=!0)),null!=l.scrollLeft&&(rn(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(r=!0)),!r)break}return s}function In(e,t,n,i,o){var r=Fn(e,t,n,i,o);null!=r.scrollTop&&on(e,r.scrollTop),null!=r.scrollLeft&&rn(e,r.scrollLeft)}function Fn(e,t,n,i,o){var r=e.display,s=bt(e.display);0>n&&(n=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,l=Ve(e),c={};o-n>l&&(o=n+l);var u=e.doc.height+qe(r),h=s>n,f=o>u-s;if(a>n)c.scrollTop=h?0:n;else if(o>a+l){var d=Math.min(n,(f?u:o)-l);d!=a&&(c.scrollTop=d)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft,g=Ke(e)-(e.options.fixedGutter?r.gutters.offsetWidth:0),m=i-t>g;return m&&(i=t+g),10>t?c.scrollLeft=0:p>t?c.scrollLeft=Math.max(0,t-(m?0:10)):i>g+p-3&&(c.scrollLeft=i+(m?0:10)-g),c}function jn(e,t,n){(null!=t||null!=n)&&Hn(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function Rn(e){Hn(e);var t=e.getCursor(),n=t,i=t;e.options.lineWrapping||(n=t.ch?jr(t.line,t.ch-1):t,i=jr(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:i,margin:e.options.cursorScrollMargin,isCursor:!0}}function Hn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=pt(e,t.from),i=pt(e,t.to),o=Fn(e,Math.min(n.left,i.left),Math.min(n.top,i.top)-t.margin,Math.max(n.right,i.right),Math.max(n.bottom,i.bottom)+t.margin);e.scrollTo(o.scrollLeft,o.scrollTop)}}function Bn(e,t,n,i){var o,r=e.doc;null==n&&(n="add"),"smart"==n&&(r.mode.indent?o=We(e,t):n="prev");var s=e.options.tabSize,a=Yi(r,t),l=Hs(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&(c=r.mode.indent(o,a.text.slice(u.length),a.text),c==Is||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>r.first?Hs(Yi(r,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var h="",f=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/s);d;--d)f+=s,h+="	";if(c>f&&(h+=Oo(c-f)),h!=u)return On(r,h,jr(t,0),jr(t,u.length),"+input"),a.stateAfter=null,!0;for(var d=0;d<r.sel.ranges.length;d++){var p=r.sel.ranges[d];if(p.head.line==t&&p.head.ch<u.length){var f=jr(t,u.length);Ce(r,d,new he(f,f));break}}}function $n(e,t,n,i){var o=t,r=t;return"number"==typeof t?r=Yi(e,pe(e,t)):o=to(t),null==o?null:(i(r,o)&&e.cm&&Ft(e.cm,o,n),r)}function Wn(e,t){for(var n=e.doc.sel.ranges,i=[],o=0;o<n.length;o++){for(var r=t(n[o]);i.length&&Rr(r.from,Po(i).to)<=0;){var s=i.pop();if(Rr(s.from,r.from)<0){r.from=s.from;break}}i.push(r)}Nt(e,function(){for(var t=i.length-1;t>=0;t--)On(e.doc,"",i[t].from,i[t].to,"+delete");Rn(e)})}function zn(e,t,n,i,o){function r(){var t=a+n;return t<e.first||t>=e.first+e.size?!1:(a=t,u=Yi(e,t))}function s(e){var t=(o?fr:dr)(u,l,n,!0);if(null==t){if(e||!r())return!1;l=o?(0>n?rr:or)(u):0>n?u.text.length:0}else l=t;return!0}var a=t.line,l=t.ch,c=n,u=Yi(e,a);if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var h=null,f="group"==i,d=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(0>n)||s(!p);p=!1){var g=u.text.charAt(l)||"\n",m=Bo(g,d)?"w":f&&"\n"==g?"n":!f||/\s/.test(g)?null:"p";if(!f||p||m||(m="s"),h&&h!=m){0>n&&(n=1,s());break}if(m&&(h=m),n>0&&!s(!p))break}var v=Oe(e,jr(a,l),t,c,!0);return Rr(t,v)||(v.hitSide=!0),v}function qn(e,t,n,i){var o,r=e.doc,s=t.left;if("page"==i){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+n*(a-(0>n?1.5:.5)*bt(e.display))}else"line"==i&&(o=n>0?t.bottom+3:t.top-3);for(;;){var l=mt(e,s,o);if(!l.outside)break;if(0>n?0>=o:o>=r.height){l.hitSide=!0;break}o+=5*n}return l}function Un(t,n,i,o){e.defaults[t]=n,i&&(es[t]=o?function(e,t,n){n!=ts&&i(e,t,n)}:i)}function Gn(e){for(var t,n,i,o,r=e.split(/-(?!$)/),e=r[r.length-1],s=0;s<r.length-1;s++){var a=r[s];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Kn(e){return"string"==typeof e?us[e]:e}function Vn(e,t,n,i,o){if(i&&i.shared)return Xn(e,t,n,i,o);if(e.cm&&!e.cm.curOp)return Lt(e.cm,Vn)(e,t,n,i,o);var r=new ms(e,o),s=Rr(t,n);if(i&&Ro(i,r,!1),s>0||0==s&&r.clearWhenEmpty!==!1)return r;if(r.replacedWith&&(r.collapsed=!0,r.widgetNode=zo("span",[r.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||r.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(r.widgetNode.insertLeft=!0)),r.collapsed){if(vi(e,t.line,t,n,r)||t.line!=n.line&&vi(e,n.line,t,n,r))throw new Error("Inserting collapsed marker partially overlapping an existing one");Fr=!0}r.addToHistory&&co(e,{from:t,to:n,origin:"markText"},e.sel,0/0);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&r.collapsed&&!c.options.lineWrapping&&bi(e)==c.display.maxLine&&(a=!0),r.collapsed&&l!=t.line&&eo(e,0),ni(e,new Zn(r,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),r.collapsed&&e.iter(t.line,n.line+1,function(t){Ci(e,t)&&eo(t,0)}),r.clearOnEnter&&Ns(r,"beforeCursorEnter",function(){r.clear()}),r.readOnly&&(Ir=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),r.collapsed&&(r.id=++gs,r.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),r.collapsed)It(c,t.line,n.line+1);else if(r.className||r.title||r.startStyle||r.endStyle||r.css)for(var u=t.line;u<=n.line;u++)Ft(c,u,"text");r.atomic&&Ne(c.doc),_o(c,"markerAdded",c,r)}return r}function Xn(e,t,n,i,o){i=Ro(i),i.shared=!1;var r=[Vn(e,t,n,i,o)],s=r[0],a=i.widgetNode;return Xi(e,function(e){a&&(i.widgetNode=a.cloneNode(!0)),r.push(Vn(e,ge(e,t),ge(e,n),i,o));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=Po(r)}),new vs(r,s)}function Qn(e){return e.findMarks(jr(e.first,0),e.clipPos(jr(e.lastLine())),function(e){return e.parent})}function Yn(e,t){for(var n=0;n<t.length;n++){var i=t[n],o=i.find(),r=e.clipPos(o.from),s=e.clipPos(o.to);if(Rr(r,s)){var a=Vn(e,r,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}function Jn(e){for(var t=0;t<e.length;t++){var n=e[t],i=[n.primary.doc];Xi(n.primary.doc,function(e){i.push(e)});for(var o=0;o<n.markers.length;o++){var r=n.markers[o];-1==Mo(i,r.doc)&&(r.parent=null,n.markers.splice(o--,1))}}}function Zn(e,t,n){this.marker=e,this.from=t,this.to=n}function ei(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function ti(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function ni(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function ii(e,t,n){if(e)for(var i,o=0;o<e.length;++o){var r=e[o],s=r.marker,a=null==r.from||(s.inclusiveLeft?r.from<=t:r.from<t);if(a||r.from==t&&"bookmark"==s.type&&(!n||!r.marker.insertLeft)){var l=null==r.to||(s.inclusiveRight?r.to>=t:r.to>t);(i||(i=[])).push(new Zn(s,r.from,l?null:r.to))}}return i}function oi(e,t,n){if(e)for(var i,o=0;o<e.length;++o){var r=e[o],s=r.marker,a=null==r.to||(s.inclusiveRight?r.to>=t:r.to>t);if(a||r.from==t&&"bookmark"==s.type&&(!n||r.marker.insertLeft)){var l=null==r.from||(s.inclusiveLeft?r.from<=t:r.from<t);

(i||(i=[])).push(new Zn(s,l?null:r.from-t,null==r.to?null:r.to-t))}}return i}function ri(e,t){if(t.full)return null;var n=ve(e,t.from.line)&&Yi(e,t.from.line).markedSpans,i=ve(e,t.to.line)&&Yi(e,t.to.line).markedSpans;if(!n&&!i)return null;var o=t.from.ch,r=t.to.ch,s=0==Rr(t.from,t.to),a=ii(n,o,s),l=oi(i,r,s),c=1==t.text.length,u=Po(t.text).length+(c?o:0);if(a)for(var h=0;h<a.length;++h){var f=a[h];if(null==f.to){var d=ei(l,f.marker);d?c&&(f.to=null==d.to?null:d.to+u):f.to=o}}if(l)for(var h=0;h<l.length;++h){var f=l[h];if(null!=f.to&&(f.to+=u),null==f.from){var d=ei(a,f.marker);d||(f.from=u,c&&(a||(a=[])).push(f))}else f.from+=u,c&&(a||(a=[])).push(f)}a&&(a=si(a)),l&&l!=a&&(l=si(l));var p=[a];if(!c){var g,m=t.text.length-2;if(m>0&&a)for(var h=0;h<a.length;++h)null==a[h].to&&(g||(g=[])).push(new Zn(a[h].marker,null,null));for(var h=0;m>h;++h)p.push(g);p.push(l)}return p}function si(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function ai(e,t){var n=mo(e,t),i=ri(e,t);if(!n)return i;if(!i)return n;for(var o=0;o<n.length;++o){var r=n[o],s=i[o];if(r&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<r.length;++c)if(r[c].marker==l.marker)continue e;r.push(l)}else s&&(n[o]=s)}return n}function li(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=Mo(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var o=[{from:t,to:n}],r=0;r<i.length;++r)for(var s=i[r],a=s.find(0),l=0;l<o.length;++l){var c=o[l];if(!(Rr(c.to,a.from)<0||Rr(c.from,a.to)>0)){var u=[l,1],h=Rr(c.from,a.from),f=Rr(c.to,a.to);(0>h||!s.inclusiveLeft&&!h)&&u.push({from:c.from,to:a.from}),(f>0||!s.inclusiveRight&&!f)&&u.push({from:a.to,to:c.to}),o.splice.apply(o,u),l+=u.length-1}}return o}function ci(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function ui(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function hi(e){return e.inclusiveLeft?-1:0}function fi(e){return e.inclusiveRight?1:0}function di(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),o=t.find(),r=Rr(i.from,o.from)||hi(e)-hi(t);if(r)return-r;var s=Rr(i.to,o.to)||fi(e)-fi(t);return s?s:t.id-e.id}function pi(e,t){var n,i=Fr&&e.markedSpans;if(i)for(var o,r=0;r<i.length;++r)o=i[r],o.marker.collapsed&&null==(t?o.from:o.to)&&(!n||di(n,o.marker)<0)&&(n=o.marker);return n}function gi(e){return pi(e,!0)}function mi(e){return pi(e,!1)}function vi(e,t,n,i,o){var r=Yi(e,t),s=Fr&&r.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=Rr(c.from,n)||hi(l.marker)-hi(o),h=Rr(c.to,i)||fi(l.marker)-fi(o);if(!(u>=0&&0>=h||0>=u&&h>=0)&&(0>=u&&(Rr(c.to,n)>0||l.marker.inclusiveRight&&o.inclusiveLeft)||u>=0&&(Rr(c.from,i)<0||l.marker.inclusiveLeft&&o.inclusiveRight)))return!0}}}function bi(e){for(var t;t=gi(e);)e=t.find(-1,!0).line;return e}function yi(e){for(var t,n;t=mi(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function wi(e,t){var n=Yi(e,t),i=bi(n);return n==i?t:to(i)}function xi(e,t){if(t>e.lastLine())return t;var n,i=Yi(e,t);if(!Ci(e,i))return t;for(;n=mi(i);)i=n.find(1,!0).line;return to(i)+1}function Ci(e,t){var n=Fr&&t.markedSpans;if(n)for(var i,o=0;o<n.length;++o)if(i=n[o],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&ki(e,t,i))return!0}}function ki(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return ki(e,i.line,ei(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var o,r=0;r<t.markedSpans.length;++r)if(o=t.markedSpans[r],o.marker.collapsed&&!o.marker.widgetNode&&o.from==n.to&&(null==o.to||o.to!=n.from)&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&ki(e,t,o))return!0}function Si(e,t,n){io(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&jn(e,null,n)}function _i(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Ks(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),Uo(t.display.measure,zo("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Ti(e,t,n,i){var o=new bs(e,n,i),r=e.cm;return r&&o.noHScroll&&(r.display.alignWidgets=!0),$n(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==o.insertAt?n.push(o):n.splice(Math.min(n.length-1,Math.max(0,o.insertAt)),0,o),o.line=t,r&&!Ci(e,t)){var i=io(t)<e.scrollTop;eo(t,t.height+_i(o)),i&&jn(r,null,o.height),r.curOp.forceUpdate=!0}return!0}),o}function Ei(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),ci(e),ui(e,n);var o=i?i(e):1;o!=e.height&&eo(e,o)}function Ai(e){e.parent=null,ci(e)}function Ni(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function Li(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var i=e.innerMode(t,n);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function Di(t,n,i,o){for(var r=0;10>r;r++){o&&(o[0]=e.innerMode(t,i).mode);var s=t.token(n,i);if(n.pos>n.start)return s}throw new Error("Mode "+t.name+" failed to advance stream.")}function Oi(e,t,n,i){function o(e){return{start:h.start,end:h.pos,string:h.current(),type:r||null,state:e?as(s.mode,u):u}}var r,s=e.doc,a=s.mode;t=ge(s,t);var l,c=Yi(s,t.line),u=We(e,t.line,n),h=new ps(c.text,e.options.tabSize);for(i&&(l=[]);(i||h.pos<t.ch)&&!h.eol();)h.start=h.pos,r=Di(a,h,u),i&&l.push(o(!0));return i?l:o()}function Pi(e,t,n,i,o,r,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,h=new ps(t,e.options.tabSize),f=e.options.addModeClass&&[null];for(""==t&&Ni(Li(n,i),r);!h.eol();){if(h.pos>e.options.maxHighlightLength?(a=!1,s&&Fi(e,t,i,h.pos),h.pos=t.length,l=null):l=Ni(Di(n,h,i,f),r),f){var d=f[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!a||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e4),o(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e4);o(p,u),c=p}}function Mi(e,t,n,i){var o=[e.state.modeGen],r={};Pi(e,t.text,e.doc.mode,n,function(e,t){o.push(e,t)},r,i);for(var s=0;s<e.state.overlays.length;++s){var a=e.state.overlays[s],l=1,c=0;Pi(e,t.text,a.mode,!0,function(e,t){for(var n=l;e>c;){var i=o[l];i>e&&o.splice(l,1,e,o[l+1],i),l+=2,c=Math.min(e,i)}if(t)if(a.opaque)o.splice(n,l-n,e,"cm-overlay "+t),l=n+2;else for(;l>n;n+=2){var r=o[n+1];o[n+1]=(r?r+" ":"")+"cm-overlay "+t}},r)}return{styles:o,classes:r.bgClass||r.textClass?r:null}}function Ii(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=We(e,to(t)),o=Mi(e,t,t.text.length>e.options.maxHighlightLength?as(e.doc.mode,i):i);t.stateAfter=i,t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++}return t.styles}function Fi(e,t,n,i){var o=e.doc.mode,r=new ps(t,e.options.tabSize);for(r.start=r.pos=i||0,""==t&&Li(o,n);!r.eol();)Di(o,r,n),r.start=r.pos}function ji(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?xs:ws;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Ri(e,t){var n=zo("span",null,null,xr?"padding-right: .1px":null),i={pre:zo("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,splitSpaces:(yr||xr)&&e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var r,s=o?t.rest[o-1]:t.line;i.pos=0,i.addToken=Bi,Zo(e.display.measure)&&(r=oo(s))&&(i.addToken=Wi(i.addToken,r)),i.map=[];var a=t!=e.display.externalMeasured&&to(s);qi(s,i,Ii(e,s,a)),s.styleClasses&&(s.styleClasses.bgClass&&(i.bgClass=Vo(s.styleClasses.bgClass,i.bgClass||"")),s.styleClasses.textClass&&(i.textClass=Vo(s.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Jo(e.display.measure))),0==o?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return xr&&/\bcm-tab\b/.test(i.content.lastChild.className)&&(i.content.className="cm-tab-wrap-hack"),Os(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=Vo(i.pre.className,i.textClass||"")),i}function Hi(e){var t=zo("span","â€¢","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Bi(e,t,n,i,o,r,s){if(t){var a=e.splitSpaces?t.replace(/ {3,}/g,$i):t,l=e.cm.state.specialChars,c=!1;if(l.test(t))for(var u=document.createDocumentFragment(),h=0;;){l.lastIndex=h;var f=l.exec(t),d=f?f.index-h:t.length-h;if(d){var p=document.createTextNode(a.slice(h,h+d));u.appendChild(yr&&9>wr?zo("span",[p]):p),e.map.push(e.pos,e.pos+d,p),e.col+=d,e.pos+=d}if(!f)break;if(h+=d+1,"	"==f[0]){var g=e.cm.options.tabSize,m=g-e.col%g,p=u.appendChild(zo("span",Oo(m),"cm-tab"));p.setAttribute("role","presentation"),p.setAttribute("cm-text","	"),e.col+=m}else if("\r"==f[0]||"\n"==f[0]){var p=u.appendChild(zo("span","\r"==f[0]?"â":"â¤","cm-invalidchar"));p.setAttribute("cm-text",f[0]),e.col+=1}else{var p=e.cm.options.specialCharPlaceholder(f[0]);p.setAttribute("cm-text",f[0]),u.appendChild(yr&&9>wr?zo("span",[p]):p),e.col+=1}e.map.push(e.pos,e.pos+1,p),e.pos++}else{e.col+=t.length;var u=document.createTextNode(a);e.map.push(e.pos,e.pos+t.length,u),yr&&9>wr&&(c=!0),e.pos+=t.length}if(n||i||o||c||s){var v=n||"";i&&(v+=i),o&&(v+=o);var b=zo("span",[u],v,s);return r&&(b.title=r),e.content.appendChild(b)}e.content.appendChild(u)}}function $i(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":"Â ";return t+=" "}function Wi(e,t){return function(n,i,o,r,s,a,l){o=o?o+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+i.length;;){for(var h=0;h<t.length;h++){var f=t[h];if(f.to>c&&f.from<=c)break}if(f.to>=u)return e(n,i,o,r,s,a,l);e(n,i.slice(0,f.to-c),o,r,null,a,l),r=null,i=i.slice(f.to-c),c=f.to}}}function zi(e,t,n,i){var o=!i&&n.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!i&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",n.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t}function qi(e,t,n){var i=e.markedSpans,o=e.text,r=0;if(i)for(var s,a,l,c,u,h,f,d=o.length,p=0,g=1,m="",v=0;;){if(v==p){l=c=u=h=a="",f=null,v=1/0;for(var b,y=[],w=0;w<i.length;++w){var x=i[w],C=x.marker;"bookmark"==C.type&&x.from==p&&C.widgetNode?y.push(C):x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),C.className&&(l+=" "+C.className),C.css&&(a=(a?a+";":"")+C.css),C.startStyle&&x.from==p&&(u+=" "+C.startStyle),C.endStyle&&x.to==v&&(b||(b=[])).push(C.endStyle,x.to),C.title&&!h&&(h=C.title),C.collapsed&&(!f||di(f.marker,C)<0)&&(f=x)):x.from>p&&v>x.from&&(v=x.from)}if(b)for(var w=0;w<b.length;w+=2)b[w+1]==v&&(c+=" "+b[w]);if(!f||f.from==p)for(var w=0;w<y.length;++w)zi(t,0,y[w]);if(f&&(f.from||0)==p){if(zi(t,(null==f.to?d+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=d)break;for(var k=Math.min(d,v);;){if(m){var S=p+m.length;if(!f){var _=S>k?m.slice(0,k-p):m;t.addToken(t,_,s?s+l:l,u,p+_.length==v?c:"",h,a)}if(S>=k){m=m.slice(k-p),p=k;break}p=S,u=""}m=o.slice(r,r=n[g++]),s=ji(n[g++],t.cm.options)}}else for(var g=1;g<n.length;g+=2)t.addToken(t,o.slice(r,r=n[g]),ji(n[g+1],t.cm.options))}function Ui(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Po(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Gi(e,t,n,i){function o(e){return n?n[e]:null}function r(e,n,o){Ei(e,n,o,i),_o(e,"change",e,t)}function s(e,t){for(var n=e,r=[];t>n;++n)r.push(new ys(c[n],o(n),i));return r}var a=t.from,l=t.to,c=t.text,u=Yi(e,a.line),h=Yi(e,l.line),f=Po(c),d=o(c.length-1),p=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(Ui(e,t)){var g=s(0,c.length-1);r(h,h.text,d),p&&e.remove(a.line,p),g.length&&e.insert(a.line,g)}else if(u==h)if(1==c.length)r(u,u.text.slice(0,a.ch)+f+u.text.slice(l.ch),d);else{var g=s(1,c.length-1);g.push(new ys(f+u.text.slice(l.ch),d,i)),r(u,u.text.slice(0,a.ch)+c[0],o(0)),e.insert(a.line+1,g)}else if(1==c.length)r(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),o(0)),e.remove(a.line+1,p);else{r(u,u.text.slice(0,a.ch)+c[0],o(0)),r(h,f+h.text.slice(l.ch),d);var g=s(1,c.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,g)}_o(e,"change",e,t)}function Ki(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Vi(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var o=e[i];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function Xi(e,t,n){function i(e,o,r){if(e.linked)for(var s=0;s<e.linked.length;++s){var a=e.linked[s];if(a.doc!=o){var l=r&&a.sharedHist;(!n||l)&&(t(a.doc,l),i(a.doc,e,l))}}}i(e,null,!0)}function Qi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,s(e),n(e),e.options.lineWrapping||f(e),e.options.mode=t.modeOption,It(e)}function Yi(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var o=n.children[i],r=o.chunkSize();if(r>t){n=o;break}t-=r}return n.lines[t]}function Ji(e,t,n){var i=[],o=t.line;return e.iter(t.line,n.line+1,function(e){var r=e.text;o==n.line&&(r=r.slice(0,n.ch)),o==t.line&&(r=r.slice(t.ch)),i.push(r),++o}),i}function Zi(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function eo(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function to(e){if(null==e.parent)return null;for(var t=e.parent,n=Mo(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var o=0;i.children[o]!=t;++o)n+=i.children[o].chunkSize();return n+t.first}function no(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var o=e.children[i],r=o.height;if(r>t){e=o;continue e}t-=r,n+=o.chunkSize()}return n}while(!e.lines);for(var i=0;i<e.lines.length;++i){var s=e.lines[i],a=s.height;if(a>t)break;t-=a}return n+i}function io(e){e=bi(e);for(var t=0,n=e.parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==e)break;t+=o.height}for(var r=n.parent;r;n=r,r=n.parent)for(var i=0;i<r.children.length;++i){var s=r.children[i];if(s==n)break;t+=s.height}return t}function oo(e){var t=e.order;return null==t&&(t=e.order=sa(e.text)),t}function ro(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function so(e,t){var n={from:K(t.from),to:Jr(t),text:Ji(e,t.from,t.to)};return po(e,n,t.from.line,t.to.line+1),Xi(e,function(e){po(e,n,t.from.line,t.to.line+1)},!0),n}function ao(e){for(;e.length;){var t=Po(e);if(!t.ranges)break;e.pop()}}function lo(e,t){return t?(ao(e.done),Po(e.done)):e.done.length&&!Po(e.done).ranges?Po(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Po(e.done)):void 0}function co(e,t,n,i){var o=e.history;o.undone.length=0;var r,s=+new Date;if((o.lastOp==i||o.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&o.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(r=lo(o,o.lastOp==i))){var a=Po(r.changes);0==Rr(t.from,t.to)&&0==Rr(t.from,a.to)?a.to=Jr(t):r.changes.push(so(e,t))}else{var l=Po(o.done);for(l&&l.ranges||fo(e.sel,o.done),r={changes:[so(e,t)],generation:o.generation},o.done.push(r);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(n),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=s,o.lastOp=o.lastSelOp=i,o.lastOrigin=o.lastSelOrigin=t.origin,a||Os(e,"historyAdded")}function uo(e,t,n,i){var o=t.charAt(0);return"*"==o||"+"==o&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function ho(e,t,n,i){var o=e.history,r=i&&i.origin;n==o.lastSelOp||r&&o.lastSelOrigin==r&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==r||uo(e,r,Po(o.done),t))?o.done[o.done.length-1]=t:fo(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=r,o.lastSelOp=n,i&&i.clearRedo!==!1&&ao(o.undone)}function fo(e,t){var n=Po(t);n&&n.ranges&&n.equals(e)||t.push(e)}function po(e,t,n,i){var o=t["spans_"+e.id],r=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((o||(o=t["spans_"+e.id]={}))[r]=n.markedSpans),++r})}function go(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function mo(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=0,o=[];i<t.text.length;++i)o.push(go(n[i]));return o}function vo(e,t,n){for(var i=0,o=[];i<e.length;++i){var r=e[i];if(r.ranges)o.push(n?ue.prototype.deepCopy.call(r):r);else{var s=r.changes,a=[];o.push({changes:a});for(var l=0;l<s.length;++l){var c,u=s[l];if(a.push({from:u.from,to:u.to,text:u.text}),t)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&Mo(t,Number(c[1]))>-1&&(Po(a)[h]=u[h],delete u[h])}}}return o}function bo(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function yo(e,t,n,i){for(var o=0;o<e.length;++o){var r=e[o],s=!0;if(r.ranges){r.copied||(r=e[o]=r.deepCopy(),r.copied=!0);for(var a=0;a<r.ranges.length;a++)bo(r.ranges[a].anchor,t,n,i),bo(r.ranges[a].head,t,n,i)}else{for(var a=0;a<r.changes.length;++a){var l=r.changes[a];if(n<l.from.line)l.from=jr(l.from.line+i,l.from.ch),l.to=jr(l.to.line+i,l.to.ch);else if(t<=l.to.line){s=!1;break}}s||(e.splice(0,o+1),o=0)}}}function wo(e,t){var n=t.from.line,i=t.to.line,o=t.text.length-(i-n)-1;yo(e.done,n,i,o),yo(e.undone,n,i,o)}function xo(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Co(e){return e.target||e.srcElement}function ko(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Lr&&e.ctrlKey&&1==t&&(t=3),t}function So(e,t,n){var i=e._handlers&&e._handlers[t];return n?i&&i.length>0?i.slice():Ls:i||Ls}function _o(e,t){function n(e){return function(){e.apply(null,r)}}var i=So(e,t,!1);if(i.length){var o,r=Array.prototype.slice.call(arguments,2);qr?o=qr.delayedCallbacks:Ps?o=Ps:(o=Ps=[],setTimeout(To,0));for(var s=0;s<i.length;++s)o.push(n(i[s]))}}function To(){var e=Ps;Ps=null;for(var t=0;t<e.length;++t)e[t]()}function Eo(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Os(e,n||t.type,e,t),xo(t)||t.codemirrorIgnore}function Ao(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==Mo(n,t[i])&&n.push(t[i])}function No(e,t){return So(e,t).length>0}function Lo(e){e.prototype.on=function(e,t){Ns(this,e,t)},e.prototype.off=function(e,t){Ds(this,e,t)}}function Do(){this.id=null}function Oo(e){for(;$s.length<=e;)$s.push(Po($s)+" ");return $s[e]}function Po(e){return e[e.length-1]}function Mo(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function Io(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Fo(){}function jo(e,t){var n;return Object.create?n=Object.create(e):(Fo.prototype=e,n=new Fo),t&&Ro(t,n),n}function Ro(e,t,n){t||(t={});for(var i in e)!e.hasOwnProperty(i)||n===!1&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function Ho(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Bo(e,t){return t?t.source.indexOf("\\w")>-1&&Us(e)?!0:t.test(e):Us(e)}function $o(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Wo(e){return e.charCodeAt(0)>=768&&Gs.test(e)}function zo(e,t,n,i){var o=document.createElement(e);if(n&&(o.className=n),i&&(o.style.cssText=i),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var r=0;r<t.length;++r)o.appendChild(t[r]);return o}function qo(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Uo(e,t){return qo(e).appendChild(t)}function Go(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function Ko(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Vo(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!Ko(n[i]).test(t)&&(t+=" "+n[i]);return t}function Xo(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&e(i)}}function Qo(){Js||(Yo(),Js=!0)}function Yo(){var e;Ns(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Xo(qt)},100))}),Ns(window,"blur",function(){Xo(bn)})}function Jo(e){if(null==Vs){var t=zo("span","â€‹");Uo(e,zo("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Vs=t.offsetWidth<=1&&t.offsetHeight>2&&!(yr&&8>wr))}var n=Vs?zo("span","â€‹"):zo("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Zo(e){if(null!=Xs)return Xs;var t=Uo(e,document.createTextNode("AØ®A")),n=zs(t,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var i=zs(t,1,2).getBoundingClientRect();return Xs=i.right-n.right<3}function er(e){if(null!=ia)return ia;var t=Uo(e,zo("span","x")),n=t.getBoundingClientRect(),i=zs(t,0,1).getBoundingClientRect();return ia=Math.abs(n.left-i.left)>1}function tr(e,t,n,i){if(!e)return i(t,n,"ltr");for(var o=!1,r=0;r<e.length;++r){var s=e[r];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr"),o=!0)}o||i(t,n,"ltr")}function nr(e){return e.level%2?e.to:e.from}function ir(e){return e.level%2?e.from:e.to}function or(e){var t=oo(e);return t?nr(t[0]):0}function rr(e){var t=oo(e);return t?ir(Po(t)):e.text.length}function sr(e,t){var n=Yi(e.doc,t),i=bi(n);i!=n&&(t=to(i));var o=oo(i),r=o?o[0].level%2?rr(i):or(i):0;return jr(t,r)}function ar(e,t){for(var n,i=Yi(e.doc,t);n=mi(i);)i=n.find(1,!0).line,t=null;var o=oo(i),r=o?o[0].level%2?or(i):rr(i):i.text.length;return jr(null==t?to(i):t,r)}function lr(e,t){var n=sr(e,t.line),i=Yi(e.doc,n.line),o=oo(i);if(!o||0==o[0].level){var r=Math.max(0,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=r&&t.ch;return jr(n.line,s?0:r)}return n}function cr(e,t,n){var i=e[0].level;return t==i?!0:n==i?!1:n>t}function ur(e,t){ra=null;for(var n,i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;if(o.from==t||o.to==t){if(null!=n)return cr(e,o.level,e[n].level)?(o.from!=o.to&&(ra=n),i):(o.from!=o.to&&(ra=i),n);n=i}}return n}function hr(e,t,n,i){if(!i)return t+n;do t+=n;while(t>0&&Wo(e.text.charAt(t)));return t}function fr(e,t,n,i){var o=oo(e);if(!o)return dr(e,t,n,i);for(var r=ur(o,t),s=o[r],a=hr(e,t,s.level%2?-n:n,i);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return ur(o,a)==r?a:(s=o[r+=n],n>0==s.level%2?s.to:s.from);if(s=o[r+=n],!s)return null;a=n>0==s.level%2?hr(e,s.to,-1,i):hr(e,s.from,1,i)}}function dr(e,t,n,i){var o=t+n;if(i)for(;o>0&&Wo(e.text.charAt(o));)o+=n;return 0>o||o>e.text.length?null:o}var pr=navigator.userAgent,gr=navigator.platform,mr=/gecko\/\d/i.test(pr),vr=/MSIE \d/.test(pr),br=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pr),yr=vr||br,wr=yr&&(vr?document.documentMode||6:br[1]),xr=/WebKit\//.test(pr),Cr=xr&&/Qt\/\d+\.\d+/.test(pr),kr=/Chrome\//.test(pr),Sr=/Opera\//.test(pr),_r=/Apple Computer/.test(navigator.vendor),Tr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(pr),Er=/PhantomJS/.test(pr),Ar=/AppleWebKit/.test(pr)&&/Mobile\/\w+/.test(pr),Nr=Ar||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(pr),Lr=Ar||/Mac/.test(gr),Dr=/win/i.test(gr),Or=Sr&&pr.match(/Version\/(\d*\.\d*)/);Or&&(Or=Number(Or[1])),Or&&Or>=15&&(Sr=!1,xr=!0);var Pr=Lr&&(Cr||Sr&&(null==Or||12.11>Or)),Mr=mr||yr&&wr>=9,Ir=!1,Fr=!1;g.prototype=Ro({update:function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var o=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var r=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+r+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=Lr&&!Tr?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Do,this.disableVert=new Do},enableZeroWidthBar:function(e,t){function n(){var i=e.getBoundingClientRect(),o=document.elementFromPoint(i.left+1,i.bottom-1);o!=e?e.style.pointerEvents="none":t.set(1e3,n)}e.style.pointerEvents="auto",t.set(1e3,n)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},g.prototype),m.prototype=Ro({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},m.prototype),e.scrollbarModel={"native":g,"null":m},_.prototype.signal=function(e,t){No(e,t)&&this.events.push(arguments)},_.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Os.apply(null,this.events[e])};var jr=e.Pos=function(e,t){return this instanceof jr?(this.line=e,void(this.ch=t)):new jr(e,t)},Rr=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Hr=null;ne.prototype=Ro({init:function(e){function t(e){if(!Eo(i,e)){if(i.somethingSelected())Hr=i.getSelections(),n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,r.value=Hr.join("\n"),Ws(r));else{if(!i.options.lineWiseCopyCut)return;var t=ee(i);Hr=t.text,"cut"==e.type?i.setSelections(t.ranges,null,Fs):(n.prevInput="",r.value=t.text.join("\n"),Ws(r))}"cut"==e.type&&(i.state.cutIncoming=!0)}}var n=this,i=this.cm,o=this.wrapper=ie(),r=this.textarea=o.firstChild;e.wrapper.insertBefore(o,e.wrapper.firstChild),Ar&&(r.style.width="0px"),Ns(r,"input",function(){yr&&wr>=9&&n.hasSelection&&(n.hasSelection=null),n.poll()}),Ns(r,"paste",function(e){Eo(i,e)||J(e,i)||(i.state.pasteIncoming=!0,n.fastPoll())}),Ns(r,"cut",t),Ns(r,"copy",t),Ns(e.scroller,"paste",function(t){Ut(e,t)||Eo(i,t)||(i.state.pasteIncoming=!0,n.focus())}),Ns(e.lineSpace,"selectstart",function(t){Ut(e,t)||Ts(t)}),Ns(r,"compositionstart",function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),Ns(r,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,n=e.doc,i=Ie(e);if(e.options.moveInputWithCursor){var o=dt(e,n.sel.primary().head,"div"),r=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+s.top-r.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+s.left-r.left))}return i},showSelection:function(e){var t=this.cm,n=t.display;Uo(n.cursorDiv,e.cursors),Uo(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,n,i=this.cm,o=i.doc;if(i.somethingSelected()){this.prevInput="";var r=o.sel.primary();t=na&&(r.to().line-r.from().line>100||(n=i.getSelection()).length>1e3);var s=t?"-":n||i.getSelection();this.textarea.value=s,i.state.focused&&Ws(this.textarea),yr&&wr>=9&&(this.hasSelection=s)}else e||(this.prevInput=this.textarea.value="",yr&&wr>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Nr||Go()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){var i=n.poll();i||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||ta(t)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=t.value;if(i==n&&!e.somethingSelected())return!1;if(yr&&wr>=9&&this.hasSelection===i||Lr&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||n||(n="â€‹"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var r=0,s=Math.min(n.length,i.length);s>r&&n.charCodeAt(r)==i.charCodeAt(r);)++r;var a=this;return Nt(e,function(){Y(e,i.slice(r),n.length-r,null,a.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?t.value=a.prevInput="":a.prevInput=i,a.composing&&(a.composing.range.clear(),a.composing.range=e.markText(a.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){yr&&wr>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=s.selectionStart){var e=o.somethingSelected(),t="â€‹"+(e?s.value:"");s.value="â‡š",s.value=t,i.prevInput=e?"":"â€‹",s.selectionStart=1,s.selectionEnd=t.length,r.selForContextMenu=o.doc.sel}}function n(){if(i.contextMenuPending=!1,i.wrapper.style.cssText=h,s.style.cssText=u,yr&&9>wr&&r.scrollbars.setScrollTop(r.scroller.scrollTop=l),null!=s.selectionStart){(!yr||yr&&9>wr)&&t();var e=0,n=function(){r.selForContextMenu==o.doc.sel&&0==s.selectionStart&&s.selectionEnd>0&&"â€‹"==i.prevInput?Lt(o,cs.selectAll)(o):e++<10?r.detectingSelectAll=setTimeout(n,500):r.input.reset()};r.detectingSelectAll=setTimeout(n,200)}}var i=this,o=i.cm,r=o.display,s=i.textarea,a=Gt(o,e),l=r.scroller.scrollTop;if(a&&!Sr){var c=o.options.resetSelectionOnContextMenu;c&&-1==o.doc.sel.contains(a)&&Lt(o,Te)(o.doc,de(a),Fs);var u=s.style.cssText,h=i.wrapper.style.cssText;i.wrapper.style.cssText="position: absolute";var f=i.wrapper.getBoundingClientRect();if(s.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px; z-index: 1000; background: "+(yr?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",xr)var d=window.scrollY;if(r.input.focus(),xr&&window.scrollTo(null,d),r.input.reset(),o.somethingSelected()||(s.value=i.prevInput=" "),i.contextMenuPending=!0,r.selForContextMenu=o.doc.sel,clearTimeout(r.detectingSelectAll),yr&&wr>=9&&t(),Mr){As(e);var p=function(){Ds(window,"mouseup",p),setTimeout(n,20)};Ns(window,"mouseup",p)}else setTimeout(n,50)}},readOnlyChanged:function(e){e||this.reset()},setUneditable:Fo,needsContentAttribute:!1},ne.prototype),oe.prototype=Ro({init:function(e){function t(e){if(!Eo(i,e)){if(i.somethingSelected())Hr=i.getSelections(),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=ee(i);Hr=t.text,"cut"==e.type&&i.operation(function(){
i.setSelections(t.ranges,0,Fs),i.replaceSelection("",null,"cut")})}if(e.clipboardData&&!Ar)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Hr.join("\n"));else{var n=ie(),o=n.firstChild;i.display.lineSpace.insertBefore(n,i.display.lineSpace.firstChild),o.value=Hr.join("\n");var r=document.activeElement;Ws(o),setTimeout(function(){i.display.lineSpace.removeChild(n),r.focus()},50)}}}var n=this,i=n.cm,o=n.div=e.lineDiv;te(o),Ns(o,"paste",function(e){Eo(i,e)||J(e,i)}),Ns(o,"compositionstart",function(e){var t=e.data;if(n.composing={sel:i.doc.sel,data:t,startData:t},t){var o=i.doc.sel.primary(),r=i.getLine(o.head.line),s=r.indexOf(t,Math.max(0,o.head.ch-t.length));s>-1&&s<=o.head.ch&&(n.composing.sel=de(jr(o.head.line,s),jr(o.head.line,s+t.length)))}}),Ns(o,"compositionupdate",function(e){n.composing.data=e.data}),Ns(o,"compositionend",function(e){var t=n.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||n.applyComposition(t),n.composing==t&&(n.composing=null)},50))}),Ns(o,"touchstart",function(){n.forceCompositionEnd()}),Ns(o,"input",function(){n.composing||(i.isReadOnly()||!n.pollContent())&&Nt(n.cm,function(){It(i)})}),Ns(o,"copy",t),Ns(o,"cut",t)},prepareSelection:function(){var e=Ie(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=ae(this.cm,e.anchorNode,e.anchorOffset),i=ae(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!i||i.bad||0!=Rr(X(n,i),t.from())||0!=Rr(V(n,i),t.to())){var o=re(this.cm,t.from()),r=re(this.cm,t.to());if(o||r){var s=this.cm.display.view,a=e.rangeCount&&e.getRangeAt(0);if(o){if(!r){var l=s[s.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;r={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else o={node:s[0].measure.map[2],offset:0};try{var u=zs(o.node,o.offset,r.offset,r.node)}catch(h){}u&&(!mr&&this.cm.state.focused?(e.collapse(o.node,o.offset),u.collapsed||e.addRange(u)):(e.removeAllRanges(),e.addRange(u)),a&&null==e.anchorNode?e.addRange(a):mr&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){Uo(this.cm.display.cursorDiv,e.cursors),Uo(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Ks(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():Nt(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var n=ae(t,e.anchorNode,e.anchorOffset),i=ae(t,e.focusNode,e.focusOffset);n&&i&&Nt(t,function(){Te(t.doc,de(n,i),Fs),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,n=e.doc.sel.primary(),i=n.from(),o=n.to();if(i.line<t.viewFrom||o.line>t.viewTo-1)return!1;var r;if(i.line==t.viewFrom||0==(r=Rt(e,i.line)))var s=to(t.view[0].line),a=t.view[0].node;else var s=to(t.view[r].line),a=t.view[r-1].node.nextSibling;var l=Rt(e,o.line);if(l==t.view.length-1)var c=t.viewTo-1,u=t.lineDiv.lastChild;else var c=to(t.view[l+1].line)-1,u=t.view[l+1].node.previousSibling;for(var h=e.doc.splitLines(ce(e,a,u,s,c)),f=Ji(e.doc,jr(s,0),jr(c,Yi(e.doc,c).text.length));h.length>1&&f.length>1;)if(Po(h)==Po(f))h.pop(),f.pop(),c--;else{if(h[0]!=f[0])break;h.shift(),f.shift(),s++}for(var d=0,p=0,g=h[0],m=f[0],v=Math.min(g.length,m.length);v>d&&g.charCodeAt(d)==m.charCodeAt(d);)++d;for(var b=Po(h),y=Po(f),w=Math.min(b.length-(1==h.length?d:0),y.length-(1==f.length?d:0));w>p&&b.charCodeAt(b.length-p-1)==y.charCodeAt(y.length-p-1);)++p;h[h.length-1]=b.slice(0,b.length-p),h[0]=h[0].slice(d);var x=jr(s,d),C=jr(c,f.length?Po(f).length-p:0);return h.length>1||h[0]||Rr(x,C)?(On(e.doc,h,x,C,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?Lt(this.cm,It)(this.cm):e.data&&e.data!=e.startData&&Lt(this.cm,Y)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||Lt(this.cm,Y)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:Fo,resetPosition:Fo,needsContentAttribute:!0},oe.prototype),e.inputStyles={textarea:ne,contenteditable:oe},ue.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(0!=Rr(n.anchor,i.anchor)||0!=Rr(n.head,i.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new he(K(this.ranges[t].anchor),K(this.ranges[t].head));return new ue(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(Rr(t,i.from())>=0&&Rr(e,i.to())<=0)return n}return-1}},he.prototype={from:function(){return X(this.anchor,this.head)},to:function(){return V(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Br,$r,Wr,zr={left:0,right:0,top:0,bottom:0},qr=null,Ur=0,Gr=0,Kr=0,Vr=null;yr?Vr=-.53:mr?Vr=15:kr?Vr=-.7:_r&&(Vr=-1/3);var Xr=function(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}};e.wheelEventPixels=function(e){var t=Xr(e);return t.x*=Vr,t.y*=Vr,t};var Qr=new Do,Yr=null,Jr=e.changeEnd=function(e){return e.text?jr(e.from.line+e.text.length-1,Po(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,i=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,es.hasOwnProperty(e)&&Lt(this,es[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Kn(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Dt(function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,It(this)}),removeOverlay:Dt(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void It(this)}}),indentLine:Dt(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ve(this.doc,e)&&Bn(this,e,t,n)}),indentSelection:Dt(function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var o=t[i];if(o.empty())o.head.line>n&&(Bn(this,o.head.line,e,!0),n=o.head.line,i==this.doc.sel.primIndex&&Rn(this));else{var r=o.from(),s=o.to(),a=Math.max(n,r.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;n>l;++l)Bn(this,l,e);var c=this.doc.sel.ranges;0==r.ch&&t.length==c.length&&c[i].from().ch>0&&Ce(this.doc,i,new he(r,c[i].to()),Fs)}}}),getTokenAt:function(e,t){return Oi(this,e,t)},getLineTokens:function(e,t){return Oi(this,jr(e),t,!0)},getTokenTypeAt:function(e){e=ge(this.doc,e);var t,n=Ii(this,Yi(this.doc,e.line)),i=0,o=(n.length-1)/2,r=e.ch;if(0==r)t=n[2];else for(;;){var s=i+o>>1;if((s?n[2*s-1]:0)>=r)o=s;else{if(!(n[2*s+1]<r)){t=n[2*s+2];break}i=s+1}}var a=t?t.indexOf("cm-overlay "):-1;return 0>a?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!ss.hasOwnProperty(t))return n;var i=ss[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&n.push(i[o[t]]);else if(o[t])for(var r=0;r<o[t].length;r++){var s=i[o[t][r]];s&&n.push(s)}else o.helperType&&i[o.helperType]?n.push(i[o.helperType]):i[o.name]&&n.push(i[o.name]);for(var r=0;r<i._global.length;r++){var a=i._global[r];a.pred(o,this)&&-1==Mo(n,a.val)&&n.push(a.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=pe(n,null==e?n.first+n.size-1:e),We(this,e+1,t)},cursorCoords:function(e,t){var n,i=this.doc.sel.primary();return n=null==e?i.head:"object"==typeof e?ge(this.doc,e):e?i.from():i.to(),dt(this,n,t||"page")},charCoords:function(e,t){return ft(this,ge(this.doc,e),t||"page")},coordsChar:function(e,t){return e=ht(this,e,t||"page"),mt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=ht(this,{top:e,left:0},t||"page").top,no(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),n=Yi(this.doc,e)}else n=e;return ut(this,n,{top:0,left:0},t||"page").top+(i?this.doc.height-io(n):0)},defaultTextHeight:function(){return bt(this.display)},defaultCharWidth:function(){return yt(this.display)},setGutterMarker:Dt(function(e,t,n){return $n(this.doc,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&$o(i)&&(e.gutterMarkers=null),!0})}),clearGutter:Dt(function(e){var t=this,n=t.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Ft(t,i,"gutter"),$o(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),lineInfo:function(e){if("number"==typeof e){if(!ve(this.doc,e))return null;var t=e;if(e=Yi(this.doc,e),!e)return null}else{var t=to(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,o){var r=this.display;e=dt(this,ge(this.doc,e));var s=e.bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),r.sizer.appendChild(t),"over"==i)s=e.top;else if("above"==i||"near"==i){var l=Math.max(r.wrapper.clientHeight,this.doc.height),c=Math.max(r.sizer.clientWidth,r.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(s=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=s+"px",t.style.left=t.style.right="","right"==o?(a=r.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?a=0:"middle"==o&&(a=(r.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),n&&In(this,a,s,a+t.offsetWidth,s+t.offsetHeight)},triggerOnKeyDown:Dt(fn),triggerOnKeyPress:Dt(gn),triggerOnKeyUp:pn,execCommand:function(e){return cs.hasOwnProperty(e)?cs[e].call(null,this):void 0},triggerElectric:Dt(function(e){Z(this,e)}),findPosH:function(e,t,n,i){var o=1;0>t&&(o=-1,t=-t);for(var r=0,s=ge(this.doc,e);t>r&&(s=zn(this.doc,s,o,n,i),!s.hitSide);++r);return s},moveH:Dt(function(e,t){var n=this;n.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?zn(n.doc,i.head,e,t,n.options.rtlMoveVisually):0>e?i.from():i.to()},Rs)}),deleteH:Dt(function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Wn(this,function(n){var o=zn(i,n.head,e,t,!1);return 0>e?{from:o,to:n.head}:{from:n.head,to:o}})}),findPosV:function(e,t,n,i){var o=1,r=i;0>t&&(o=-1,t=-t);for(var s=0,a=ge(this.doc,e);t>s;++s){var l=dt(this,a,"div");if(null==r?r=l.left:l.left=r,a=qn(this,l,o,n),a.hitSide)break}return a},moveV:Dt(function(e,t){var n=this,i=this.doc,o=[],r=!n.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(s){if(r)return 0>e?s.from():s.to();var a=dt(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),o.push(a.left);var l=qn(n,a,e,t);return"page"==t&&s==i.sel.primary()&&jn(n,null,ft(n,l,"div").top-a.top),l},Rs),o.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=o[s]}),findWordAt:function(e){var t=this.doc,n=Yi(t,e.line).text,i=e.ch,o=e.ch;if(n){var r=this.getHelper(e,"wordChars");(e.xRel<0||o==n.length)&&i?--i:++o;for(var s=n.charAt(i),a=Bo(s,r)?function(e){return Bo(e,r)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Bo(e)};i>0&&a(n.charAt(i-1));)--i;for(;o<n.length&&a(n.charAt(o));)++o}return new he(jr(e.line,i),jr(e.line,o))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Ys(this.display.cursorDiv,"CodeMirror-overwrite"):Qs(this.display.cursorDiv,"CodeMirror-overwrite"),Os(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Go()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Dt(function(e,t){(null!=e||null!=t)&&Hn(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ge(this)-this.display.barHeight,width:e.scrollWidth-Ge(this)-this.display.barWidth,clientHeight:Ve(this),clientWidth:Ke(this)}},scrollIntoView:Dt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:jr(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Hn(this),this.curOp.scrollToPos=e;else{var n=Fn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Dt(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var i=this;null!=e&&(i.display.wrapper.style.width=n(e)),null!=t&&(i.display.wrapper.style.height=n(t)),i.options.lineWrapping&&st(this);var o=i.display.viewFrom;i.doc.iter(o,i.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Ft(i,o,"widget");break}++o}),i.curOp.forceUpdate=!0,Os(i,"refresh",this)}),operation:function(e){return Nt(this,e)},refresh:Dt(function(){var e=this.display.cachedTextHeight;It(this),this.curOp.forceUpdate=!0,at(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),u(this),(null==e||Math.abs(e-bt(this.display))>.5)&&s(this),Os(this,"refresh",this)}),swapDoc:Dt(function(e){var t=this.doc;return t.cm=null,Qi(this,e),at(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,_o(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Lo(e);var Zr=e.defaults={},es=e.optionHandlers={},ts=e.Init={toString:function(){return"CodeMirror.Init"}};Un("value","",function(e,t){e.setValue(t)},!0),Un("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),Un("indentUnit",2,n,!0),Un("indentWithTabs",!1),Un("smartIndent",!0),Un("tabSize",4,function(e){i(e),at(e),It(e)},!0),Un("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter(function(e){for(var o=0;;){var r=e.text.indexOf(t,o);if(-1==r)break;o=r+t.length,n.push(jr(i,r))}i++});for(var o=n.length-1;o>=0;o--)On(e.doc,t,n[o],jr(n[o].line,n[o].ch+t.length))}}),Un("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,n,i){t.state.specialChars=new RegExp(n.source+(n.test("	")?"":"|	"),"g"),i!=e.Init&&t.refresh()}),Un("specialCharPlaceholder",Hi,function(e){e.refresh()},!0),Un("electricChars",!0),Un("inputStyle",Nr?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Un("rtlMoveVisually",!Dr),Un("wholeLineUpdateBefore",!0),Un("theme","default",function(e){a(e),l(e)},!0),Un("keyMap","default",function(t,n,i){var o=Kn(n),r=i!=e.Init&&Kn(i);r&&r.detach&&r.detach(t,o),o.attach&&o.attach(t,r||null)}),Un("extraKeys",null),Un("lineWrapping",!1,o,!0),Un("gutters",[],function(e){d(e.options),l(e)},!0),Un("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?S(e.display)+"px":"0",e.refresh()},!0),Un("coverGutterNextToScrollbar",!1,function(e){b(e)},!0),Un("scrollbarStyle","native",function(e){v(e),b(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Un("lineNumbers",!1,function(e){d(e.options),l(e)},!0),Un("firstLineNumber",1,l,!0),Un("lineNumberFormatter",function(e){return e},l,!0),Un("showCursorWhenSelecting",!1,Me,!0),Un("resetSelectionOnContextMenu",!0),Un("lineWiseCopyCut",!0),Un("readOnly",!1,function(e,t){"nocursor"==t?(bn(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),Un("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Un("dragDrop",!0,zt),Un("allowDropFileTypes",null),Un("cursorBlinkRate",530),Un("cursorScrollMargin",0),Un("cursorHeight",1,Me,!0),Un("singleCursorHeightPerLine",!0,Me,!0),Un("workTime",100),Un("workDelay",100),Un("flattenSpans",!0,i,!0),Un("addModeClass",!1,i,!0),Un("pollInterval",100),Un("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Un("historyEventDelay",1250),Un("viewportMargin",10,function(e){e.refresh()},!0),Un("maxHighlightLength",1e4,i,!0),Un("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Un("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),Un("autofocus",null);var ns=e.modes={},is=e.mimeModes={};e.defineMode=function(t,n){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),ns[t]=n},e.defineMIME=function(e,t){is[e]=t},e.resolveMode=function(t){if("string"==typeof t&&is.hasOwnProperty(t))t=is[t];else if(t&&"string"==typeof t.name&&is.hasOwnProperty(t.name)){var n=is[t.name];"string"==typeof n&&(n={name:n}),t=jo(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),i=ns[n.name];if(!i)return e.getMode(t,"text/plain");var o=i(t,n);if(os.hasOwnProperty(n.name)){var r=os[n.name];for(var s in r)r.hasOwnProperty(s)&&(o.hasOwnProperty(s)&&(o["_"+s]=o[s]),o[s]=r[s])}if(o.name=n.name,n.helperType&&(o.helperType=n.helperType),n.modeProps)for(var s in n.modeProps)o[s]=n.modeProps[s];return o},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var os=e.modeExtensions={};e.extendMode=function(e,t){var n=os.hasOwnProperty(e)?os[e]:os[e]={};Ro(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){ks.prototype[e]=t},e.defineOption=Un;var rs=[];e.defineInitHook=function(e){rs.push(e)};var ss=e.helpers={};e.registerHelper=function(t,n,i){ss.hasOwnProperty(t)||(ss[t]=e[t]={_global:[]}),ss[t][n]=i},e.registerGlobalHelper=function(t,n,i,o){e.registerHelper(t,n,o),ss[t]._global.push({pred:i,val:o})};var as=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var o=t[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n},ls=e.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var cs=e.commands={selectAll:function(e){e.setSelection(jr(e.firstLine(),0),jr(e.lastLine()),Fs)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Fs)},killLine:function(e){Wn(e,function(t){if(t.empty()){var n=Yi(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:jr(t.head.line+1,0)}:{from:t.head,to:jr(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Wn(e,function(t){return{from:jr(t.from().line,0),to:ge(e.doc,jr(t.to().line+1,0))}})},delLineLeft:function(e){Wn(e,function(e){return{from:jr(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Wn(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return{from:i,to:t.from()}})},delWrappedLineRight:function(e){Wn(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(jr(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(jr(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return sr(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return lr(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return ar(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Rs)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Rs)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?lr(e,t.head):i},Rs)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,o=0;o<n.length;o++){var r=n[o].from(),s=Hs(e.getLine(r.line),r.ch,i);t.push(new Array(i-s%i+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Nt(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var o=t[i].head,r=Yi(e.doc,o.line).text;if(r)if(o.ch==r.length&&(o=new jr(o.line,o.ch-1)),o.ch>0)o=new jr(o.line,o.ch+1),e.replaceRange(r.charAt(o.ch-1)+r.charAt(o.ch-2),jr(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var s=Yi(e.doc,o.line-1).text;s&&e.replaceRange(r.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),jr(o.line-1,s.length-1),jr(o.line,1),"+transpose")}n.push(new he(o,o))}e.setSelections(n)})},newlineAndIndent:function(e){Nt(e,function(){for(var t=e.listSelections().length,n=0;t>n;n++){var i=e.listSelections()[n];e.replaceRange(e.doc.lineSeparator(),i.anchor,i.head,"+input"),e.indentLine(i.from().line+1,null,!0)}Rn(e)})},toggleOverwrite:function(e){e.toggleOverwrite()}},us=e.keyMap={};us.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},us.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},us.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},us.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},us["default"]=Lr?us.macDefault:us.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var o=Io(n.split(" "),Gn),r=0;r<o.length;r++){var s,a;r==o.length-1?(a=o.join(" "),s=i):(a=o.slice(0,r+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var c in t)e[c]=t[c];return e};var hs=e.lookupKey=function(e,t,n,i){t=Kn(t);var o=t.call?t.call(e,i):t[e];if(o===!1)return"nothing";if("..."===o)return"multi";if(null!=o&&n(o))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return hs(e,t.fallthrough,n,i);for(var r=0;r<t.fallthrough.length;r++){var s=hs(e,t.fallthrough[r],n,i);if(s)return s}}},fs=e.isModifierKey=function(e){var t="string"==typeof e?e:oa[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},ds=e.keyName=function(e,t){if(Sr&&34==e.keyCode&&e["char"])return!1;var n=oa[e.keyCode],i=n;return null==i||e.altGraphKey?!1:(e.altKey&&"Alt"!=n&&(i="Alt-"+i),(Pr?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(i="Ctrl-"+i),(Pr?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(i="Cmd-"+i),!t&&e.shiftKey&&"Shift"!=n&&(i="Shift-"+i),i)};e.fromTextArea=function(t,n){function i(){t.value=c.getValue()}if(n=n?Ro(n):{},n.value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var o=Go();n.autofocus=o==t||null!=t.getAttribute("autofocus")&&o==document.body}if(t.form&&(Ns(t.form,"submit",i),!n.leaveSubmitMethodAlone)){var r=t.form,s=r.submit;try{var a=r.submit=function(){i(),r.submit=s,r.submit(),r.submit=a}}catch(l){}}n.finishInit=function(e){e.save=i,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,i(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Ds(t.form,"submit",i),"function"==typeof t.form.submit&&(t.form.submit=s))}},t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c};var ps=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};ps.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Hs(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Hs(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Hs(this.string,null,this.tabSize)-(this.lineStart?Hs(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var o=function(e){return n?e.toLowerCase():e},r=this.string.substr(this.pos,e.length);return o(r)==o(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var gs=0,ms=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++gs};Lo(ms),ms.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&wt(e),No(this,"clear")){var n=this.find();n&&_o(this,"clear",n.from,n.to)}for(var i=null,o=null,r=0;r<this.lines.length;++r){var s=this.lines[r],a=ei(s.markedSpans,this);e&&!this.collapsed?Ft(e,to(s),"text"):e&&(null!=a.to&&(o=to(s)),null!=a.from&&(i=to(s))),
s.markedSpans=ti(s.markedSpans,a),null==a.from&&this.collapsed&&!Ci(this.doc,s)&&e&&eo(s,bt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var r=0;r<this.lines.length;++r){var l=bi(this.lines[r]),c=h(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&It(e,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ne(e.doc)),e&&_o(e,"markerCleared",e,this),t&&Ct(e),this.parent&&this.parent.clear()}},ms.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,o=0;o<this.lines.length;++o){var r=this.lines[o],s=ei(r.markedSpans,this);if(null!=s.from&&(n=jr(t?r:to(r),s.from),-1==e))return n;if(null!=s.to&&(i=jr(t?r:to(r),s.to),1==e))return i}return n&&{from:n,to:i}},ms.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&Nt(n,function(){var i=e.line,o=to(e.line),r=Ze(n,o);if(r&&(rt(r),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Ci(t.doc,i)&&null!=t.height){var s=t.height;t.height=null;var a=_i(t)-s;a&&eo(i,i.height+a)}})},ms.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Mo(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ms.prototype.detachLine=function(e){if(this.lines.splice(Mo(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var gs=0,vs=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Lo(vs),vs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();_o(this,"clear")}},vs.prototype.find=function(e,t){return this.primary.find(e,t)};var bs=e.LineWidget=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};Lo(bs),bs.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=to(n);if(null!=i&&t){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(n.widgets=null);var r=_i(this);eo(n,Math.max(0,n.height-r)),e&&Nt(e,function(){Si(e,n,-r),Ft(e,i,"widget")})}},bs.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var i=_i(this)-e;i&&(eo(n,n.height+i),t&&Nt(t,function(){t.curOp.forceUpdate=!0,Si(t,n,i)}))};var ys=e.Line=function(e,t,n){this.text=e,ui(this,t),this.height=n?n(this):1};Lo(ys),ys.prototype.lineNo=function(){return to(this)};var ws={},xs={};Ki.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;i>n;++n){var o=this.lines[n];this.height-=o.height,Ai(o),_o(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},Vi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(o>e){var r=Math.min(t,o-e),s=i.height;if(i.removeInner(e,r),this.height-=s-i.height,o==r&&(this.children.splice(n--,1),i.parent=null),0==(t-=r))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ki))){var a=[];this.collapse(a),this.children=[new Ki(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var o=this.children[i],r=o.chunkSize();if(r>=e){if(o.insertInner(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var s=o.lines.splice(o.lines.length-25,25),a=new Ki(s);o.height-=a.height,this.children.splice(i+1,0,a),a.parent=this}this.maybeSpill()}break}e-=r}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Vi(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=Mo(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var o=new Vi(e.children);o.parent=e,e.children=[o,n],e=o}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var o=this.children[i],r=o.chunkSize();if(r>e){var s=Math.min(t,r-e);if(o.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=r}}};var Cs=0,ks=e.Doc=function(e,t,n,i){if(!(this instanceof ks))return new ks(e,t,n,i);null==n&&(n=0),Vi.call(this,[new Ki([new ys("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var o=jr(n,0);this.sel=de(o),this.history=new ro(null),this.id=++Cs,this.modeOption=t,this.lineSep=i,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Gi(this,{from:o,to:o,text:e}),Te(this,de(o),Fs)};ks.prototype=jo(Vi.prototype,{constructor:ks,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Zi(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Ot(function(e){var t=jr(this.first,0),n=this.first+this.size-1;Tn(this,{from:t,to:jr(n,Yi(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Te(this,de(t))}),replaceRange:function(e,t,n,i){t=ge(this,t),n=n?ge(this,n):t,On(this,e,t,n,i)},getRange:function(e,t,n){var i=Ji(this,ge(this,e),ge(this,t));return n===!1?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return ve(this,e)?Yi(this,e):void 0},getLineNumber:function(e){return to(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Yi(this,e)),bi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ge(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ot(function(e,t,n){ke(this,ge(this,"number"==typeof e?jr(e,t||0):e),null,n)}),setSelection:Ot(function(e,t,n){ke(this,ge(this,e),ge(this,t||e),n)}),extendSelection:Ot(function(e,t,n){we(this,ge(this,e),t&&ge(this,t),n)}),extendSelections:Ot(function(e,t){xe(this,be(this,e),t)}),extendSelectionsBy:Ot(function(e,t){var n=Io(this.sel.ranges,e);xe(this,be(this,n),t)}),setSelections:Ot(function(e,t,n){if(e.length){for(var i=0,o=[];i<e.length;i++)o[i]=new he(ge(this,e[i].anchor),ge(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Te(this,fe(o,t),n)}}),addSelection:Ot(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new he(ge(this,e),ge(this,t||e))),Te(this,fe(i,i.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var o=Ji(this,n[i].from(),n[i].to());t=t?t.concat(o):o}return e===!1?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var o=Ji(this,n[i].from(),n[i].to());e!==!1&&(o=o.join(e||this.lineSeparator())),t[i]=o}return t},replaceSelection:function(e,t,n){for(var i=[],o=0;o<this.sel.ranges.length;o++)i[o]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Ot(function(e,t,n){for(var i=[],o=this.sel,r=0;r<o.ranges.length;r++){var s=o.ranges[r];i[r]={from:s.from(),to:s.to(),text:this.splitLines(e[r]),origin:n}}for(var a=t&&"end"!=t&&Sn(this,i,t),r=i.length-1;r>=0;r--)Tn(this,i[r]);a?_e(this,a):this.cm&&Rn(this.cm)}),undo:Ot(function(){An(this,"undo")}),redo:Ot(function(){An(this,"redo")}),undoSelection:Ot(function(){An(this,"undo",!0)}),redoSelection:Ot(function(){An(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new ro(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:vo(this.history.done),undone:vo(this.history.undone)}},setHistory:function(e){var t=this.history=new ro(this.history.maxGeneration);t.done=vo(e.done.slice(0),null,!0),t.undone=vo(e.undone.slice(0),null,!0)},addLineClass:Ot(function(e,t,n){return $n(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(Ko(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0})}),removeLineClass:Ot(function(e,t,n){return $n(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",o=e[i];if(!o)return!1;if(null==n)e[i]=null;else{var r=o.match(Ko(n));if(!r)return!1;var s=r.index+r[0].length;e[i]=o.slice(0,r.index)+(r.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0})}),addLineWidget:Ot(function(e,t,n){return Ti(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Vn(this,ge(this,e),ge(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=ge(this,e),Vn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=ge(this,e);var t=[],n=Yi(this,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,n){e=ge(this,e),t=ge(this,t);var i=[],o=e.line;return this.iter(e.line,t.line+1,function(r){var s=r.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&o==e.line&&e.ch>l.to||null==l.from&&o!=e.line||null!=l.from&&o==t.line&&l.from>t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++o}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(i){var o=i.text.length+1;return o>e?(t=e,!0):(e-=o,void++n)}),ge(this,jr(n,t))},indexFromPos:function(e){e=ge(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new ks(Zi(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new ks(Zi(this,t,n),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Yn(i,Qn(this)),i},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=this.linked[n];if(i.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Jn(Qn(this));break}}if(t.history==this.history){var o=[t.id];Xi(t,function(e){o.push(e.id)},!0),t.history=new ro(null),t.history.done=vo(this.history.done,o),t.history.undone=vo(this.history.undone,o)}},iterLinkedDocs:function(e){Xi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):ea(e)},lineSeparator:function(){return this.lineSep||"\n"}}),ks.prototype.eachLine=ks.prototype.iter;var Ss="iter insert remove copy getEditor constructor".split(" ");for(var _s in ks.prototype)ks.prototype.hasOwnProperty(_s)&&Mo(Ss,_s)<0&&(e.prototype[_s]=function(e){return function(){return e.apply(this.doc,arguments)}}(ks.prototype[_s]));Lo(ks);var Ts=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Es=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},As=e.e_stop=function(e){Ts(e),Es(e)},Ns=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={}),o=i[t]||(i[t]=[]);o.push(n)}},Ls=[],Ds=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else for(var i=So(e,t,!1),o=0;o<i.length;++o)if(i[o]==n){i.splice(o,1);break}},Os=e.signal=function(e,t){var n=So(e,t,!0);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,i)},Ps=null,Ms=30,Is=e.Pass={toString:function(){return"CodeMirror.Pass"}},Fs={scroll:!1},js={origin:"*mouse"},Rs={origin:"+move"};Do.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Hs=e.countColumn=function(e,t,n,i,o){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var r=i||0,s=o||0;;){var a=e.indexOf("	",r);if(0>a||a>=t)return s+(t-r);s+=a-r,s+=n-s%n,r=a+1}},Bs=e.findColumn=function(e,t,n){for(var i=0,o=0;;){var r=e.indexOf("	",i);-1==r&&(r=e.length);var s=r-i;if(r==e.length||o+s>=t)return i+Math.min(s,t-o);if(o+=r-i,o+=n-o%n,i=r+1,o>=t)return i}},$s=[""],Ws=function(e){e.select()};Ar?Ws=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:yr&&(Ws=function(e){try{e.select()}catch(t){}});var zs,qs=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Us=e.isWordChar=function(e){return/\w/.test(e)||e>"Â€"&&(e.toUpperCase()!=e.toLowerCase()||qs.test(e))},Gs=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;zs=document.createRange?function(e,t,n,i){var o=document.createRange();return o.setEnd(i||e,n),o.setStart(e,t),o}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(o){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var Ks=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)};yr&&11>wr&&(Go=function(){try{return document.activeElement}catch(e){return document.body}});var Vs,Xs,Qs=e.rmClass=function(e,t){var n=e.className,i=Ko(t).exec(n);if(i){var o=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(o?i[1]+o:"")}},Ys=e.addClass=function(e,t){var n=e.className;Ko(t).test(n)||(e.className+=(n?" ":"")+t)},Js=!1,Zs=function(){if(yr&&9>wr)return!1;var e=zo("div");return"draggable"in e||"dragDrop"in e}(),ea=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;i>=t;){var o=e.indexOf("\n",t);-1==o&&(o=e.length);var r=e.slice(t,"\r"==e.charAt(o-1)?o-1:o),s=r.indexOf("\r");-1!=s?(n.push(r.slice(0,s)),t+=s+1):(n.push(r),t=o+1)}return n}:function(e){return e.split(/\r\n?|\n/)},ta=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},na=function(){var e=zo("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),ia=null,oa=e.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var e=0;10>e;e++)oa[e+48]=oa[e+96]=String(e);for(var e=65;90>=e;e++)oa[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)oa[e+111]=oa[e+63235]="F"+e}();var ra,sa=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?i.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!o.test(n))return!1;for(var i,u=n.length,h=[],f=0;u>f;++f)h.push(i=e(n.charCodeAt(f)));for(var f=0,d=c;u>f;++f){var i=h[f];"m"==i?h[f]=d:d=i}for(var f=0,p=c;u>f;++f){var i=h[f];"1"==i&&"r"==p?h[f]="n":s.test(i)&&(p=i,"r"==i&&(h[f]="R"))}for(var f=1,d=h[0];u-1>f;++f){var i=h[f];"+"==i&&"1"==d&&"1"==h[f+1]?h[f]="1":","!=i||d!=h[f+1]||"1"!=d&&"n"!=d||(h[f]=d),d=i}for(var f=0;u>f;++f){var i=h[f];if(","==i)h[f]="N";else if("%"==i){for(var g=f+1;u>g&&"%"==h[g];++g);for(var m=f&&"!"==h[f-1]||u>g&&"1"==h[g]?"1":"N",v=f;g>v;++v)h[v]=m;f=g-1}}for(var f=0,p=c;u>f;++f){var i=h[f];"L"==p&&"1"==i?h[f]="L":s.test(i)&&(p=i)}for(var f=0;u>f;++f)if(r.test(h[f])){for(var g=f+1;u>g&&r.test(h[g]);++g);for(var b="L"==(f?h[f-1]:c),y="L"==(u>g?h[g]:c),m=b||y?"L":"R",v=f;g>v;++v)h[v]=m;f=g-1}for(var w,x=[],f=0;u>f;)if(a.test(h[f])){var C=f;for(++f;u>f&&a.test(h[f]);++f);x.push(new t(0,C,f))}else{var k=f,S=x.length;for(++f;u>f&&"L"!=h[f];++f);for(var v=k;f>v;)if(l.test(h[v])){v>k&&x.splice(S,0,new t(1,k,v));var _=v;for(++v;f>v&&l.test(h[v]);++v);x.splice(S,0,new t(2,_,v)),k=v}else++v;f>k&&x.splice(S,0,new t(1,k,f))}return 1==x[0].level&&(w=n.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new t(0,0,w[0].length))),1==Po(x).level&&(w=n.match(/\s+$/))&&(Po(x).to-=w[0].length,x.push(new t(0,u-w[0].length,u))),2==x[0].level&&x.unshift(new t(1,x[0].to,x[0].to)),x[0].level!=Po(x).level&&x.push(new t(x[0].level,u,u)),x}}();return e.version="5.12.1",e}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t=/[\w$]+/,n=500;e.registerHelper("hint","anyword",function(i,o){for(var r=o&&o.word||t,s=o&&o.range||n,a=i.getCursor(),l=i.getLine(a.line),c=a.ch,u=c;u&&r.test(l.charAt(u-1));)--u;for(var h=u!=c&&l.slice(u,c),f=o&&o.list||[],d={},p=new RegExp(r.source,"g"),g=-1;1>=g;g+=2)for(var m=a.line,v=Math.min(Math.max(m+g*s,i.firstLine()),i.lastLine())+g;m!=v;m+=g)for(var b,y=i.getLine(m);b=p.exec(y);)(m!=a.line||b[0]!==h)&&(h&&0!=b[0].lastIndexOf(h,0)||Object.prototype.hasOwnProperty.call(d,b[0])||(d[b[0]]=!0,f.push(b[0])));return{list:f,from:e.Pos(a.line,u),to:e.Pos(a.line,c)}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,n){var i,o=e.getWrapperElement();return i=o.appendChild(document.createElement("div")),i.className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?i.innerHTML=t:i.appendChild(t),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(i,o,r){function s(e){if("string"==typeof e)h.value=e;else{if(c)return;c=!0,l.parentNode.removeChild(l),u.focus(),r.onClose&&r.onClose(l)}}r||(r={}),n(this,null);var a,l=t(this,i,r.bottom),c=!1,u=this,h=l.getElementsByTagName("input")[0];return h?(h.focus(),r.value&&(h.value=r.value,r.selectValueOnOpen!==!1&&h.select()),r.onInput&&e.on(h,"input",function(e){r.onInput(e,h.value,s)}),r.onKeyUp&&e.on(h,"keyup",function(e){r.onKeyUp(e,h.value,s)}),e.on(h,"keydown",function(t){r&&r.onKeyDown&&r.onKeyDown(t,h.value,s)||((27==t.keyCode||r.closeOnEnter!==!1&&13==t.keyCode)&&(h.blur(),e.e_stop(t),s()),13==t.keyCode&&o(h.value,t))}),r.closeOnBlur!==!1&&e.on(h,"blur",s)):(a=l.getElementsByTagName("button")[0])&&(e.on(a,"click",function(){s(),u.focus()}),r.closeOnBlur!==!1&&e.on(a,"blur",s),a.focus()),s}),e.defineExtension("openConfirm",function(i,o,r){function s(){c||(c=!0,a.parentNode.removeChild(a),u.focus())}n(this,null);var a=t(this,i,r&&r.bottom),l=a.getElementsByTagName("button"),c=!1,u=this,h=1;l[0].focus();for(var f=0;f<l.length;++f){var d=l[f];!function(t){e.on(d,"click",function(n){e.e_preventDefault(n),s(),t&&t(u)})}(o[f]),e.on(d,"blur",function(){--h,setTimeout(function(){0>=h&&s()},200)}),e.on(d,"focus",function(){++h})}}),e.defineExtension("openNotification",function(i,o){function r(){l||(l=!0,clearTimeout(s),a.parentNode.removeChild(a))}n(this,r);var s,a=t(this,i,o&&o.bottom),l=!1,c=o&&"undefined"!=typeof o.duration?o.duration:5e3;return e.on(a,"click",function(t){e.e_preventDefault(t),r()}),c&&(s=setTimeout(r,c)),r})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function n(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(i,o,r){r==e.Init&&(r=!1),!r!=!o&&(o?t(i):n(i))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,i,o){var r=e.getLineHandle(t.line),l=t.ch-1,c=l>=0&&a[r.text.charAt(l)]||a[r.text.charAt(++l)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(i&&u>0!=(l==t.ch))return null;var h=e.getTokenTypeAt(s(t.line,l+1)),f=n(e,s(t.line,l+(u>0?1:0)),u,h||null,o);return null==f?null:{from:s(t.line,l),to:f&&f.pos,match:f&&f.ch==c.charAt(0),forward:u>0}}function n(e,t,n,i,o){for(var r=o&&o.maxScanLineLength||1e4,l=o&&o.maxScanLines||1e3,c=[],u=o&&o.bracketRegex?o.bracketRegex:/[(){}[\]]/,h=n>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),f=t.line;f!=h;f+=n){var d=e.getLine(f);if(d){var p=n>0?0:d.length-1,g=n>0?d.length:-1;if(!(d.length>r))for(f==t.line&&(p=t.ch-(0>n?1:0));p!=g;p+=n){var m=d.charAt(p);if(u.test(m)&&(void 0===i||e.getTokenTypeAt(s(f,p+1))==i)){var v=a[m];if(">"==v.charAt(1)==n>0)c.push(m);else{if(!c.length)return{pos:s(f,p),ch:m};c.pop()}}}}}return f-n==(n>0?e.lastLine():e.firstLine())?!1:null}function i(e,n,i){for(var o=e.state.matchBrackets.maxHighlightLineLength||1e3,a=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&t(e,l[c].head,!1,i);if(u&&e.getLine(u.from.line).length<=o){var h=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";a.push(e.markText(u.from,s(u.from.line,u.from.ch+1),{className:h})),u.to&&e.getLine(u.to.line).length<=o&&a.push(e.markText(u.to,s(u.to.line,u.to.ch+1),{className:h}))}}if(a.length){r&&e.state.focused&&e.focus();var f=function(){e.operation(function(){for(var e=0;e<a.length;e++)a[e].clear()})};if(!n)return f;setTimeout(f,800)}}function o(e){e.operation(function(){l&&(l(),l=null),l=i(e,!1,e.state.matchBrackets)})}var r=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),s=e.Pos,a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,n,i){i&&i!=e.Init&&t.off("cursorActivity",o),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",o))}),e.defineExtension("matchBrackets",function(){i(this,!0)}),e.defineExtension("findMatchingBracket",function(e,n,i){return t(this,e,n,i)}),e.defineExtension("scanForBracket",function(e,t,i,o){return n(this,e,t,i,o)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.overlayMode=function(t,n,i){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(i){return{base:e.copyState(t,i.base),overlay:e.copyState(n,i.overlay),basePos:i.basePos,baseCur:null,overlayPos:i.overlayPos,overlayCur:null}},token:function(e,o){return(e!=o.streamSeen||Math.min(o.basePos,o.overlayPos)<e.start)&&(o.streamSeen=e,o.basePos=o.overlayPos=e.start),e.start==o.basePos&&(o.baseCur=t.token(e,o.base),o.basePos=e.pos),e.start==o.overlayPos&&(e.pos=e.start,o.overlayCur=n.token(e,o.overlay),o.overlayPos=e.pos),e.pos=Math.min(o.basePos,o.overlayPos),null==o.overlayCur?o.baseCur:null!=o.baseCur&&o.overlay.combineTokens||i&&null==o.overlay.combineTokens?o.baseCur+" "+o.overlayCur:o.overlayCur},indent:t.indent&&function(e,n){return t.indent(e.base,n)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){t.blankLine&&t.blankLine(e.base),n.blankLine&&n.blankLine(e.overlay)}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function t(e){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gi"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);return n&&n.index==t.pos?(t.pos+=n[0].length||1,"searching"):void(n?t.pos=n.index:t.skipToEnd())}}}function n(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function i(e){return e.state.search||(e.state.search=new n)}function o(e){return"string"==typeof e&&e==e.toLowerCase()}function r(e,t,n){return e.getSearchCursor(t,n,o(t))}function s(e,t,n,i){e.openDialog(t,i,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){p(e)}})}function a(e,t,n,i,o){e.openDialog?e.openDialog(t,o,{value:i,selectValueOnOpen:!0}):o(prompt(n,i))}function l(e,t,n,i){e.openConfirm?e.openConfirm(t,i):confirm(n)&&i[0]()}function c(e){return e.replace(/\\(.)/g,function(e,t){return"n"==t?"\n":"r"==t?"\r":t})}function u(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(n){}else e=c(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function h(e,n,i){n.queryText=i,n.query=u(i),e.removeOverlay(n.overlay,o(n.query)),n.overlay=t(n.query,o(n.query)),e.addOverlay(n.overlay),e.showMatchesOnScrollbar&&(n.annotate&&(n.annotate.clear(),n.annotate=null),n.annotate=e.showMatchesOnScrollbar(n.query,o(n.query)))}function f(t,n,o){var r=i(t);if(r.query)return d(t,n);var l=t.getSelection()||r.lastQuery;if(o&&t.openDialog){var c=null;s(t,v,l,function(n,i){e.e_stop(i),n&&(n!=r.queryText&&h(t,r,n),c&&(c.style.opacity=1),d(t,i.shiftKey,function(e,n){var i;n.line<3&&document.querySelector&&(i=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&i.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((c=i).style.opacity=.4)}))})}else a(t,v,"Search for:",l,function(e){e&&!r.query&&t.operation(function(){h(t,r,e),r.posFrom=r.posTo=t.getCursor(),d(t,n)})})}function d(t,n,o){t.operation(function(){var s=i(t),a=r(t,s.query,n?s.posFrom:s.posTo);(a.find(n)||(a=r(t,s.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0)),a.find(n)))&&(t.setSelection(a.from(),a.to()),t.scrollIntoView({from:a.from(),to:a.to()},20),s.posFrom=a.from(),s.posTo=a.to(),o&&o(a.from(),a.to()))})}function p(e){e.operation(function(){var t=i(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))})}function g(e,t,n){e.operation(function(){for(var i=r(e,t);i.findNext();)if("string"!=typeof t){var o=e.getRange(i.from(),i.to()).match(t);i.replace(n.replace(/\$(\d)/g,function(e,t){return o[t]}))}else i.replace(n)})}function m(e,t){if(!e.getOption("readOnly")){var n=e.getSelection()||i(e).lastQuery,o=t?"Replace all:":"Replace:";a(e,o+b,o,n,function(n){n&&(n=u(n),a(e,y,"Replace with:","",function(i){if(i=c(i),t)g(e,n,i);else{p(e);var o=r(e,n,e.getCursor()),s=function(){var t,c=o.from();!(t=o.findNext())&&(o=r(e,n),!(t=o.findNext())||c&&o.from().line==c.line&&o.from().ch==c.ch)||(e.setSelection(o.from(),o.to()),e.scrollIntoView({
from:o.from(),to:o.to()}),l(e,w,"Replace?",[function(){a(t)},s,function(){g(e,n,i)}]))},a=function(e){o.replace("string"==typeof n?i:i.replace(/\$(\d)/g,function(t,n){return e[n]})),s()};s()}}))})}}var v='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',b=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',y='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',w="Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>";e.commands.find=function(e){p(e),f(e)},e.commands.findPersistent=function(e){p(e),f(e,!1,!0)},e.commands.findNext=f,e.commands.findPrev=function(e){f(e,!0)},e.commands.clearSearch=p,e.commands.replace=m,e.commands.replaceAll=function(e){m(e,!0)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,o,r){if(this.atOccurrence=!1,this.doc=e,null==r&&"string"==typeof t&&(r=!1),o=o?e.clipPos(o):i(0,0),this.pos={from:o,to:o},"string"!=typeof t)t.global||(t=new RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(n,o){if(n){t.lastIndex=0;for(var r,s,a=e.getLine(o.line).slice(0,o.ch),l=0;;){t.lastIndex=l;var c=t.exec(a);if(!c)break;if(r=c,s=r.index,l=r.index+(r[0].length||1),l==a.length)break}var u=r&&r[0].length||0;u||(0==s&&0==a.length?r=void 0:s!=e.getLine(o.line).length&&u++)}else{t.lastIndex=o.ch;var a=e.getLine(o.line),r=t.exec(a),u=r&&r[0].length||0,s=r&&r.index;s+u==a.length||u||(u=1)}return r&&u?{from:i(o.line,s),to:i(o.line,s+u),match:r}:void 0};else{var s=t;r&&(t=t.toLowerCase());var a=r?function(e){return e.toLowerCase()}:function(e){return e},l=t.split("\n");if(1==l.length)this.matches=t.length?function(o,r){if(o){var l=e.getLine(r.line).slice(0,r.ch),c=a(l),u=c.lastIndexOf(t);if(u>-1)return u=n(l,c,u),{from:i(r.line,u),to:i(r.line,u+s.length)}}else{var l=e.getLine(r.line).slice(r.ch),c=a(l),u=c.indexOf(t);if(u>-1)return u=n(l,c,u)+r.ch,{from:i(r.line,u),to:i(r.line,u+s.length)}}}:function(){};else{var c=s.split("\n");this.matches=function(t,n){var o=l.length-1;if(t){if(n.line-(l.length-1)<e.firstLine())return;if(a(e.getLine(n.line).slice(0,c[o].length))!=l[l.length-1])return;for(var r=i(n.line,c[o].length),s=n.line-1,u=o-1;u>=1;--u,--s)if(l[u]!=a(e.getLine(s)))return;var h=e.getLine(s),f=h.length-c[0].length;if(a(h.slice(f))!=l[0])return;return{from:i(s,f),to:r}}if(!(n.line+(l.length-1)>e.lastLine())){var h=e.getLine(n.line),f=h.length-c[0].length;if(a(h.slice(f))==l[0]){for(var d=i(n.line,f),s=n.line+1,u=1;o>u;++u,++s)if(l[u]!=a(e.getLine(s)))return;if(a(e.getLine(s).slice(0,c[o].length))==l[o])return{from:d,to:i(s,c[o].length)}}}}}}}function n(e,t,n){if(e.length==t.length)return n;for(var i=Math.min(n,e.length);;){var o=e.slice(0,i).toLowerCase().length;if(n>o)++i;else{if(!(o>n))return i;--i}}}var i=e.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){var t=i(e,0);return n.pos={from:t,to:t},n.atOccurrence=!1,!1}for(var n=this,o=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,o))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!o.line)return t(0);o=i(o.line-1,this.doc.getLine(o.line-1).length)}else{var r=this.doc.lineCount();if(o.line==r-1)return t(r);o=i(o.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(t,n){if(this.atOccurrence){var o=e.splitLines(t);this.doc.replaceRange(o,this.pos.from,this.pos.to,n),this.pos.to=i(this.pos.from.line+o.length-1,o[o.length-1].length+(1==o.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,n,i){return new t(this.doc,e,n,i)}),e.defineDocExtension("getSearchCursor",function(e,n,i){return new t(this,e,n,i)}),e.defineExtension("selectMatches",function(t,n){for(var i=[],o=this.getSearchCursor(t,this.getCursor("from"),n);o.findNext()&&!(e.cmpPos(o.to(),this.getCursor("to"))>0);)i.push({anchor:o.from(),head:o.to()});i.length&&this.setSelections(i,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}function n(t,n){var i=e.cmpPos(n.from,t.from);return i>0&&t.to.ch-t.from.ch!=n.to.ch-n.from.ch}function i(e,t,n){var i=e.options.hintOptions,o={};for(var r in p)o[r]=p[r];if(i)for(var r in i)void 0!==i[r]&&(o[r]=i[r]);if(n)for(var r in n)void 0!==n[r]&&(o[r]=n[r]);return o.hint.resolve&&(o.hint=o.hint.resolve(e,t)),o}function o(e){return"string"==typeof e?e:e.text}function r(e,t){function n(e,n){var o;o="string"!=typeof n?function(e){return n(e,t)}:i.hasOwnProperty(n)?i[n]:n,r[e]=o}var i={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(-t.menuSize()+1,!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},o=e.options.customKeys,r=o?{}:i;if(o)for(var s in o)o.hasOwnProperty(s)&&n(s,o[s]);var a=e.options.extraKeys;if(a)for(var s in a)a.hasOwnProperty(s)&&n(s,a[s]);return r}function s(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function a(t,n){this.completion=t,this.data=n,this.picked=!1;var i=this,a=t.cm,l=this.hints=document.createElement("ul");l.className="CodeMirror-hints",this.selectedHint=n.selectedHint||0;for(var c=n.list,f=0;f<c.length;++f){var d=l.appendChild(document.createElement("li")),p=c[f],g=u+(f!=this.selectedHint?"":" "+h);null!=p.className&&(g=p.className+" "+g),d.className=g,p.render?p.render(d,n,p):d.appendChild(document.createTextNode(p.displayText||o(p))),d.hintId=f}var m=a.cursorCoords(t.options.alignWithWord?n.from:null),v=m.left,b=m.bottom,y=!0;l.style.left=v+"px",l.style.top=b+"px";var w=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),x=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.options.container||document.body).appendChild(l);var C=l.getBoundingClientRect(),k=C.bottom-x;if(k>0){var S=C.bottom-C.top,_=m.top-(m.bottom-C.top);if(_-S>0)l.style.top=(b=m.top-S)+"px",y=!1;else if(S>x){l.style.height=x-5+"px",l.style.top=(b=m.bottom-C.top)+"px";var T=a.getCursor();n.from.ch!=T.ch&&(m=a.cursorCoords(T),l.style.left=(v=m.left)+"px",C=l.getBoundingClientRect())}}var E=C.right-w;if(E>0&&(C.right-C.left>w&&(l.style.width=w-5+"px",E-=C.right-C.left-w),l.style.left=(v=m.left-E)+"px"),a.addKeyMap(this.keyMap=r(t,{moveFocus:function(e,t){i.changeActive(i.selectedHint+e,t)},setFocus:function(e){i.changeActive(e)},menuSize:function(){return i.screenAmount()},length:c.length,close:function(){t.close()},pick:function(){i.pick()},data:n})),t.options.closeOnUnfocus){var A;a.on("blur",this.onBlur=function(){A=setTimeout(function(){t.close()},100)}),a.on("focus",this.onFocus=function(){clearTimeout(A)})}var N=a.getScrollInfo();return a.on("scroll",this.onScroll=function(){var e=a.getScrollInfo(),n=a.getWrapperElement().getBoundingClientRect(),i=b+N.top-e.top,o=i-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return y||(o+=l.offsetHeight),o<=n.top||o>=n.bottom?t.close():(l.style.top=i+"px",void(l.style.left=v+N.left-e.left+"px"))}),e.on(l,"dblclick",function(e){var t=s(l,e.target||e.srcElement);t&&null!=t.hintId&&(i.changeActive(t.hintId),i.pick())}),e.on(l,"click",function(e){var n=s(l,e.target||e.srcElement);n&&null!=n.hintId&&(i.changeActive(n.hintId),t.options.completeOnSingleClick&&i.pick())}),e.on(l,"mousedown",function(){setTimeout(function(){a.focus()},20)}),e.signal(n,"select",c[0],l.firstChild),!0}function l(e,t){if(!e.somethingSelected())return t;for(var n=[],i=0;i<t.length;i++)t[i].supportsSelection&&n.push(t[i]);return n}function c(t,n){var i,o=t.getHelpers(n,"hint");if(o.length){for(var r,s=!1,a=0;a<o.length;a++)o[a].async&&(s=!0);return s?(r=function(e,t,n){function i(o,s){if(o==r.length)return t(null);var a=r[o];if(a.async)a(e,function(e){e?t(e):i(o+1)},n);else{var s=a(e,n);s?t(s):i(o+1)}}var r=l(e,o);i(0)},r.async=!0):r=function(e,t){for(var n=l(e,o),i=0;i<n.length;i++){var r=n[i](e,t);if(r&&r.list.length)return r}},r.supportsSelection=!0,r}return(i=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:i})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}var u="CodeMirror-hint",h="CodeMirror-hint-active";e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var i={hint:t};if(n)for(var o in n)i[o]=n[o];return e.showHint(i)},e.defineExtension("showHint",function(n){n=i(this,this.getCursor("start"),n);var o=this.listSelections();if(!(o.length>1)){if(this.somethingSelected()){if(!n.hint.supportsSelection)return;for(var r=0;r<o.length;r++)if(o[r].head.line!=o[r].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var s=this.state.completionActive=new t(this,n);s.options.hint&&(e.signal(this,"startCompletion",this),s.update(!0))}});var f=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},d=window.cancelAnimationFrame||clearTimeout;t.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var i=t.list[n];i.hint?i.hint(this.cm,t,i):this.cm.replaceRange(o(i),i.from||t.from,i.to||t.to,"complete"),e.signal(t,"pick",i),this.close()},cursorActivity:function(){this.debounce&&(d(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var n=this;this.debounce=f(function(){n.update()}),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick)if(this.options.hint.async){var t=++this.tick,n=this;this.options.hint(this.cm,function(i){n.tick==t&&n.finishUpdate(i,e)},this.options)}else this.finishUpdate(this.options.hint(this.cm,this.options),e)},finishUpdate:function(t,i){this.data&&e.signal(this.data,"update");var o=this.widget&&this.widget.picked||i&&this.options.completeSingle;this.widget&&this.widget.close(),t&&this.data&&n(this.data,t)||(this.data=t,t&&t.list.length&&(o&&1==t.list.length?this.pick(t,0):(this.widget=new a(this,t),e.signal(t,"shown"))))}},a.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,n){if(t>=this.data.list.length?t=n?this.data.list.length-1:0:0>t&&(t=n?0:this.data.list.length-1),this.selectedHint!=t){var i=this.hints.childNodes[this.selectedHint];i.className=i.className.replace(" "+h,""),i=this.hints.childNodes[this.selectedHint=t],i.className+=" "+h,i.offsetTop<this.hints.scrollTop?this.hints.scrollTop=i.offsetTop-3:i.offsetTop+i.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=i.offsetTop+i.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],i)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:c}),e.registerHelper("hint","fromList",function(t,n){var i=t.getCursor(),o=t.getTokenAt(i),r=e.Pos(i.line,o.end);if(o.string&&/\w/.test(o.string[o.string.length-1]))var s=o.string,a=e.Pos(i.line,o.start);else var s="",a=r;for(var l=[],c=0;c<n.words.length;c++){var u=n.words[c];u.slice(0,s.length)==s&&l.push(u)}return l.length?{list:l,from:a,to:r}:void 0}),e.commands.autocomplete=e.showHint;var p={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function n(e,t){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e=e.source):e=String(e),new RegExp((t===!1?"":"^")+"(?:"+e+")",n)}function i(e){if(!e)return null;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}function o(e,o){(e.next||e.push)&&t(o,e.next||e.push),this.regex=n(e.regex),this.token=i(e.token),this.data=e}function r(e,t){return function(n,i){if(i.pending){var o=i.pending.shift();return 0==i.pending.length&&(i.pending=null),n.pos+=o.text.length,o.token}if(i.local){if(i.local.end&&n.match(i.local.end)){var r=i.local.endToken||null;return i.local=i.localState=null,r}var s,r=i.local.mode.token(n,i.localState);return i.local.endScan&&(s=i.local.endScan.exec(n.current()))&&(n.pos=n.start+s.index),r}for(var l=e[i.state],c=0;c<l.length;c++){var u=l[c],h=(!u.data.sol||n.sol())&&n.match(u.regex);if(h){if(u.data.next?i.state=u.data.next:u.data.push?((i.stack||(i.stack=[])).push(i.state),i.state=u.data.push):u.data.pop&&i.stack&&i.stack.length&&(i.state=i.stack.pop()),u.data.mode&&a(t,i,u.data.mode,u.token),u.data.indent&&i.indent.push(n.indentation()+t.indentUnit),u.data.dedent&&i.indent.pop(),h.length>2){i.pending=[];for(var f=2;f<h.length;f++)h[f]&&i.pending.push({text:h[f],token:u.token[f-1]});return n.backUp(h[0].length-(h[1]?h[1].length:0)),u.token[0]}return u.token&&u.token.join?u.token[0]:u.token}}return n.next(),null}}function s(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=0;for(var i in e)if(e.hasOwnProperty(i)){if(!t.hasOwnProperty(i)||!s(e[i],t[i]))return!1;n++}for(var i in t)t.hasOwnProperty(i)&&n--;return 0==n}function a(t,i,o,r){var a;if(o.persistent)for(var l=i.persistentStates;l&&!a;l=l.next)(o.spec?s(o.spec,l.spec):o.mode==l.mode)&&(a=l);var c=a?a.mode:o.mode||e.getMode(t,o.spec),u=a?a.state:e.startState(c);o.persistent&&!a&&(i.persistentStates={mode:c,spec:o.spec,state:u,next:i.persistentStates}),i.localState=u,i.local={mode:c,end:o.end&&n(o.end),endScan:o.end&&o.forceEnd!==!1&&n(o.end,!1),endToken:r&&r.join?r[r.length-1]:r}}function l(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}function c(t,n){return function(i,o,r){if(i.local&&i.local.mode.indent)return i.local.mode.indent(i.localState,o,r);if(null==i.indent||i.local||n.dontIndentStates&&l(i.state,n.dontIndentStates)>-1)return e.Pass;var s=i.indent.length-1,a=t[i.state];e:for(;;){for(var c=0;c<a.length;c++){var u=a[c];if(u.data.dedent&&u.data.dedentIfLineStart!==!1){var h=u.regex.exec(o);if(h&&h[0]){s--,(u.next||u.push)&&(a=t[u.next||u.push]),o=o.slice(h[0].length);continue e}}}break}return 0>s?0:i.indent[s]}}e.defineSimpleMode=function(t,n){e.defineMode(t,function(t){return e.simpleMode(t,n)})},e.simpleMode=function(n,i){t(i,"start");var s={},a=i.meta||{},l=!1;for(var u in i)if(u!=a&&i.hasOwnProperty(u))for(var h=s[u]=[],f=i[u],d=0;d<f.length;d++){var p=f[d];h.push(new o(p,i)),(p.indent||p.dedent)&&(l=!0)}var g={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:l?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var i=t.persistentStates;i;i=i.next)n.persistentStates={mode:i.mode,spec:i.spec,state:i.state==t.localState?n.localState:e.copyState(i.mode,i.state),next:n.persistentStates};return n},token:r(s,n),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:c(s,a)};if(a)for(var m in a)a.hasOwnProperty(m)&&(g[m]=a[m]);return g}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n,i,o){e.openDialog?e.openDialog(t,o,{value:i,selectValueOnOpen:!0}):o(prompt(n,i))}function n(e,t){var n=Number(t);return/^[-+]/.test(t)?e.getCursor().line+n:n-1}var i='Jump to line: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use line:column or scroll% syntax)</span>';e.commands.jumpToLine=function(e){var o=e.getCursor();t(e,i,"Jump to line:",o.line+1+":"+o.ch,function(t){if(t){var i;if(i=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(t))e.setCursor(n(e,i[1]),Number(i[2]));else if(i=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(t)){var r=Math.round(e.lineCount()*Number(i[1])/100);/^[-+]/.test(i[1])&&(r=o.line+r+1),e.setCursor(r-1,o.ch)}else(i=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(t))&&e.setCursor(n(e,i[1]),o.ch)}})},e.keyMap["default"]["Alt-G"]="jumpToLine"}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("choicescript",function(e){var t=function(e){return new RegExp("^\\s*\\*("+e.join("|")+")(?: .*)?$")},n=["abort","achievement","achieve","advertisement","allow_reuse","author","bug","check_achievements","check_purchase","check_registration","choice","create","delay_break","delay_ending","delete","disable_reuse","elseif","elsif","else","end_trial","ending","fake_choice","finish","gosub_scene","gosub","goto_random_scene","goto_scene","gotoref","goto","hide_reuse","if","image","input_number","input_text","line_break","link_button","link","login","looplimit","more_games","page_break","print","purchase","rand","redirect_scene","reset","restart","restore_game","restore_purchases","return","save_game","selectable_if","scene_list","script","setref","set","share_this_game","show_password","sound","stat_chart","subscribe","temp","title"],i=["ending","finish","gosub_scene","gosub","goto_random_scene","goto_scene","gotoref","goto","label","redirect_scene","return"],o=["achievement","choice","if","scene_list","elseif","else","elsif","fake_choice","stat_chart"],r=["finish","goto_scene","goto","ending","redirect_scene"],s=["console_log","console_track","console_track_all","console_untrack_all","console_untrack","console_clear","console_track_list"],a=/\s+(?:\*(hide_reuse|allow_reuse|(if|selectable_if) .+) )?#.+/,l=t(n);o=t(o),r=t(r),i=t(i),s=t(s);var c={start:[{regex:/\s*\*comment(?: .*)?/,token:"comment"},{regex:i,token:"keyword"},{regex:/\s+(?:\*(hide_reuse|allow_reuse|(if|selectable_if) .+) )?#.+/,token:"operator"},{regex:l,token:"builtin"},{regex:s,token:"cs-plus"},{regex:a,token:"variable"},{regex:/\b([A-Za-z-]+'[A-Za-z-]+|[A-Za-z-]+'?)\b/,token:"word"},{regex:/\$!{0,2}\{[\w\{\}\+\-&\*\/\s0-9#]+(\[[\w0-9\[\]]+\])*\}/,token:"variable"},{regex:/[\{\}]/,token:"curly-bracket"},{regex:/[\(\)]/,token:"standard-bracket"},{regex:/[\[\]]/,token:"square-bracket"}]};return{startState:function(){return{next:"start",lastToken:null}},token:function(e,t){for(var n=function(e,t){var n=t.next||"start";if(n){t.next=t.next;var i=c[n];if(i.splice){for(var o=0;o<i.length;++o){var r,s=i[o];if(s.regex&&(r=e.match(s.regex)))return t.next=s.next||t.next,s.token}return e.next(),"null"}if(e.match(s=c[n]))return s.regex&&e.match(s.regex)?(t.next=s.next,s.token):(e.next(),"null")}return e.next(),"error"};e.pos==e.start;)var i=n(e,t);return t.lastToken={style:i,indent:e.indentation(),content:e.current()},i},indent:function(t){if("undefined"==typeof t.lastToken||null===t.lastToken)return 0;var n=t.lastToken.indent||0;return t.lastToken.content.match(o)||t.lastToken.content.match(a)?n+=e.indentUnit:t.lastToken.content.match(r)&&(n-=e.indentUnit),n=0>n?0:n},blankLine:function(e){e.lastToken={style:"blank-line",indent:0,content:""}}}}),e.defineMIME("text/x-choicescript","choicescript")}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Dropbox=t():e.Dropbox=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i=n(13);e.exports=i},function(e,t,n){var i;(function(e,o,r){(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function l(e){Q=e}function c(e){ee=e}function u(){return function(){e.nextTick(g)}}function h(){return function(){X(g)}}function f(){var e=0,t=new ie(g),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=g,function(){e.port2.postMessage(0)}}function p(){return function(){setTimeout(g,1)}}function g(){for(var e=0;Z>e;e+=2){var t=se[e],n=se[e+1];t(n),se[e]=void 0,se[e+1]=void 0}Z=0}function m(){try{var e=n(19);return X=e.runOnLoop||e.runOnContext,h()}catch(t){return p()}}function v(e,t){var n=this,i=new this.constructor(y);void 0===i[ce]&&R(i);var o=n._state;if(o){var r=arguments[o-1];ee(function(){I(o,i,r,n._result)})}else D(n,i,e,t);return i}function b(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(y);return E(n,e),n}function y(){}function w(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function C(e){try{return e.then}catch(t){return de.error=t,de}}function k(e,t,n,i){try{e.call(t,n,i)}catch(o){return o}}function S(e,t,n){ee(function(e){var i=!1,o=k(n,t,function(n){i||(i=!0,t!==n?E(e,n):N(e,n))},function(t){i||(i=!0,L(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&o&&(i=!0,L(e,o))},e)}function _(e,t){t._state===he?N(e,t._result):t._state===fe?L(e,t._result):D(t,void 0,function(t){E(e,t)},function(t){L(e,t)})}function T(e,t,n){t.constructor===e.constructor&&n===ae&&constructor.resolve===le?_(e,t):n===de?L(e,de.error):void 0===n?N(e,t):a(n)?S(e,t,n):N(e,t)}function E(e,t){e===t?L(e,w()):s(t)?T(e,t,C(t)):N(e,t)}function A(e){e._onerror&&e._onerror(e._result),O(e)}function N(e,t){e._state===ue&&(e._result=t,e._state=he,0!==e._subscribers.length&&ee(O,e))}function L(e,t){e._state===ue&&(e._state=fe,e._result=t,ee(A,e))}function D(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+he]=n,o[r+fe]=i,0===r&&e._state&&ee(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,o,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?I(n,i,o,r):o(r);e._subscribers.length=0}}function P(){this.error=null}function M(e,t){try{return e(t)}catch(n){return pe.error=n,pe}}function I(e,t,n,i){var o,r,s,l,c=a(n);if(c){if(o=M(n,i),o===pe?(l=!0,r=o.error,o=null):s=!0,t===o)return void L(t,x())}else o=i,s=!0;t._state!==ue||(c&&s?E(t,o):l?L(t,r):e===he?N(t,o):e===fe&&L(t,o))}function F(e,t){try{t(function(t){E(e,t)},function(t){L(e,t)})}catch(n){L(e,n)}}function j(){return ge++}function R(e){e[ce]=ge++,e._state=void 0,e._result=void 0,e._subscribers=[]}function H(e){return new we(this,e).promise}function B(e){var t=this;return new t(J(e)?function(n,i){for(var o=e.length,r=0;o>r;r++)t.resolve(e[r]).then(n,i)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function $(e){var t=this,n=new t(y);return L(n,e),n}function W(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function q(e){this[ce]=j(),this._result=this._state=void 0,this._subscribers=[],y!==e&&("function"!=typeof e&&W(),this instanceof q?F(this,e):z())}function U(e,t){this._instanceConstructor=e,this.promise=new e(y),this.promise[ce]||R(this.promise),J(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&N(this.promise,this._result))):L(this.promise,G())}function G(){return new Error("Array Methods must be provided an Array")}function K(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=ye)}var V;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var X,Q,Y,J=V,Z=0,ee=function(e,t){se[Z]=e,se[Z+1]=t,Z+=2,2===Z&&(Q?Q(g):Y())},te="undefined"!=typeof window?window:void 0,ne=te||{},ie=ne.MutationObserver||ne.WebKitMutationObserver,oe="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),re="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,se=new Array(1e3);Y=oe?u():ie?f():re?d():void 0===te?m():p();var ae=v,le=b,ce=Math.random().toString(36).substring(16),ue=void 0,he=1,fe=2,de=new P,pe=new P,ge=0,me=H,ve=B,be=$,ye=q;q.all=me,q.race=ve,q.resolve=le,q.reject=be,q._setScheduler=l,q._setAsap=c,q._asap=ee,q.prototype={constructor:q,then:ae,"catch":function(e){return this.then(null,e)}};var we=U;U.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ue&&e>n;n++)this._eachEntry(t[n],n)},U.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===le){var o=C(e);if(o===ae&&e._state!==ue)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===ye){var r=new n(y);T(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(i(e),t)},U.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===ue&&(this._remaining--,e===fe?L(i,n):this._result[t]=n),0===this._remaining&&N(i,this._result)},U.prototype._willSettleAt=function(e,t){var n=this;D(e,void 0,function(e){n._settledAt(he,t,e)},function(e){n._settledAt(fe,t,e)})};var xe=K,Ce={Promise:ye,polyfill:xe};n(10).amd?(i=function(){return Ce}.call(t,n,t,r),!(void 0!==i&&(r.exports=i))):"undefined"!=typeof r&&r.exports?r.exports=Ce:"undefined"!=typeof this&&(this.ES6Promise=Ce),xe()}).call(this)}).call(t,n(6),function(){return this}(),n(11)(e))},function(e,t,n){function i(){}function o(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function r(e){if(!y(e))return e;var t=[];for(var n in e)null!=e[n]&&s(t,n,e[n]);return t.join("&")}function s(e,t,n){return Array.isArray(n)?n.forEach(function(n){s(e,t,n)}):void e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}function a(e){for(var t,n,i={},o=e.split("&"),r=0,s=o.length;s>r;++r)n=o[r],t=n.split("="),i[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return i}function l(e){var t,n,i,o,r=e.split(/\r?\n/),s={};r.pop();for(var a=0,l=r.length;l>a;++a)n=r[a],t=n.indexOf(":"),i=n.slice(0,t).toLowerCase(),o=x(n.slice(t+1)),s[i]=o;return s}function c(e){return/[\/+]json\b/.test(e)}function u(e){return e.split(/ *; */).shift()}function h(e){return v(e.split(/ *; */),function(e,t){var n=t.split(/ *= */),i=n.shift(),o=n.shift();return i&&o&&(e[i]=o),e},{})}function f(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=l(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function d(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new f(n)}catch(i){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=i,e.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,e.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(e)}if(n.emit("response",t),e)return n.callback(e,t);if(t.status>=200&&t.status<300)return n.callback(e,t);var o=new Error(t.statusText||"Unsuccessful HTTP response");o.original=e,o.response=t,o.status=t.status,n.callback(o,t)})}function p(e,t){var n=w("DELETE",e);return t&&n.end(t),n}var g,m=n(5),v=n(7),b=n(8),y=n(3);g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var w=e.exports=n(9).bind(null,d);w.getXHR=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var x="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};w.serializeObject=r,w.parseString=a,w.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},w.serialize={"application/x-www-form-urlencoded":r,"application/json":JSON.stringify},w.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},f.prototype.get=function(e){return this.header[e.toLowerCase()]},f.prototype.setHeaderProperties=function(){var e=this.header["content-type"]||"";this.type=u(e);var t=h(e);for(var n in t)this[n]=t[n]},f.prototype.parseBody=function(e){var t=w.parse[this.type];return!t&&c(this.type)&&(t=w.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},f.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,
this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},f.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,i="cannot "+t+" "+n+" ("+this.status+")",o=new Error(i);return o.status=this.status,o.method=t,o.url=n,o},w.Response=f,m(d.prototype);for(var C in b)d.prototype[C]=b[C];d.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},d.prototype.type=function(e){return this.set("Content-Type",w.types[e]||e),this},d.prototype.responseType=function(e){return this._responseType=e,this},d.prototype.accept=function(e){return this.set("Accept",w.types[e]||e),this},d.prototype.auth=function(e,t,n){switch(n||(n={type:"basic"}),n.type){case"basic":var i=btoa(e+":"+t);this.set("Authorization","Basic "+i);break;case"auto":this.username=e,this.password=t}return this},d.prototype.query=function(e){return"string"!=typeof e&&(e=r(e)),e&&this._query.push(e),this},d.prototype.attach=function(e,t,n){return this._getFormData().append(e,t,n||t.name),this},d.prototype._getFormData=function(){return this._formData||(this._formData=new g.FormData),this._formData},d.prototype.send=function(e){var t=y(e),n=this._header["content-type"];if(t&&y(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||o(e)?this:(n||this.type("json"),this)},f.prototype.parse=function(e){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.serialize(e),this},f.prototype.serialize=function(e){return this._parser=e,this},d.prototype.callback=function(e,t){var n=this._callback;this.clearTimeout(),n(e,t)},d.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},d.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},d.prototype.withCredentials=function(){return this._withCredentials=!0,this},d.prototype.end=function(e){var t=this,n=this.xhr=w.getXHR(),r=this._query.join("&"),s=this._timeout,a=this._formData||this._data;this._callback=e||i,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(i){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var l=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(n.onprogress=l);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=l)}catch(u){}if(s&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},s)),r&&(r=w.serializeObject(r),this.url+=~this.url.indexOf("?")?"&"+r:"?"+r),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!o(a)){var h=this._header["content-type"],f=this._parser||w.serialize[h?h.split(";")[0]:""];!f&&c(h)&&(f=w.serialize["application/json"]),f&&(a=f(a))}for(var d in this.header)null!=this.header[d]&&n.setRequestHeader(d,this.header[d]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof a?a:null),this},w.Request=d,w.get=function(e,t,n){var i=w("GET",e);return"function"==typeof t&&(n=t,t=null),t&&i.query(t),n&&i.end(n),i},w.head=function(e,t,n){var i=w("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&i.send(t),n&&i.end(n),i},w.del=p,w["delete"]=p,w.patch=function(e,t,n){var i=w("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&i.send(t),n&&i.end(n),i},w.post=function(e,t,n){var i=w("POST",e);return"function"==typeof t&&(n=t,t=null),t&&i.send(t),n&&i.end(n),i},w.put=function(e,t,n){var i=w("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&i.send(t),n&&i.end(n),i}},function(e){function t(e){return null!=e&&"object"==typeof e}e.exports=t},function(e,t,n){var i,o=n(12),r=n(17),s=n(18),a=n(15);n(14),i=function(e){e=e||{},this.accessToken=e.accessToken,this.clientId=e.clientId,this.selectUser=e.selectUser},i.prototype.setAccessToken=function(e){this.accessToken=e},i.prototype.getAccessToken=function(){return this.accessToken},i.prototype.setClientId=function(e){this.clientId=e},i.prototype.getClientId=function(){return this.clientId},i.prototype.getAuthenticationUrl=function(e,t){var n,i="https://www.dropbox.com/oauth2/authorize",o=this.getClientId();if(!o)throw new Error("A client id is required. You can set the client id using .setClientId().");if(!e)throw new Error("A redirect uri is required.");return n=i+"?response_type=token&client_id="+o,e&&(n=n+"&redirect_uri="+e),t&&(n=n+"&state="+t),n},i.prototype.request=function(e,t,n,i){if(i===a.RPC)return this.rpcRequest(e,t,this.getAccessToken(),this.selectUser);if(i===a.DOWNLOAD)return this.downloadRequest(e,t,this.getAccessToken(),this.selectUser);if(i===a.UPLOAD)return this.uploadRequest(e,t,this.getAccessToken(),this.selectUser);throw new Error("Invalid request type")},i.prototype.rpcRequest=r,i.prototype.setRpcRequest=function(e){i.prototype.rpcRequest=e},i.prototype.getRpcRequest=function(){return i.prototype.rpcRequest},i.prototype.downloadRequest=o,i.prototype.setDownloadRequest=function(e){i.prototype.downloadRequest=e},i.prototype.getDownloadRequest=function(){return i.prototype.downloadRequest},i.prototype.uploadRequest=s,i.prototype.setUploadRequest=function(e){i.prototype.uploadRequest=e},i.prototype.getUploadRequest=function(){return i.prototype.uploadRequest},e.exports=i},function(e){function t(e){return e?n(e):void 0}function n(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i,o=0;o<n.length;o++)if(i=n[o],i===t||i.fn===t){n.splice(o,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var i=0,o=n.length;o>i;++i)n[i].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e){function t(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&n())}function n(){if(!u){var e=r(t);u=!0;for(var n=c.length;n;){for(l=c,c=[];++h<n;)l&&l[h].run();h=-1,n=c.length}l=null,u=!1,s(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var r,s,a=e.exports={};!function(){try{r=setTimeout}catch(e){r=function(){throw new Error("setTimeout is not defined")}}try{s=clearTimeout}catch(e){s=function(){throw new Error("clearTimeout is not defined")}}}();var l,c=[],u=!1,h=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];c.push(new i(e,t)),1!==c.length||u||r(n,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e){e.exports=function(e,t,n){for(var i=0,o=e.length,r=3==arguments.length?n:e[i++];o>i;)r=t.call(null,r,e[i],++i,e);return r}},function(e,t,n){var i=n(3);t.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},t.parse=function(e){return this._parser=e,this},t.timeout=function(e){return this._timeout=e,this},t.then=function(e,t){return this.end(function(n,i){n?t(n):e(i)})},t.use=function(e){return e(this),this},t.get=function(e){return this._header[e.toLowerCase()]},t.getHeader=t.get,t.set=function(e,t){if(i(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},t.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},t.field=function(e,t){return this._getFormData().append(e,t),this}},function(e){function t(e,t,n){return"function"==typeof n?new e("GET",t).end(n):2==arguments.length?new e("GET",t):new e(t,n)}e.exports=t},function(e){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){var i,o,r,s=n(2),a=n(1).Promise,l="https://content.dropboxapi.com/2/";s.parse["application/octect-stream"]=function(e){return e},i=function(e,t){return{status:e.status,error:t.text,response:t}},r=function(e,t){e.text="",e.setEncoding("binary"),e.on("data",function(t){e.text+=t}),e.on("end",function(){t()})},o=function(e,t,n,o){var c=function(a,c){function u(e){a&&a(e)}function h(e){c&&c(e)}function f(e,t){var n;e?h(i(e,t)):(n=JSON.parse(t.headers["dropbox-api-result"]),t.xhr?n.fileBlob=t.xhr.response:n.fileBinary=t.res.text,u(n))}var d;d=s.post(l+e).set("Authorization","Bearer "+n).set("Dropbox-API-Arg",JSON.stringify(t)).on("request",function(){this.xhr&&(this.xhr.responseType="blob")}),o&&(d=d.set("Dropbox-API-Select-User",o)),"undefined"==typeof window?d.buffer(!0).parse(r).end(f):d.end(f)};return new a(c)},e.exports=o},function(e,t,n){var i,o=n(4),r=n(16);i=function(e){o.call(this,e)},i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype=Object.assign(i.prototype,r),i.prototype.filesGetSharedLinkFile=function(e){return this.request("sharing/get_shared_link_file",e,"api","download")},e.exports=i},function(){"function"!=typeof Object.assign&&!function(){Object.assign=function(e){"use strict";var t,n,i,o;if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(t=Object(e),n=1;n<arguments.length;n++)if(i=arguments[n],void 0!==i&&null!==i)for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);return t}}()},function(e){var t={RPC:"rpc",DOWNLOAD:"download",UPLOAD:"upload"};e.exports=t},function(e){var t={};t.authTokenRevoke=function(e){return this.request("auth/token/revoke",e,"api","rpc")},t.filesAlphaGetMetadata=function(e){return this.request("files/alpha/get_metadata",e,"api","rpc")},t.filesAlphaUpload=function(e){return this.request("files/alpha/upload",e,"content","upload")},t.filesCopy=function(e){return this.request("files/copy",e,"api","rpc")},t.filesCopyReferenceGet=function(e){return this.request("files/copy_reference/get",e,"api","rpc")},t.filesCopyReferenceSave=function(e){return this.request("files/copy_reference/save",e,"api","rpc")},t.filesCreateFolder=function(e){return this.request("files/create_folder",e,"api","rpc")},t.filesDelete=function(e){return this.request("files/delete",e,"api","rpc")},t.filesDownload=function(e){return this.request("files/download",e,"content","download")},t.filesGetMetadata=function(e){return this.request("files/get_metadata",e,"api","rpc")},t.filesGetPreview=function(e){return this.request("files/get_preview",e,"content","download")},t.filesGetTemporaryLink=function(e){return this.request("files/get_temporary_link",e,"api","rpc")},t.filesGetThumbnail=function(e){return this.request("files/get_thumbnail",e,"content","download")},t.filesListFolder=function(e){return this.request("files/list_folder",e,"api","rpc")},t.filesListFolderContinue=function(e){return this.request("files/list_folder/continue",e,"api","rpc")},t.filesListFolderGetLatestCursor=function(e){return this.request("files/list_folder/get_latest_cursor",e,"api","rpc")},t.filesListFolderLongpoll=function(e){return this.request("files/list_folder/longpoll",e,"notify","rpc")},t.filesListRevisions=function(e){return this.request("files/list_revisions",e,"api","rpc")},t.filesMove=function(e){return this.request("files/move",e,"api","rpc")},t.filesPermanentlyDelete=function(e){return this.request("files/permanently_delete",e,"api","rpc")},t.filesPropertiesAdd=function(e){return this.request("files/properties/add",e,"api","rpc")},t.filesPropertiesOverwrite=function(e){return this.request("files/properties/overwrite",e,"api","rpc")},t.filesPropertiesRemove=function(e){return this.request("files/properties/remove",e,"api","rpc")},t.filesPropertiesTemplateGet=function(e){return this.request("files/properties/template/get",e,"api","rpc")},t.filesPropertiesTemplateList=function(e){return this.request("files/properties/template/list",e,"api","rpc")},t.filesPropertiesUpdate=function(e){return this.request("files/properties/update",e,"api","rpc")},t.filesRestore=function(e){return this.request("files/restore",e,"api","rpc")},t.filesSaveUrl=function(e){return this.request("files/save_url",e,"api","rpc")},t.filesSaveUrlCheckJobStatus=function(e){return this.request("files/save_url/check_job_status",e,"api","rpc")},t.filesSearch=function(e){return this.request("files/search",e,"api","rpc")},t.filesUpload=function(e){return this.request("files/upload",e,"content","upload")},t.filesUploadSessionAppend=function(e){return this.request("files/upload_session/append",e,"content","upload")},t.filesUploadSessionAppendV2=function(e){return this.request("files/upload_session/append_v2",e,"content","upload")},t.filesUploadSessionFinish=function(e){return this.request("files/upload_session/finish",e,"content","upload")},t.filesUploadSessionStart=function(e){return this.request("files/upload_session/start",e,"content","upload")},t.sharingAddFileMember=function(e){return this.request("sharing/add_file_member",e,"api","rpc")},t.sharingAddFolderMember=function(e){return this.request("sharing/add_folder_member",e,"api","rpc")},t.sharingCheckJobStatus=function(e){return this.request("sharing/check_job_status",e,"api","rpc")},t.sharingCheckRemoveMemberJobStatus=function(e){return this.request("sharing/check_remove_member_job_status",e,"api","rpc")},t.sharingCheckShareJobStatus=function(e){return this.request("sharing/check_share_job_status",e,"api","rpc")},t.sharingCreateSharedLink=function(e){return this.request("sharing/create_shared_link",e,"api","rpc")},t.sharingCreateSharedLinkWithSettings=function(e){return this.request("sharing/create_shared_link_with_settings",e,"api","rpc")},t.sharingGetFileMetadata=function(e){return this.request("sharing/get_file_metadata",e,"api","rpc")},t.sharingGetFileMetadataBatch=function(e){return this.request("sharing/get_file_metadata/batch",e,"api","rpc")},t.sharingGetFolderMetadata=function(e){return this.request("sharing/get_folder_metadata",e,"api","rpc")},t.sharingGetSharedLinkFile=function(e){return this.request("sharing/get_shared_link_file",e,"content","download")},t.sharingGetSharedLinkMetadata=function(e){return this.request("sharing/get_shared_link_metadata",e,"api","rpc")},t.sharingGetSharedLinks=function(e){return this.request("sharing/get_shared_links",e,"api","rpc")},t.sharingListFileMembers=function(e){return this.request("sharing/list_file_members",e,"api","rpc")},t.sharingListFileMembersBatch=function(e){return this.request("sharing/list_file_members/batch",e,"api","rpc")},t.sharingListFileMembersContinue=function(e){return this.request("sharing/list_file_members/continue",e,"api","rpc")},t.sharingListFolderMembers=function(e){return this.request("sharing/list_folder_members",e,"api","rpc")},t.sharingListFolderMembersContinue=function(e){return this.request("sharing/list_folder_members/continue",e,"api","rpc")},t.sharingListFolders=function(e){return this.request("sharing/list_folders",e,"api","rpc")},t.sharingListFoldersContinue=function(e){return this.request("sharing/list_folders/continue",e,"api","rpc")},t.sharingListMountableFolders=function(e){return this.request("sharing/list_mountable_folders",e,"api","rpc")},t.sharingListMountableFoldersContinue=function(e){return this.request("sharing/list_mountable_folders/continue",e,"api","rpc")},t.sharingListReceivedFiles=function(e){return this.request("sharing/list_received_files",e,"api","rpc")},t.sharingListReceivedFilesContinue=function(e){return this.request("sharing/list_received_files/continue",e,"api","rpc")},t.sharingListSharedLinks=function(e){return this.request("sharing/list_shared_links",e,"api","rpc")},t.sharingModifySharedLinkSettings=function(e){return this.request("sharing/modify_shared_link_settings",e,"api","rpc")},t.sharingMountFolder=function(e){return this.request("sharing/mount_folder",e,"api","rpc")},t.sharingRelinquishFileMembership=function(e){return this.request("sharing/relinquish_file_membership",e,"api","rpc")},t.sharingRelinquishFolderMembership=function(e){return this.request("sharing/relinquish_folder_membership",e,"api","rpc")},t.sharingRemoveFileMember=function(e){return this.request("sharing/remove_file_member",e,"api","rpc")},t.sharingRemoveFileMember2=function(e){return this.request("sharing/remove_file_member_2",e,"api","rpc")},t.sharingRemoveFolderMember=function(e){return this.request("sharing/remove_folder_member",e,"api","rpc")},t.sharingRevokeSharedLink=function(e){return this.request("sharing/revoke_shared_link",e,"api","rpc")},t.sharingShareFolder=function(e){return this.request("sharing/share_folder",e,"api","rpc")},t.sharingTransferFolder=function(e){return this.request("sharing/transfer_folder",e,"api","rpc")},t.sharingUnmountFolder=function(e){return this.request("sharing/unmount_folder",e,"api","rpc")},t.sharingUnshareFile=function(e){return this.request("sharing/unshare_file",e,"api","rpc")},t.sharingUnshareFolder=function(e){return this.request("sharing/unshare_folder",e,"api","rpc")},t.sharingUpdateFolderMember=function(e){return this.request("sharing/update_folder_member",e,"api","rpc")},t.sharingUpdateFolderPolicy=function(e){return this.request("sharing/update_folder_policy",e,"api","rpc")},t.usersGetAccount=function(e){return this.request("users/get_account",e,"api","rpc")},t.usersGetAccountBatch=function(e){return this.request("users/get_account_batch",e,"api","rpc")},t.usersGetCurrentAccount=function(e){return this.request("users/get_current_account",e,"api","rpc")},t.usersGetSpaceUsage=function(e){return this.request("users/get_space_usage",e,"api","rpc")},e.exports=t},function(e,t,n){var i=n(2),o=n(1).Promise,r="https://api.dropboxapi.com/2/",s=function(e,t){return{status:e.status,error:t.text,response:t}},a=function(e,t,n,a){var l=function(o,l){function c(e){o&&o(e)}function u(e){l&&l(e)}function h(e,t){e?u(s(e,t)):c(t.body)}var f;t||(t=null),f=i.post(r+e).type("application/json").set("Authorization","Bearer "+n),a&&(f=f.set("Dropbox-API-Select-User",a)),f.send(t).end(h)};return new o(l)};e.exports=a},function(e,t,n){var i=n(2),o=n(1).Promise,r="https://content.dropboxapi.com/2/",s=function(e,t){return{status:e.status,error:t.text,response:t}},a=function(e,t,n,a){var l=function(o,l){function c(e){o&&o(e)}function u(e){l&&l(e)}function h(e,t){e?u(s(e,t)):c(t.body)}var f,d=t.contents;delete t.contents,f=i.post(r+e).type("application/octet-stream").set("Authorization","Bearer "+n).set("Dropbox-API-Arg",JSON.stringify(t)),a&&(f=f.set("Dropbox-API-Select-User",a)),f.send(d).end(h)};return new o(l)};e.exports=a},function(){}])}),function(){!function(e){var t=this||(0,eval)("this"),n=t.document,i=t.navigator,o=t.jQuery,r=t.JSON;!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(module.exports||exports,require):"function"==typeof define&&define.amd?define(["exports","require"],e):e(t.ko={})}(function(s,a){function l(e,t){return null===e||typeof e in d?e===t:!1}function c(t,n){var i;return function(){i||(i=setTimeout(function(){i=e,t()},n))}}function u(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function h(e,t,n,i){f.d[e]={init:function(e,o,r,s,a){var l,c;return f.s(function(){var r=f.a.c(o()),s=!n!=!r,u=!c;(u||t||s!==l)&&(u&&f.Y.la()&&(c=f.a.ia(f.f.childNodes(e),!0)),s?(u||f.f.T(e,f.a.ia(c)),f.Ca(i?i(a,r):a,e)):f.f.ja(e),l=s)},null,{o:e}),{controlsDescendantBindings:!0}}},f.h.ha[e]=!1,f.f.Q[e]=!0}var f="undefined"!=typeof s?s:{};f.b=function(e,t){for(var n=e.split("."),i=f,o=0;o<n.length-1;o++)i=i[n[o]];i[n[n.length-1]]=t},f.A=function(e,t,n){e[t]=n},f.version="3.2.0",f.b("version",f.version),f.a=function(){function s(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function a(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function l(e,t){return e.__proto__=t,e}var c={__proto__:[]}instanceof Array,u={},h={};u[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],u.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),s(u,function(e,t){if(t.length)for(var n=0,i=t.length;i>n;n++)h[t[n]]=e});var d={propertychange:!0},p=n&&function(){for(var t=3,i=n.createElement("div"),o=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",o[0];);return t>4?t:e}();return{vb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],u:function(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)},m:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},qb:function(e,t,n){for(var i=0,o=e.length;o>i;i++)if(t.call(n,e[i],i))return e[i];return null},ua:function(e,t){var n=f.a.m(e,t);n>0?e.splice(n,1):0===n&&e.shift()},rb:function(e){e=e||[];for(var t=[],n=0,i=e.length;i>n;n++)0>f.a.m(t,e[n])&&t.push(e[n]);return t},Da:function(e,t){e=e||[];for(var n=[],i=0,o=e.length;o>i;i++)n.push(t(e[i],i));return n},ta:function(e,t){e=e||[];for(var n=[],i=0,o=e.length;o>i;i++)t(e[i],i)&&n.push(e[i]);return n},ga:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;i>n;n++)e.push(t[n]);return e},ea:function(e,t,n){var i=f.a.m(f.a.Xa(e),t);0>i?n&&e.push(t):n||e.splice(i,1)},xa:c,extend:a,za:l,Aa:c?l:a,G:s,na:function(e,t){if(!e)return e;var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=t(e[n],n,e));return i},Ka:function(e){for(;e.firstChild;)f.removeNode(e.firstChild)},oc:function(e){e=f.a.S(e);for(var t=n.createElement("div"),i=0,o=e.length;o>i;i++)t.appendChild(f.R(e[i]));return t},ia:function(e,t){for(var n=0,i=e.length,o=[];i>n;n++){var r=e[n].cloneNode(!0);o.push(t?f.R(r):r)}return o},T:function(e,t){if(f.a.Ka(e),t)for(var n=0,i=t.length;i>n;n++)e.appendChild(t[n])},Lb:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var i=n[0],o=i.parentNode,r=0,s=t.length;s>r;r++)o.insertBefore(t[r],i);for(r=0,s=n.length;s>r;r++)f.removeNode(n[r])}},ka:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.shift();if(1<e.length){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)if(e.push(n),n=n.nextSibling,!n)return;e.push(i)}}return e},Nb:function(e,t){7>p?e.setAttribute("selected",t):e.selected=t},cb:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},vc:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},cc:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},Ja:function(e){return f.a.cc(e,e.ownerDocument.documentElement)},ob:function(e){return!!f.a.qb(e,f.a.Ja)},t:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},n:function(e,t,n){var i=p&&d[t];if(!i&&o)o(e).bind(t,n);else if(i||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var r=function(t){n.call(e,t)},s="on"+t;e.attachEvent(s,r),f.a.w.da(e,function(){e.detachEvent(s,r)})}else e.addEventListener(t,n,!1)},oa:function(e,i){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var r;if("input"===f.a.t(e)&&e.type&&"click"==i.toLowerCase()?(r=e.type,r="checkbox"==r||"radio"==r):r=!1,o&&!r)o(e).trigger(i);else if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");r=n.createEvent(h[i]||"HTMLEvents"),r.initEvent(i,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(r&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+i)}},c:function(e){return f.C(e)?e():e},Xa:function(e){return f.C(e)?e.v():e},Ba:function(e,t,n){if(t){var i=/\S+/g,o=e.className.match(i)||[];f.a.u(t.match(i),function(e){f.a.ea(o,e,n)}),e.className=o.join(" ")}},bb:function(t,n){var i=f.a.c(n);(null===i||i===e)&&(i="");var o=f.f.firstChild(t);!o||3!=o.nodeType||f.f.nextSibling(o)?f.f.T(t,[t.ownerDocument.createTextNode(i)]):o.data=i,f.a.fc(t)},Mb:function(e,t){if(e.name=t,7>=p)try{e.mergeAttributes(n.createElement("<input name='"+e.name+"'/>"),!1)}catch(i){}},fc:function(e){p>=9&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},dc:function(e){if(p){var t=e.style.width;e.style.width=0,e.style.width=t}},sc:function(e,t){e=f.a.c(e),t=f.a.c(t);for(var n=[],i=e;t>=i;i++)n.push(i);return n},S:function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(e[n]);return t},yc:6===p,zc:7===p,L:p,xb:function(e,t){for(var n=f.a.S(e.getElementsByTagName("input")).concat(f.a.S(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},o=[],r=n.length-1;r>=0;r--)i(n[r])&&o.push(n[r]);return o},pc:function(e){return"string"==typeof e&&(e=f.a.cb(e))?r&&r.parse?r.parse(e):new Function("return "+e)():null},eb:function(e,t,n){if(!r||!r.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return r.stringify(f.a.c(e),t,n)},qc:function(e,t,i){i=i||{};var o=i.params||{},r=i.includeFields||this.vb,a=e;if("object"==typeof e&&"form"===f.a.t(e))for(var a=e.action,l=r.length-1;l>=0;l--)for(var c=f.a.xb(e,r[l]),u=c.length-1;u>=0;u--)o[c[u].name]=c[u].value;t=f.a.c(t);var h=n.createElement("form");h.style.display="none",h.action=a,h.method="post";for(var d in t)e=n.createElement("input"),e.type="hidden",e.name=d,e.value=f.a.eb(f.a.c(t[d])),h.appendChild(e);s(o,function(e,t){var i=n.createElement("input");i.type="hidden",i.name=e,i.value=t,h.appendChild(i)}),n.body.appendChild(h),i.submitter?i.submitter(h):h.submit(),setTimeout(function(){h.parentNode.removeChild(h)},0)}}}(),f.b("utils",f.a),f.b("utils.arrayForEach",f.a.u),f.b("utils.arrayFirst",f.a.qb),f.b("utils.arrayFilter",f.a.ta),f.b("utils.arrayGetDistinctValues",f.a.rb),f.b("utils.arrayIndexOf",f.a.m),f.b("utils.arrayMap",f.a.Da),f.b("utils.arrayPushAll",f.a.ga),f.b("utils.arrayRemoveItem",f.a.ua),f.b("utils.extend",f.a.extend),f.b("utils.fieldsIncludedWithJsonPost",f.a.vb),f.b("utils.getFormFields",f.a.xb),f.b("utils.peekObservable",f.a.Xa),f.b("utils.postJson",f.a.qc),f.b("utils.parseJson",f.a.pc),f.b("utils.registerEventHandler",f.a.n),f.b("utils.stringifyJson",f.a.eb),f.b("utils.range",f.a.sc),f.b("utils.toggleDomNodeCssClass",f.a.Ba),f.b("utils.triggerEvent",f.a.oa),f.b("utils.unwrapObservable",f.a.c),f.b("utils.objectForEach",f.a.G),f.b("utils.addOrRemoveItem",f.a.ea),f.b("unwrap",f.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments);return e=n.shift(),function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),f.a.e=new function(){function t(t,r){var s=t[i];if(!s||"null"===s||!o[s]){if(!r)return e;s=t[i]="ko"+n++,o[s]={}}return o[s]}var n=0,i="__ko__"+(new Date).getTime(),o={};return{get:function(n,i){var o=t(n,!1);return o===e?e:o[i]},set:function(n,i,o){(o!==e||t(n,!1)!==e)&&(t(n,!0)[i]=o)},clear:function(e){var t=e[i];return t?(delete o[t],e[i]=null,!0):!1},F:function(){return n++ +i}}},f.b("utils.domData",f.a.e),f.b("utils.domData.clear",f.a.e.clear),f.a.w=new function(){function t(t,n){var o=f.a.e.get(t,i);return o===e&&n&&(o=[],f.a.e.set(t,i,o)),o}function n(e){var i=t(e,!1);if(i)for(var i=i.slice(0),o=0;o<i.length;o++)i[o](e);if(f.a.e.clear(e),f.a.w.cleanExternalData(e),s[e.nodeType])for(i=e.firstChild;e=i;)i=e.nextSibling,8===e.nodeType&&n(e)}var i=f.a.e.F(),r={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{da:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},Kb:function(n,o){var r=t(n,!1);r&&(f.a.ua(r,o),0==r.length&&f.a.e.set(n,i,e))},R:function(e){if(r[e.nodeType]&&(n(e),s[e.nodeType])){var t=[];f.a.ga(t,e.getElementsByTagName("*"));for(var i=0,o=t.length;o>i;i++)n(t[i])}return e},removeNode:function(e){f.R(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){o&&"function"==typeof o.cleanData&&o.cleanData([e])}}},f.R=f.a.w.R,f.removeNode=f.a.w.removeNode,f.b("cleanNode",f.R),f.b("removeNode",f.removeNode),f.b("utils.domNodeDisposal",f.a.w),f.b("utils.domNodeDisposal.addDisposeCallback",f.a.w.da),f.b("utils.domNodeDisposal.removeDisposeCallback",f.a.w.Kb),function(){f.a.ba=function(e){var i;if(o){if(o.parseHTML)i=o.parseHTML(e)||[];else if((i=o.clean([e]))&&i[0]){for(e=i[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{var r=f.a.cb(e).toLowerCase();for(i=n.createElement("div"),r=r.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],e="ignored<div>"+r[1]+e+r[2]+"</div>","function"==typeof t.innerShiv?i.appendChild(t.innerShiv(e)):i.innerHTML=e;r[0]--;)i=i.lastChild;i=f.a.S(i.lastChild.childNodes)}return i},f.a.$a=function(t,n){if(f.a.Ka(t),n=f.a.c(n),null!==n&&n!==e)if("string"!=typeof n&&(n=n.toString()),o)o(t).html(n);else for(var i=f.a.ba(n),r=0;r<i.length;r++)t.appendChild(i[r])}}(),f.b("utils.parseHtmlFragment",f.a.ba),f.b("utils.setHtml",f.a.$a),f.D=function(){function t(e,n){if(e)if(8==e.nodeType){var i=f.D.Gb(e.nodeValue);null!=i&&n.push({bc:e,mc:i})}else if(1==e.nodeType)for(var i=0,o=e.childNodes,r=o.length;r>i;i++)t(o[i],n)}var n={};return{Ua:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[t]=e,"<!--[ko_memo:"+t+"]-->"},Rb:function(t,i){var o=n[t];if(o===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return o.apply(null,i||[]),!0}finally{delete n[t]}},Sb:function(e,n){var i=[];t(e,i);for(var o=0,r=i.length;r>o;o++){var s=i[o].bc,a=[s];n&&f.a.ga(a,n),f.D.Rb(i[o].mc,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},Gb:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),f.b("memoization",f.D),f.b("memoization.memoize",f.D.Ua),
f.b("memoization.unmemoize",f.D.Rb),f.b("memoization.parseMemoText",f.D.Gb),f.b("memoization.unmemoizeDomNodeAndDescendants",f.D.Sb),f.La={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return f.j({read:e,write:function(i){clearTimeout(n),n=setTimeout(function(){e(i)},t)}})},rateLimit:function(e,t){var n,i,o;"number"==typeof t?n=t:(n=t.timeout,i=t.method),o="notifyWhenChangesStop"==i?u:c,e.Ta(function(e){return o(e,n)})},notify:function(e,t){e.equalityComparer="always"==t?null:l}};var d={undefined:1,"boolean":1,number:1,string:1};f.b("extenders",f.La),f.Pb=function(e,t,n){this.target=e,this.wa=t,this.ac=n,this.Cb=!1,f.A(this,"dispose",this.K)},f.Pb.prototype.K=function(){this.Cb=!0,this.ac()},f.P=function(){f.a.Aa(this,f.P.fn),this.M={}};var p="change",g={U:function(e,t,n){var i=this;n=n||p;var o=new f.Pb(i,t?e.bind(t):e,function(){f.a.ua(i.M[n],o),i.nb&&i.nb()});return i.va&&i.va(n),i.M[n]||(i.M[n]=[]),i.M[n].push(o),o},notifySubscribers:function(e,t){if(t=t||p,this.Ab(t))try{f.k.Ea();for(var n,i=this.M[t].slice(0),o=0;n=i[o];++o)n.Cb||n.wa(e)}finally{f.k.end()}},Ta:function(e){var t,n,i,o=this,r=f.C(o);o.qa||(o.qa=o.notifySubscribers,o.notifySubscribers=function(e,t){t&&t!==p?"beforeChange"===t?o.kb(e):o.qa(e,t):o.lb(e)});var s=e(function(){r&&i===o&&(i=o()),t=!1,o.Pa(n,i)&&o.qa(n=i)});o.lb=function(e){t=!0,i=e,s()},o.kb=function(e){t||(n=e,o.qa(e,"beforeChange"))}},Ab:function(e){return this.M[e]&&this.M[e].length},yb:function(){var e=0;return f.a.G(this.M,function(t,n){e+=n.length}),e},Pa:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&f.a.G(e,function(e,n){var i=f.La[e];"function"==typeof i&&(t=i(t,n)||t)}),t}};f.A(g,"subscribe",g.U),f.A(g,"extend",g.extend),f.A(g,"getSubscriptionsCount",g.yb),f.a.xa&&f.a.za(g,Function.prototype),f.P.fn=g,f.Db=function(e){return null!=e&&"function"==typeof e.U&&"function"==typeof e.notifySubscribers},f.b("subscribable",f.P),f.b("isSubscribable",f.Db),f.Y=f.k=function(){function e(e){i.push(n),n=e}function t(){n=i.pop()}var n,i=[],o=0;return{Ea:e,end:t,Jb:function(e){if(n){if(!f.Db(e))throw Error("Only subscribable things can act as dependencies");n.wa(e,e.Vb||(e.Vb=++o))}},B:function(n,i,o){try{return e(),n.apply(i,o||[])}finally{t()}},la:function(){return n?n.s.la():void 0},ma:function(){return n?n.ma:void 0}}}(),f.b("computedContext",f.Y),f.b("computedContext.getDependenciesCount",f.Y.la),f.b("computedContext.isInitial",f.Y.ma),f.b("computedContext.isSleeping",f.Y.Ac),f.p=function(e){function t(){return 0<arguments.length?(t.Pa(n,arguments[0])&&(t.X(),n=arguments[0],t.W()),this):(f.k.Jb(t),n)}var n=e;return f.P.call(t),f.a.Aa(t,f.p.fn),t.v=function(){return n},t.W=function(){t.notifySubscribers(n)},t.X=function(){t.notifySubscribers(n,"beforeChange")},f.A(t,"peek",t.v),f.A(t,"valueHasMutated",t.W),f.A(t,"valueWillMutate",t.X),t},f.p.fn={equalityComparer:l};var m=f.p.rc="__ko_proto__";f.p.fn[m]=f.p,f.a.xa&&f.a.za(f.p.fn,f.P.fn),f.Ma=function(t,n){return null===t||t===e||t[m]===e?!1:t[m]===n?!0:f.Ma(t[m],n)},f.C=function(e){return f.Ma(e,f.p)},f.Ra=function(e){return"function"==typeof e&&e[m]===f.p||"function"==typeof e&&e[m]===f.j&&e.hc?!0:!1},f.b("observable",f.p),f.b("isObservable",f.C),f.b("isWriteableObservable",f.Ra),f.b("isWritableObservable",f.Ra),f.aa=function(e){if(e=e||[],"object"!=typeof e||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=f.p(e),f.a.Aa(e,f.aa.fn),e.extend({trackArrayChanges:!0})},f.aa.fn={remove:function(e){for(var t=this.v(),n=[],i="function"!=typeof e||f.C(e)?function(t){return t===e}:e,o=0;o<t.length;o++){var r=t[o];i(r)&&(0===n.length&&this.X(),n.push(r),t.splice(o,1),o--)}return n.length&&this.W(),n},removeAll:function(t){if(t===e){var n=this.v(),i=n.slice(0);return this.X(),n.splice(0,n.length),this.W(),i}return t?this.remove(function(e){return 0<=f.a.m(t,e)}):[]},destroy:function(e){var t=this.v(),n="function"!=typeof e||f.C(e)?function(t){return t===e}:e;this.X();for(var i=t.length-1;i>=0;i--)n(t[i])&&(t[i]._destroy=!0);this.W()},destroyAll:function(t){return t===e?this.destroy(function(){return!0}):t?this.destroy(function(e){return 0<=f.a.m(t,e)}):[]},indexOf:function(e){var t=this();return f.a.m(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.X(),this.v()[n]=t,this.W())}},f.a.u("pop push reverse shift sort splice unshift".split(" "),function(e){f.aa.fn[e]=function(){var t=this.v();return this.X(),this.sb(t,e,arguments),t=t[e].apply(t,arguments),this.W(),t}}),f.a.u(["slice"],function(e){f.aa.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),f.a.xa&&f.a.za(f.aa.fn,f.p.fn),f.b("observableArray",f.aa);var v="arrayChange";f.La.trackArrayChanges=function(e){function t(){if(!n){n=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&n!==p||++o,t.apply(this,arguments)};var r=[].concat(e.v()||[]);i=null,e.U(function(t){if(t=[].concat(t||[]),e.Ab(v)){var n;(!i||o>1)&&(i=f.a.Fa(r,t,{sparse:!0})),n=i,n.length&&e.notifySubscribers(n,v)}r=t,i=null,o=0})}}if(!e.sb){var n=!1,i=null,o=0,r=e.U;e.U=e.subscribe=function(e,n,i){return i===v&&t(),r.apply(this,arguments)},e.sb=function(e,t,r){function s(e,t,n){return a[a.length]={status:e,value:t,index:n}}if(n&&!o){var a=[],l=e.length,c=r.length,u=0;switch(t){case"push":u=l;case"unshift":for(t=0;c>t;t++)s("added",r[t],u+t);break;case"pop":u=l-1;case"shift":l&&s("deleted",e[u],u);break;case"splice":t=Math.min(Math.max(0,0>r[0]?l+r[0]:r[0]),l);for(var l=1===c?l:Math.min(t+(r[1]||0),l),c=t+c-2,u=Math.max(l,c),h=[],d=[],p=2;u>t;++t,++p)l>t&&d.push(s("deleted",e[t],t)),c>t&&h.push(s("added",r[p],t));f.a.wb(d,h);break;default:return}i=a}}}},f.s=f.j=function(t,n,i){function o(){f.a.G(_,function(e,t){t.K()}),_={}}function r(){o(),T=0,m=!0,d=!1}function s(){var e=l.throttleEvaluation;e&&e>=0?(clearTimeout(E),E=setTimeout(a,e)):l.ib?l.ib():a()}function a(t){if(p){if(b)throw Error("A 'pure' computed must not be called recursively")}else if(!m){if(k&&k()){if(!g)return void S()}else g=!1;if(p=!0,y)try{var i={};f.k.Ea({wa:function(e,t){i[t]||(i[t]=1,++T)},s:l,ma:e}),T=0,h=v.call(n)}finally{f.k.end(),p=!1}else try{var o=_,r=T;f.k.Ea({wa:function(e,t){m||(r&&o[t]?(_[t]=o[t],++T,delete o[t],--r):_[t]||(_[t]=e.U(s),++T))},s:l,ma:b?e:!T}),_={},T=0;try{var a=n?v.call(n):v()}finally{f.k.end(),r&&f.a.G(o,function(e,t){t.K()}),d=!1}l.Pa(h,a)&&(l.notifySubscribers(h,"beforeChange"),h=a,!0!==t&&l.notifySubscribers(h))}finally{p=!1}T||S()}}function l(){if(0<arguments.length){if("function"!=typeof w)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return w.apply(n,arguments),this}return f.k.Jb(l),d&&a(!0),h}function c(){return d&&!T&&a(!0),h}function u(){return d||T>0}var h,d=!0,p=!1,g=!1,m=!1,v=t,b=!1,y=!1;if(v&&"object"==typeof v?(i=v,v=i.read):(i=i||{},v||(v=i.read)),"function"!=typeof v)throw Error("Pass a function that returns the value of the ko.computed");var w=i.write,x=i.disposeWhenNodeIsRemoved||i.o||null,C=i.disposeWhen||i.Ia,k=C,S=r,_={},T=0,E=null;n||(n=i.owner),f.P.call(l),f.a.Aa(l,f.j.fn),l.v=c,l.la=function(){return T},l.hc="function"==typeof i.write,l.K=function(){S()},l.Z=u;var A=l.Ta;return l.Ta=function(e){A.call(l,e),l.ib=function(){l.kb(h),d=!0,l.lb(l)}},i.pure?(y=b=!0,l.va=function(){y&&(y=!1,a(!0))},l.nb=function(){l.yb()||(o(),y=d=!0)}):i.deferEvaluation&&(l.va=function(){c(),delete l.va}),f.A(l,"peek",l.v),f.A(l,"dispose",l.K),f.A(l,"isActive",l.Z),f.A(l,"getDependenciesCount",l.la),x&&(g=!0,x.nodeType&&(k=function(){return!f.a.Ja(x)||C&&C()})),y||i.deferEvaluation||a(),x&&u()&&x.nodeType&&(S=function(){f.a.w.Kb(x,S),r()},f.a.w.da(x,S)),l},f.jc=function(e){return f.Ma(e,f.j)},g=f.p.rc,f.j[g]=f.p,f.j.fn={equalityComparer:l},f.j.fn[g]=f.j,f.a.xa&&f.a.za(f.j.fn,f.P.fn),f.b("dependentObservable",f.j),f.b("computed",f.j),f.b("isComputed",f.jc),f.Ib=function(e,t){return"function"==typeof e?f.s(e,t,{pure:!0}):(e=f.a.extend({},e),e.pure=!0,f.s(e,t))},f.b("pureComputed",f.Ib),function(){function t(o,r,s){if(s=s||new i,o=r(o),"object"!=typeof o||null===o||o===e||o instanceof Date||o instanceof String||o instanceof Number||o instanceof Boolean)return o;var a=o instanceof Array?[]:{};return s.save(o,a),n(o,function(n){var i=r(o[n]);switch(typeof i){case"boolean":case"number":case"string":case"function":a[n]=i;break;case"object":case"undefined":var l=s.get(i);a[n]=l!==e?l:t(i,r,s)}}),a}function n(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function i(){this.keys=[],this.hb=[]}f.Qb=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(e){for(var t=0;f.C(e)&&10>t;t++)e=e();return e})},f.toJSON=function(e,t,n){return e=f.Qb(e),f.a.eb(e,t,n)},i.prototype={save:function(e,t){var n=f.a.m(this.keys,e);n>=0?this.hb[n]=t:(this.keys.push(e),this.hb.push(t))},get:function(t){return t=f.a.m(this.keys,t),t>=0?this.hb[t]:e}}}(),f.b("toJS",f.Qb),f.b("toJSON",f.toJSON),function(){f.i={q:function(t){switch(f.a.t(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?f.a.e.get(t,f.d.options.Va):7>=f.a.L?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?f.i.q(t.options[t.selectedIndex]):e;default:return t.value}},ca:function(t,n,i){switch(f.a.t(t)){case"option":switch(typeof n){case"string":f.a.e.set(t,f.d.options.Va,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=n;break;default:f.a.e.set(t,f.d.options.Va,n),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof n?n:""}break;case"select":(""===n||null===n)&&(n=e);for(var o,r=-1,s=0,a=t.options.length;a>s;++s)if(o=f.i.q(t.options[s]),o==n||""==o&&n===e){r=s;break}(i||r>=0||n===e&&1<t.size)&&(t.selectedIndex=r);break;default:(null===n||n===e)&&(n=""),t.value=n}}}}(),f.b("selectExtensions",f.i),f.b("selectExtensions.readValue",f.i.q),f.b("selectExtensions.writeValue",f.i.ca),f.h=function(){function e(e){e=f.a.cb(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1));var t,n,s=[],a=e.match(i),l=0;if(a){a.push(",");for(var c,u=0;c=a[u];++u){var h=c.charCodeAt(0);if(44===h){if(0>=l){t&&s.push(n?{key:t,value:n.join("")}:{unknown:t}),t=n=l=0;continue}}else if(58===h){if(!n)continue}else if(47===h&&u&&1<c.length)(h=a[u-1].match(o))&&!r[h[0]]&&(e=e.substr(e.indexOf(c)+1),a=e.match(i),a.push(","),u=-1,c="/");else if(40===h||123===h||91===h)++l;else if(41===h||125===h||93===h)--l;else if(!t&&!n){t=34===h||39===h?c.slice(1,-1):c;continue}n?n.push(c):n=[c]}}return s}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),o=/[\])"'A-Za-z0-9_$]+$/,r={"in":1,"return":1,"typeof":1},s={};return{ha:[],V:s,Wa:e,ya:function(i,o){function r(e,i){var o;if(!u){var h=f.getBindingHandler(e);if(h&&h.preprocess&&!(i=h.preprocess(i,e,r)))return;(h=s[e])&&(o=i,0<=f.a.m(t,o)?o=!1:(h=o.match(n),o=null===h?!1:h[1]?"Object("+h[1]+")"+h[2]:o),h=o),h&&l.push("'"+e+"':function(_z){"+o+"=_z}")}c&&(i="function(){return "+i+" }"),a.push("'"+e+"':"+i)}o=o||{};var a=[],l=[],c=o.valueAccessors,u=o.bindingParams,h="string"==typeof i?e(i):i;return f.a.u(h,function(e){r(e.key||e.unknown,e.value)}),l.length&&r("_ko_property_writers","{"+l.join(",")+" }"),a.join(",")},lc:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},pa:function(e,t,n,i,o){e&&f.C(e)?!f.Ra(e)||o&&e.v()===i||e(i):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](i)}}}(),f.b("expressionRewriting",f.h),f.b("expressionRewriting.bindingRewriteValidators",f.h.ha),f.b("expressionRewriting.parseObjectLiteral",f.h.Wa),f.b("expressionRewriting.preProcessBindings",f.h.ya),f.b("expressionRewriting._twoWayBindings",f.h.V),f.b("jsonExpressionRewriting",f.h),f.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",f.h.ya),function(){function e(e){return 8==e.nodeType&&s.test(r?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&a.test(r?e.text:e.nodeValue)}function i(n,i){for(var o=n,r=1,s=[];o=o.nextSibling;){if(t(o)&&(r--,0===r))return s;s.push(o),e(o)&&r++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function o(e,t){var n=i(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var r=n&&"<!--test-->"===n.createComment("test").text,s=r?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=r?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};f.f={Q:{},childNodes:function(t){return e(t)?i(t):t.childNodes},ja:function(t){if(e(t)){t=f.f.childNodes(t);for(var n=0,i=t.length;i>n;n++)f.removeNode(t[n])}else f.a.Ka(t)},T:function(t,n){if(e(t)){f.f.ja(t);for(var i=t.nextSibling,o=0,r=n.length;r>o;o++)i.parentNode.insertBefore(n[o],i)}else f.a.T(t,n)},Hb:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},Bb:function(t,n,i){i?e(t)?t.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?t.insertBefore(n,i.nextSibling):t.appendChild(n):f.f.Hb(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=o(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},gc:e,xc:function(e){return(e=(r?e.text:e.nodeValue).match(s))?e[1]:null},Fb:function(n){if(l[f.a.t(n)]){var i=n.firstChild;if(i)do if(1===i.nodeType){var r;r=i.firstChild;var s=null;if(r)do if(s)s.push(r);else if(e(r)){var a=o(r,!0);a?r=a:s=[r]}else t(r)&&(s=[r]);while(r=r.nextSibling);if(r=s)for(s=i.nextSibling,a=0;a<r.length;a++)s?n.insertBefore(r[a],s):n.appendChild(r[a])}while(i=i.nextSibling)}}}}(),f.b("virtualElements",f.f),f.b("virtualElements.allowedBindings",f.f.Q),f.b("virtualElements.emptyNode",f.f.ja),f.b("virtualElements.insertAfter",f.f.Bb),f.b("virtualElements.prepend",f.f.Hb),f.b("virtualElements.setDomNodeChildren",f.f.T),function(){f.J=function(){this.Yb={}},f.a.extend(f.J.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||f.g.getComponentNameForNode(e);case 8:return f.f.gc(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t),n=n?this.parseBindingsString(n,t,e):null;return f.g.mb(n,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t),n=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return f.g.mb(n,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return f.f.xc(e);default:return null}},parseBindingsString:function(e,t,n,i){try{var o,r=this.Yb,s=e+(i&&i.valueAccessors||"");if(!(o=r[s])){var a,l="with($context){with($data||{}){return{"+f.h.ya(e,i)+"}}}";a=new Function("$context","$element",l),o=r[s]=a}return o(t,n)}catch(c){throw c.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+c.message,c}}}),f.J.instance=new f.J}(),f.b("bindingProvider",f.J),function(){function n(e){return function(){return e}}function i(e){return e()}function r(e){return f.a.na(f.k.B(e),function(t,n){return function(){return e()[n]}})}function s(e,t){return r(this.getBindings.bind(this,e,t))}function a(e,t,n){var i,o=f.f.firstChild(t),r=f.J.instance,s=r.preprocessNode;if(s){for(;i=o;)o=f.f.nextSibling(i),s.call(r,i);o=f.f.firstChild(t)}for(;i=o;)o=f.f.nextSibling(i),l(e,i,n)}function l(e,t,n){var i=!0,o=1===t.nodeType;o&&f.f.Fb(t),(o&&n||f.J.instance.nodeHasBindings(t))&&(i=u(t,null,e,n).shouldBindDescendants),i&&!d[f.a.t(t)]&&a(e,t,!o)}function c(e){var t=[],n={},i=[];return f.a.G(e,function o(r){if(!n[r]){var s=f.getBindingHandler(r);s&&(s.after&&(i.push(r),f.a.u(s.after,function(t){if(e[t]){if(-1!==f.a.m(i,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));o(t)}}),i.length--),t.push({key:r,zb:s})),n[r]=!0}}),t}function u(t,n,o,r){var a=f.a.e.get(t,p);if(!n){if(a)throw Error("You cannot apply bindings multiple times to the same element.");f.a.e.set(t,p,!0)}!a&&r&&f.Ob(t,o);var l;if(n&&"function"!=typeof n)l=n;else{var u=f.J.instance,h=u.getBindingAccessors||s,d=f.j(function(){return(l=n?n(o,t):h.call(u,t,o))&&o.I&&o.I(),l},null,{o:t});l&&d.Z()||(d=null)}var g;if(l){var m=d?function(e){return function(){return i(d()[e])}}:function(e){return l[e]},v=function(){return f.a.na(d?d():l,i)};v.get=function(e){return l[e]&&i(m(e))},v.has=function(e){return e in l},r=c(l),f.a.u(r,function(n){var i=n.zb.init,r=n.zb.update,s=n.key;if(8===t.nodeType&&!f.f.Q[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof i&&f.k.B(function(){var n=i(t,m(s),v,o.$data,o);if(n&&n.controlsDescendantBindings){if(g!==e)throw Error("Multiple bindings ("+g+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");g=s}}),"function"==typeof r&&f.j(function(){r(t,m(s),v,o.$data,o)},null,{o:t})}catch(a){throw a.message='Unable to process binding "'+s+": "+l[s]+'"\nMessage: '+a.message,a}})}return{shouldBindDescendants:g===e}}function h(e){return e&&e instanceof f.N?e:new f.N(e)}f.d={};var d={script:!0};f.getBindingHandler=function(e){return f.d[e]},f.N=function(t,n,i,o){var r,s=this,a="function"==typeof t&&!f.C(t),l=f.j(function(){var e=a?t():t,r=f.a.c(e);return n?(n.I&&n.I(),f.a.extend(s,n),l&&(s.I=l)):(s.$parents=[],s.$root=r,s.ko=f),s.$rawData=e,s.$data=r,i&&(s[i]=r),o&&o(s,n,r),s.$data},null,{Ia:function(){return r&&!f.a.ob(r)},o:!0});l.Z()&&(s.I=l,l.equalityComparer=null,r=[],l.Tb=function(t){r.push(t),f.a.w.da(t,function(t){f.a.ua(r,t),r.length||(l.K(),s.I=l=e)})})},f.N.prototype.createChildContext=function(e,t,n){return new f.N(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},f.N.prototype.extend=function(e){return new f.N(this.I||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,f.a.extend(t,"function"==typeof e?e():e)})};var p=f.a.e.F(),g=f.a.e.F();f.Ob=function(e,t){return 2!=arguments.length?f.a.e.get(e,g):(f.a.e.set(e,g,t),void(t.I&&t.I.Tb(e)))},f.ra=function(e,t,n){return 1===e.nodeType&&f.f.Fb(e),u(e,t,h(n),!0)},f.Wb=function(e,t,i){return i=h(i),f.ra(e,"function"==typeof t?r(t.bind(null,i,e)):f.a.na(t,n),i)},f.Ca=function(e,t){1!==t.nodeType&&8!==t.nodeType||a(h(e),t,!0)},f.pb=function(e,n){if(!o&&t.jQuery&&(o=t.jQuery),n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||t.document.body,l(h(e),n,!0)},f.Ha=function(t){switch(t.nodeType){case 1:case 8:var n=f.Ob(t);if(n)return n;if(t.parentNode)return f.Ha(t.parentNode)}return e},f.$b=function(t){return(t=f.Ha(t))?t.$data:e},f.b("bindingHandlers",f.d),f.b("applyBindings",f.pb),f.b("applyBindingsToDescendants",f.Ca),f.b("applyBindingAccessorsToNode",f.ra),f.b("applyBindingsToNode",f.Wb),f.b("contextFor",f.Ha),f.b("dataFor",f.$b)}(),function(e){function t(t,i){var s,a=o.hasOwnProperty(t)?o[t]:e;a||(a=o[t]=new f.P,n(t,function(e){r[t]=e,delete o[t],s?a.notifySubscribers(e):setTimeout(function(){a.notifySubscribers(e)},0)}),s=!0),a.U(i)}function n(e,t){i("getConfig",[e],function(n){n?i("loadComponent",[e,n],function(e){t(e)}):t(null)})}function i(t,n,o,r){r||(r=f.g.loaders.slice(0));var s=r.shift();if(s){var a=s[t];if(a){var l=!1;if(a.apply(s,n.concat(function(e){l?o(null):null!==e?o(e):i(t,n,o,r)}))!==e&&(l=!0,!s.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(t,n,o,r)}else o(null)}var o={},r={};f.g={get:function(n,i){var o=r.hasOwnProperty(n)?r[n]:e;o?setTimeout(function(){i(o)},0):t(n,i)},tb:function(e){delete r[e]},jb:i},f.g.loaders=[],f.b("components",f.g),f.b("components.get",f.g.get),f.b("components.clearCachedDefinition",f.g.tb)}(),function(){function e(e,t,n,i){function o(){0===--a&&i(r)}var r={},a=2,l=n.template;n=n.viewModel,l?s(t,l,function(t){f.g.jb("loadTemplate",[e,t],function(e){r.template=e,o()})}):o(),n?s(t,n,function(t){f.g.jb("loadViewModel",[e,t],function(e){r[u]=e,o()})}):o()}function i(e,t,n){if("function"==typeof t)n(function(e){return new t(e)});else if("function"==typeof t[u])n(t[u]);else if("instance"in t){var o=t.instance;n(function(){return o})}else"viewModel"in t?i(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function o(e){switch(f.a.t(e)){case"script":return f.a.ba(e.text);case"textarea":return f.a.ba(e.value);case"template":if(r(e.content))return f.a.ia(e.content.childNodes)}return f.a.ia(e.childNodes)}function r(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function s(e,n,i){"string"==typeof n.require?a||t.require?(a||t.require)([n.require],i):e("Uses require, but no AMD loader is present"):i(n)}function l(e){return function(t){throw Error("Component '"+e+"': "+t)}}var c={};f.g.tc=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(f.g.Qa(e))throw Error("Component "+e+" is already registered");c[e]=t},f.g.Qa=function(e){return e in c},f.g.wc=function(e){delete c[e],f.g.tb(e)},f.g.ub={getConfig:function(e,t){t(c.hasOwnProperty(e)?c[e]:null)},loadComponent:function(t,n,i){var o=l(t);s(o,n,function(n){e(t,o,n,i)})},loadTemplate:function(e,i,s){if(e=l(e),"string"==typeof i)s(f.a.ba(i));else if(i instanceof Array)s(i);else if(r(i))s(f.a.S(i.childNodes));else if(i.element)if(i=i.element,t.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)s(o(i));else if("string"==typeof i){var a=n.getElementById(i);a?s(o(a)):e("Cannot find element with ID "+i)}else e("Unknown element type: "+i);else e("Unknown template value: "+i)},loadViewModel:function(e,t,n){i(l(e),t,n)}};var u="createViewModel";f.b("components.register",f.g.tc),f.b("components.isRegistered",f.g.Qa),f.b("components.unregister",f.g.wc),f.b("components.defaultLoader",f.g.ub),f.g.loaders.push(f.g.ub),f.g.Ub=c}(),function(){function e(e,n){var i=e.getAttribute("params");if(i){var i=t.parseBindingsString(i,n,e,{valueAccessors:!0,bindingParams:!0}),i=f.a.na(i,function(t){return f.s(t,null,{o:e})}),o=f.a.na(i,function(t){return t.Z()?f.s(function(){return f.a.c(t())},null,{o:e}):t.v()});return o.hasOwnProperty("$raw")||(o.$raw=i),o}return{$raw:{}}}f.g.getComponentNameForNode=function(e){return e=f.a.t(e),f.g.Qa(e)&&e},f.g.mb=function(t,n,i,o){if(1===n.nodeType){var r=f.g.getComponentNameForNode(n);if(r){if(t=t||{},t.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var s={name:r,params:e(n,i)};t.component=o?function(){return s}:s}}return t};var t=new f.J;9>f.a.L&&(f.g.register=function(e){return function(t){return n.createElement(t),e.apply(this,arguments)}}(f.g.register),n.createDocumentFragment=function(e){return function(){var t,n=e(),i=f.g.Ub;for(t in i)i.hasOwnProperty(t)&&n.createElement(t);return n}}(n.createDocumentFragment))}(),function(){var e=0;f.d.component={init:function(t,n,i,o,r){function s(){var e=a&&a.dispose;"function"==typeof e&&e.call(a),l=null}var a,l;return f.a.w.da(t,s),f.s(function(){var i,o,c=f.a.c(n());if("string"==typeof c?i=c:(i=f.a.c(c.name),o=f.a.c(c.params)),!i)throw Error("No component name specified");var u=l=++e;f.g.get(i,function(e){if(l===u){if(s(),!e)throw Error("Unknown component '"+i+"'");var n=e.template;if(!n)throw Error("Component '"+i+"' has no template");n=f.a.ia(n),f.f.T(t,n);var n=o,c=e.createViewModel;e=c?c.call(e,n,{element:t}):n,n=r.createChildContext(e),a=e,f.Ca(n,t)}})},null,{o:t}),{controlsDescendantBindings:!0}}},f.f.Q.component=!0}();var b={"class":"className","for":"htmlFor"};f.d.attr={update:function(t,n){var i=f.a.c(n())||{};f.a.G(i,function(n,i){i=f.a.c(i);var o=!1===i||null===i||i===e;o&&t.removeAttribute(n),8>=f.a.L&&n in b?(n=b[n],o?t.removeAttribute(n):t[n]=i):o||t.setAttribute(n,i.toString()),"name"===n&&f.a.Mb(t,o?"":i.toString())})}},function(){f.d.checked={after:["value","attr"],init:function(t,n,i){function o(){var e=t.checked,o=h?s():e;if(!f.Y.ma()&&(!l||e)){var r=f.k.B(n);c?u!==o?(e&&(f.a.ea(r,o,!0),f.a.ea(r,u,!1)),u=o):f.a.ea(r,o,e):f.h.pa(r,i,"checked",o,!0)}}function r(){var e=f.a.c(n());t.checked=c?0<=f.a.m(e,s()):a?e:s()===e}var s=f.Ib(function(){return i.has("checkedValue")?f.a.c(i.get("checkedValue")):i.has("value")?f.a.c(i.get("value")):t.value}),a="checkbox"==t.type,l="radio"==t.type;if(a||l){var c=a&&f.a.c(n())instanceof Array,u=c?s():e,h=l||c;l&&!t.name&&f.d.uniqueName.init(t,function(){return!0}),f.s(o,null,{o:t}),f.a.n(t,"click",o),f.s(r,null,{o:t})}}},f.h.V.checked=!0,f.d.checkedValue={update:function(e,t){e.value=f.a.c(t())}}}(),f.d.css={update:function(e,t){var n=f.a.c(t());"object"==typeof n?f.a.G(n,function(t,n){n=f.a.c(n),f.a.Ba(e,t,n)}):(n=String(n||""),f.a.Ba(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,f.a.Ba(e,n,!0))}},f.d.enable={update:function(e,t){var n=f.a.c(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},f.d.disable={update:function(e,t){f.d.enable.update(e,function(){return!f.a.c(t())})}},f.d.event={init:function(e,t,n,i,o){var r=t()||{};f.a.G(r,function(r){"string"==typeof r&&f.a.n(e,r,function(e){var s,a=t()[r];if(a){try{var l=f.a.S(arguments);i=o.$data,l.unshift(i),s=a.apply(i,l)}finally{!0!==s&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(r+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},f.d.foreach={Eb:function(e){return function(){var t=e(),n=f.a.Xa(t);return n&&"number"!=typeof n.length?(f.a.c(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:f.O.Oa}):{foreach:t,templateEngine:f.O.Oa}}},init:function(e,t){return f.d.template.init(e,f.d.foreach.Eb(t))},update:function(e,t,n,i,o){return f.d.template.update(e,f.d.foreach.Eb(t),n,i,o)}},f.h.ha.foreach=!1,f.f.Q.foreach=!0,f.d.hasfocus={init:function(e,t,n){function i(i){e.__ko_hasfocusUpdating=!0;var o=e.ownerDocument;if("activeElement"in o){var r;try{r=o.activeElement}catch(s){r=o.body}i=r===e}o=t(),f.h.pa(o,n,"hasfocus",i,!0),e.__ko_hasfocusLastValue=i,e.__ko_hasfocusUpdating=!1}var o=i.bind(null,!0),r=i.bind(null,!1);f.a.n(e,"focus",o),f.a.n(e,"focusin",o),f.a.n(e,"blur",r),f.a.n(e,"focusout",r)},update:function(e,t){var n=!!f.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),f.k.B(f.a.oa,null,[e,n?"focusin":"focusout"]))}},f.h.V.hasfocus=!0,f.d.hasFocus=f.d.hasfocus,f.h.V.hasFocus=!0,f.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){f.a.$a(e,t())}},h("if"),h("ifnot",!1,!0),h("with",!0,!1,function(e,t){return e.createChildContext(t)});var y={};f.d.options={init:function(e){if("select"!==f.a.t(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,i){function o(){return f.a.ta(t.options,function(e){return e.selected})}function r(e,t,n){var i=typeof t;return"function"==i?t(e):"string"==i?e[t]:n}function s(e,n){if(h.length){var i=0<=f.a.m(h,f.i.q(n[0]));f.a.Nb(n[0],i),d&&!i&&f.k.B(f.a.oa,null,[t,"change"])}}var a=0!=t.length&&t.multiple?t.scrollTop:null,l=f.a.c(n()),c=i.get("optionsIncludeDestroyed");n={};var u,h;h=t.multiple?f.a.Da(o(),f.i.q):0<=t.selectedIndex?[f.i.q(t.options[t.selectedIndex])]:[],l&&("undefined"==typeof l.length&&(l=[l]),u=f.a.ta(l,function(t){return c||t===e||null===t||!f.a.c(t._destroy)}),i.has("optionsCaption")&&(l=f.a.c(i.get("optionsCaption")),null!==l&&l!==e&&u.unshift(y)));var d=!1;n.beforeRemove=function(e){t.removeChild(e)},l=s,i.has("optionsAfterRender")&&(l=function(t,n){s(0,n),f.k.B(i.get("optionsAfterRender"),null,[n[0],t!==y?t:e])}),f.a.Za(t,u,function(n,o,s){return s.length&&(h=s[0].selected?[f.i.q(s[0])]:[],d=!0),o=t.ownerDocument.createElement("option"),n===y?(f.a.bb(o,i.get("optionsCaption")),f.i.ca(o,e)):(s=r(n,i.get("optionsValue"),n),f.i.ca(o,f.a.c(s)),n=r(n,i.get("optionsText"),s),f.a.bb(o,n)),[o]},n,l),f.k.B(function(){i.get("valueAllowUnset")&&i.has("value")?f.i.ca(t,f.a.c(i.get("value")),!0):(t.multiple?h.length&&o().length<h.length:h.length&&0<=t.selectedIndex?f.i.q(t.options[t.selectedIndex])!==h[0]:h.length||0<=t.selectedIndex)&&f.a.oa(t,"change")}),f.a.dc(t),a&&20<Math.abs(a-t.scrollTop)&&(t.scrollTop=a)}},f.d.options.Va=f.a.e.F(),f.d.selectedOptions={after:["options","foreach"],init:function(e,t,n){f.a.n(e,"change",function(){var i=t(),o=[];f.a.u(e.getElementsByTagName("option"),function(e){e.selected&&o.push(f.i.q(e))}),f.h.pa(i,n,"selectedOptions",o)})},update:function(e,t){if("select"!=f.a.t(e))throw Error("values binding applies only to SELECT elements");var n=f.a.c(t());n&&"number"==typeof n.length&&f.a.u(e.getElementsByTagName("option"),function(e){var t=0<=f.a.m(n,f.i.q(e));f.a.Nb(e,t)})}},f.h.V.selectedOptions=!0,f.d.style={update:function(t,n){var i=f.a.c(n()||{});f.a.G(i,function(n,i){i=f.a.c(i),(null===i||i===e||!1===i)&&(i=""),t.style[n]=i})}},f.d.submit={init:function(e,t,n,i,o){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");f.a.n(e,"submit",function(n){var i,r=t();try{i=r.call(o.$data,e)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},f.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){f.a.bb(e,t())}},f.f.Q.text=!0,function(){if(t&&t.navigator)var n=function(e){return e?parseFloat(e[1]):void 0},i=t.opera&&t.opera.version&&parseInt(t.opera.version()),o=t.navigator.userAgent,r=n(o.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),s=n(o.match(/Firefox\/([^ ]*)/));if(10>f.a.L)var a=f.a.e.F(),l=f.a.e.F(),c=function(e){var t=this.activeElement;(t=t&&f.a.e.get(t,l))&&t(e)},u=function(e,t){var n=e.ownerDocument;f.a.e.get(n,a)||(f.a.e.set(n,a,!0),f.a.n(n,"selectionchange",c)),f.a.e.set(e,l,t)};f.d.textInput={init:function(t,n,o){function a(e,n){f.a.n(t,e,n)}function l(){var i=f.a.c(n());(null===i||i===e)&&(i=""),p!==e&&i===p?setTimeout(l,4):t.value!==i&&(g=i,t.value=i)}function c(){d||(p=t.value,d=setTimeout(h,4))}function h(){clearTimeout(d),p=d=e;var i=t.value;g!==i&&(g=i,f.h.pa(n(),o,"textInput",i))}var d,p,g=t.value;10>f.a.L?(a("propertychange",function(e){"value"===e.propertyName&&h()}),8==f.a.L&&(a("keyup",h),a("keydown",h)),8<=f.a.L&&(u(t,h),a("dragend",c))):(a("input",h),5>r&&"textarea"===f.a.t(t)?(a("keydown",c),a("paste",c),a("cut",c)):11>i?a("keydown",c):4>s&&(a("DOMAutoComplete",h),a("dragdrop",h),a("drop",h))),a("change",h),f.s(l,null,{o:t})}},f.h.V.textInput=!0,f.d.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),f.d.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++f.d.uniqueName.Zb;f.a.Mb(e,n)}}},f.d.uniqueName.Zb=0,f.d.value={after:["options","foreach"],init:function(e,t,n){if("input"!=e.tagName.toLowerCase()||"checkbox"!=e.type&&"radio"!=e.type){var i=["change"],o=n.get("valueUpdate"),r=!1,s=null;o&&("string"==typeof o&&(o=[o]),f.a.ga(i,o),i=f.a.rb(i));var a=function(){s=null,r=!1;var i=t(),o=f.i.q(e);f.h.pa(i,n,"value",o)};!f.a.L||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=f.a.m(i,"propertychange")||(f.a.n(e,"propertychange",function(){r=!0}),f.a.n(e,"focus",function(){r=!1}),f.a.n(e,"blur",function(){r&&a()})),f.a.u(i,function(t){var n=a;f.a.vc(t,"after")&&(n=function(){s=f.i.q(e),setTimeout(a,0)},t=t.substring(5)),f.a.n(e,t,n)});var l=function(){var i=f.a.c(t()),o=f.i.q(e);if(null!==s&&i===s)setTimeout(l,0);else if(i!==o)if("select"===f.a.t(e)){var r=n.get("valueAllowUnset"),o=function(){f.i.ca(e,i,r);

};o(),r||i===f.i.q(e)?setTimeout(o,0):f.k.B(f.a.oa,null,[e,"change"])}else f.i.ca(e,i)};f.s(l,null,{o:e})}else f.ra(e,{checkedValue:t})},update:function(){}},f.h.V.value=!0,f.d.visible={update:function(e,t){var n=f.a.c(t()),i="none"!=e.style.display;n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},function(e){f.d[e]={init:function(t,n,i,o,r){return f.d.event.init.call(this,t,function(){var t={};return t[e]=n(),t},i,o,r)}}}("click"),f.H=function(){},f.H.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},f.H.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},f.H.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||n;var i=t.getElementById(e);if(!i)throw Error("Cannot find template with ID "+e);return new f.r.l(i)}if(1==e.nodeType||8==e.nodeType)return new f.r.fa(e);throw Error("Unknown template type: "+e)},f.H.prototype.renderTemplate=function(e,t,n,i){return e=this.makeTemplateSource(e,i),this.renderTemplateSource(e,t,n)},f.H.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(e,t).data("isRewritten")},f.H.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},f.b("templateEngine",f.H),f.fb=function(){function e(e,t,n,i){e=f.h.Wa(e);for(var o=f.h.ha,r=0;r<e.length;r++){var s=e[r].key;if(o.hasOwnProperty(s)){var a=o[s];if("function"==typeof a){if(s=a(e[r].value))throw Error(s)}else if(!a)throw Error("This template engine does not support the '"+s+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+f.h.ya(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{ec:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return f.fb.nc(e,t)},n)},nc:function(i,o){return i.replace(t,function(t,n,i,r,s){return e(s,n,i,o)}).replace(n,function(t,n){return e(n,"<!-- ko -->","#comment",o)})},Xb:function(e,t){return f.D.Ua(function(n,i){var o=n.nextSibling;o&&o.nodeName.toLowerCase()===t&&f.ra(o,e,i)})}}}(),f.b("__tr_ambtns",f.fb.Xb),function(){f.r={},f.r.l=function(e){this.l=e},f.r.l.prototype.text=function(){var e=f.a.t(this.l),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.l[e];var t=arguments[0];"innerHTML"===e?f.a.$a(this.l,t):this.l[e]=t};var t=f.a.e.F()+"_";f.r.l.prototype.data=function(e){return 1===arguments.length?f.a.e.get(this.l,t+e):void f.a.e.set(this.l,t+e,arguments[1])};var n=f.a.e.F();f.r.fa=function(e){this.l=e},f.r.fa.prototype=new f.r.l,f.r.fa.prototype.text=function(){if(0==arguments.length){var t=f.a.e.get(this.l,n)||{};return t.gb===e&&t.Ga&&(t.gb=t.Ga.innerHTML),t.gb}f.a.e.set(this.l,n,{gb:arguments[0]})},f.r.l.prototype.nodes=function(){return 0==arguments.length?(f.a.e.get(this.l,n)||{}).Ga:void f.a.e.set(this.l,n,{Ga:arguments[0]})},f.b("templateSources",f.r),f.b("templateSources.domElement",f.r.l),f.b("templateSources.anonymousTemplate",f.r.fa)}(),function(){function t(e,t,n){var i;for(t=f.f.nextSibling(t);e&&(i=e)!==t;)e=f.f.nextSibling(i),n(i,e)}function n(e,n){if(e.length){var i=e[0],o=e[e.length-1],r=i.parentNode,s=f.J.instance,a=s.preprocessNode;if(a){if(t(i,o,function(e,t){var n=e.previousSibling,r=a.call(s,e);r&&(e===i&&(i=r[0]||t),e===o&&(o=r[r.length-1]||n))}),e.length=0,!i)return;i===o?e.push(i):(e.push(i,o),f.a.ka(e,r))}t(i,o,function(e){1!==e.nodeType&&8!==e.nodeType||f.pb(n,e)}),t(i,o,function(e){1!==e.nodeType&&8!==e.nodeType||f.D.Sb(e,[n])}),f.a.ka(e,r)}}function i(e){return e.nodeType?e:0<e.length?e[0]:null}function o(e,t,o,s,a){a=a||{};var l=e&&i(e),l=l&&l.ownerDocument,c=a.templateEngine||r;if(f.fb.ec(o,c,l),o=c.renderTemplate(o,s,a,l),"number"!=typeof o.length||0<o.length&&"number"!=typeof o[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(l=!1,t){case"replaceChildren":f.f.T(e,o),l=!0;break;case"replaceNode":f.a.Lb(e,o),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return l&&(n(o,s),a.afterRender&&f.k.B(a.afterRender,null,[o,s.$data])),o}var r;f.ab=function(t){if(t!=e&&!(t instanceof f.H))throw Error("templateEngine must inherit from ko.templateEngine");r=t},f.Ya=function(t,n,s,a,l){if(s=s||{},(s.templateEngine||r)==e)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",a){var c=i(a);return f.j(function(){var e=n&&n instanceof f.N?n:new f.N(f.a.c(n)),r=f.C(t)?t():"function"==typeof t?t(e.$data,e):t,e=o(a,l,r,e,s);"replaceNode"==l&&(a=e,c=i(a))},null,{Ia:function(){return!c||!f.a.Ja(c)},o:c&&"replaceNode"==l?c.parentNode:c})}return f.D.Ua(function(e){f.Ya(t,n,s,e,"replaceNode")})},f.uc=function(t,i,r,s,a){function l(e,t){n(t,u),r.afterRender&&r.afterRender(t,e)}function c(e,n){u=a.createChildContext(e,r.as,function(e){e.$index=n});var i=f.C(t)?t():"function"==typeof t?t(e,u):t;return o(null,"ignoreTargetNode",i,u,r)}var u;return f.j(function(){var t=f.a.c(i)||[];"undefined"==typeof t.length&&(t=[t]),t=f.a.ta(t,function(t){return r.includeDestroyed||t===e||null===t||!f.a.c(t._destroy)}),f.k.B(f.a.Za,null,[s,t,c,r,l])},null,{o:s})};var s=f.a.e.F();f.d.template={init:function(e,t){var n=f.a.c(t());return"string"==typeof n||n.name?f.f.ja(e):(n=f.f.childNodes(e),n=f.a.oc(n),new f.r.fa(e).nodes(n)),{controlsDescendantBindings:!0}},update:function(t,n,i,o,r){var a,l=n();n=f.a.c(l),i=!0,o=null,"string"==typeof n?n={}:(l=n.name,"if"in n&&(i=f.a.c(n["if"])),i&&"ifnot"in n&&(i=!f.a.c(n.ifnot)),a=f.a.c(n.data)),"foreach"in n?o=f.uc(l||t,i&&n.foreach||[],n,t,r):i?(r="data"in n?r.createChildContext(a,n.as):r,o=f.Ya(l||t,r,n,t)):f.f.ja(t),r=o,(a=f.a.e.get(t,s))&&"function"==typeof a.K&&a.K(),f.a.e.set(t,s,r&&r.Z()?r:e)}},f.h.ha.template=function(e){return e=f.h.Wa(e),1==e.length&&e[0].unknown||f.h.lc(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},f.f.Q.template=!0}(),f.b("setTemplateEngine",f.ab),f.b("renderTemplate",f.Ya),f.a.wb=function(e,t,n){if(e.length&&t.length){var i,o,r,s,a;for(i=o=0;(!n||n>i)&&(s=e[o]);++o){for(r=0;a=t[r];++r)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(r,1),i=r=0;break}i+=r}}},f.a.Fa=function(){function e(e,t,n,i,o){var r,s,a,l,c,u=Math.min,h=Math.max,d=[],p=e.length,g=t.length,m=g-p||1,v=p+g+1;for(r=0;p>=r;r++)for(l=a,d.push(a=[]),c=u(g,r+m),s=h(0,r-1);c>=s;s++)a[s]=s?r?e[r-1]===t[s-1]?l[s-1]:u(l[s]||v,a[s-1]||v)+1:s+1:r+1;for(u=[],h=[],m=[],r=p,s=g;r||s;)g=d[r][s]-1,s&&g===d[r][s-1]?h.push(u[u.length]={status:n,value:t[--s],index:s}):r&&g===d[r-1][s]?m.push(u[u.length]={status:i,value:e[--r],index:r}):(--s,--r,o.sparse||u.push({status:"retained",value:t[s]}));return f.a.wb(h,m,10*p),u.reverse()}return function(t,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},t=t||[],n=n||[],t.length<=n.length?e(t,n,"added","deleted",i):e(n,t,"deleted","added",i)}}(),f.b("utils.compareArrays",f.a.Fa),function(){function t(t,n,i,o,r){var s=[],a=f.j(function(){var e=n(i,r,f.a.ka(s,t))||[];0<s.length&&(f.a.Lb(s,e),o&&f.k.B(o,null,[i,e,r])),s.length=0,f.a.ga(s,e)},null,{o:t,Ia:function(){return!f.a.ob(s)}});return{$:s,j:a.Z()?a:e}}var n=f.a.e.F();f.a.Za=function(i,o,r,s,a){function l(e,t){w=h[t],v!==t&&(k[e]=w),w.Na(v++),f.a.ka(w.$,i),g.push(w),y.push(w)}function c(e,t){if(e)for(var n=0,i=t.length;i>n;n++)t[n]&&f.a.u(t[n].$,function(i){e(i,n,t[n].sa)})}o=o||[],s=s||{};var u=f.a.e.get(i,n)===e,h=f.a.e.get(i,n)||[],d=f.a.Da(h,function(e){return e.sa}),p=f.a.Fa(d,o,s.dontLimitMoves),g=[],m=0,v=0,b=[],y=[];o=[];for(var w,x,C,k=[],d=[],S=0;x=p[S];S++)switch(C=x.moved,x.status){case"deleted":C===e&&(w=h[m],w.j&&w.j.K(),b.push.apply(b,f.a.ka(w.$,i)),s.beforeRemove&&(o[S]=w,y.push(w))),m++;break;case"retained":l(S,m++);break;case"added":C!==e?l(S,C):(w={sa:x.value,Na:f.p(v++)},g.push(w),y.push(w),u||(d[S]=w))}c(s.beforeMove,k),f.a.u(b,s.beforeRemove?f.R:f.removeNode);for(var _,S=0,u=f.f.firstChild(i);w=y[S];S++){for(w.$||f.a.extend(w,t(i,r,w.sa,a,w.Na)),m=0;p=w.$[m];u=p.nextSibling,_=p,m++)p!==u&&f.f.Bb(i,p,_);!w.ic&&a&&(a(w.sa,w.$,w.Na),w.ic=!0)}c(s.beforeRemove,o),c(s.afterMove,k),c(s.afterAdd,d),f.a.e.set(i,n,g)}}(),f.b("utils.setDomNodeChildrenFromArrayMapping",f.a.Za),f.O=function(){this.allowTemplateRewriting=!1},f.O.prototype=new f.H,f.O.prototype.renderTemplateSource=function(e){var t=(9>f.a.L?0:e.nodes)?e.nodes():null;return t?f.a.S(t.cloneNode(!0).childNodes):(e=e.text(),f.a.ba(e))},f.O.Oa=new f.O,f.ab(f.O.Oa),f.b("nativeTemplateEngine",f.O),function(){f.Sa=function(){var e=this.kc=function(){if(!o||!o.tmpl)return 0;try{if(0<=o.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,i,r){if(r=r||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=t.data("precompiled");return s||(s=t.text()||"",s=o.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),t.data("precompiled",s)),t=[i.$data],i=o.extend({koBindingContext:i},r.templateOptions),i=o.tmpl(s,t,i),i.appendTo(n.createElement("div")),o.fragments={},i},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},e>0&&(o.tmpl.tag.ko_code={open:"__.push($1 || '');"},o.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},f.Sa.prototype=new f.H;var e=new f.Sa;0<e.kc&&f.ab(e),f.b("jqueryTmplTemplateEngine",f.Sa)}()})}()}(),!function(e,t){"use strict";"object"==typeof exports?t(exports,require("jquery"),require("knockout"),require("jquery-ui")):"function"==typeof define&&define.amd?define(["exports","jquery","knockout","jquery-ui"],t):t(e.kojqui={},e.jQuery,e.ko)}(this,function(e,t,n){"use strict";var i,o;i=function(){var e,i,o,r;return e=function(e){var t=(e||"").match(/^(\d)\.(\d+)\..*$/);return t?{major:parseInt(t[1],10),minor:parseInt(t[2],10)}:null},i=t&&t.fn?e(t.fn.jquery):null,o=t&&t.ui?e(t.ui.version):null,r=n?e(n.version):null,{jQuery:i,jQueryUI:o,knockout:r}}(),function(){if(!i.jQuery)throw new Error("jQuery must be loaded before knockout-jquery.");if(!i.jQueryUI)throw new Error("jQuery UI must be loaded before knockout-jquery.");if(!i.knockout)throw new Error("knockout must be loaded before knockout-jquery.");if(i.jQueryUI.major<1||1===i.jQueryUI.major&&i.jQueryUI.minor<8)throw new Error("This version of the jQuery UI library is not supported.");if(i.knockout.major<2||2===i.knockout.major&&i.knockout.minor<2)throw new Error("This version of the knockout library is not supported.")}(),o=function(){var e,i,o,r;return e="__kojqui_options",i=function(e,t){var i={};return n.utils.arrayForEach(t,function(t){void 0!==e[t]&&(i[t]=n.utils.unwrapObservable(e[t]))}),i},o=function(e,i,o){n.isObservable(o.refreshOn)&&n.computed({read:function(){o.refreshOn(),t(i)[e]("refresh")},disposeWhenNodeIsRemoved:i})},r=function(r){var s,a,l;s=r.name,t.fn[s]&&(a=function(a,l,c,u,h){var f,d,p,g;return f=l(),p=i(f,r.options),g=i(f,r.events),d=arguments,n.utils.arrayForEach(n.bindingHandlers[s].preInitHandlers,function(e){e.apply(this,d)}),n.applyBindingsToDescendants(h,a),n.utils.domData.set(a,e,p),t.each(g,function(e,t){g[e]=t.bind(u)}),t(a)[s](n.utils.extend(p,g)),r.hasRefresh&&o(s,a,f),n.isWriteableObservable(f.widget)&&f.widget(t(a)),n.utils.domNodeDisposal.addDisposeCallback(a,function(){t(a)[s]("destroy")}),n.utils.arrayForEach(n.bindingHandlers[s].postInitHandlers,function(e){e.apply(this,d)}),{controlsDescendantBindings:!0}},l=function(o,a){var l,c,u;l=a(),c=n.utils.domData.get(o,e),u=i(l,r.options),t.each(u,function(e,n){n!==c[e]&&t(o)[s]("option",e,u[e])}),n.utils.domData.set(o,e,u)},n.bindingHandlers[s]={init:a,update:l,config:r,preInitHandlers:[],postInitHandlers:[]},r.preInit&&n.bindingHandlers[s].preInitHandlers.push(r.preInit),r.postInit&&n.bindingHandlers[s].postInitHandlers.push(r.postInit))},{create:r}}(),function(){var e,r,s,a,l;r=function(i,o){var r=o();n.isWriteableObservable(r.active)&&t(i).on(e,function(){r.active(t(i).accordion("option","active"))}),n.utils.domNodeDisposal.addDisposeCallback(i,function(){t(i).off(".accordion")})},1===i.jQueryUI.major&&8===i.jQueryUI.minor?(s=["active","animated","autoHeight","clearStyle","collapsible","disabled","event","fillSpace","header","icons","navigation","navigationFilter"],a=["change","changestart","create"],l=!1,e="accordionchange.accordion"):(s=["active","animate","collapsible","disabled","event","header","heightStyle","icons"],a=["activate","beforeActivate","create"],l=!0,e="accordionactivate.accordion"),o.create({name:"accordion",options:s,events:a,postInit:r,hasRefresh:l})}(),function(){var e;e=1===i.jQueryUI.major&&8===i.jQueryUI.minor?["change","close","create","focus","open","search","select"]:["change","close","create","focus","open","response","search","select"],o.create({name:"autocomplete",options:["appendTo","autoFocus","delay","disabled","minLength","position","source"],events:e})}(),function(){o.create({name:"button",options:["disabled","icons","label","text"],events:["create"],hasRefresh:!0})}(),function(){o.create({name:"buttonset",options:["items","disabled"],events:["create"],hasRefresh:!0})}(),function(){var e;e=function(e,i){var o,r,s,a;o=i(),r=n.utils.unwrapObservable(o.value),r&&t(e).datepicker("setDate",r),n.isObservable(o.value)&&(s=o.value.subscribe(function(n){t(e).datepicker("setDate",n)}),n.utils.domNodeDisposal.addDisposeCallback(e,function(){s.dispose()})),n.isWriteableObservable(o.value)&&(a=t(e).datepicker("option","onSelect"),t(e).datepicker("option","onSelect",function(n){var i,r;i=t(e).datepicker("option","dateFormat"),r=t.datepicker.parseDate(i,n),o.value(r),"function"==typeof a&&a.apply(this,Array.prototype.slice.call(arguments))}))},o.create({name:"datepicker",options:["altField","altFormat","appendText","autoSize","buttonImage","buttonImageOnly","buttonText","calculateWeek","changeMonth","changeYear","closeText","constrainInput","currentText","dateFormat","dayNames","dayNamesMin","dayNamesShort","defaultDate","duration","firstDay","gotoCurrent","hideIfNoPrevNext","isRTL","maxDate","minDate","monthNames","monthNamesShort","navigationAsDateFormat","nextText","numberOfMonths","prevText","selectOtherMonths","shortYearCutoff","showAnim","showButtonPanel","showCurrentAtPos","showMonthAfterYear","showOn","showOptions","showOtherMonths","showWeek","stepMonths","weekHeader","yearRange","yearSuffix","beforeShow","beforeShowDay","onChangeMonthYear","onClose","onSelect"],events:[],postInit:e})}(),function(){var e,r,s,a;e=function(e){var t;t=document.createElement("DIV"),t.style.display="none",e.parentNode.insertBefore(t,e),n.utils.domNodeDisposal.addDisposeCallback(t,function(){n.removeNode(e)})},r=function(e,i){var o=i();o.isOpen&&n.computed({read:function(){t(e).dialog(n.utils.unwrapObservable(o.isOpen)?"open":"close")},disposeWhenNodeIsRemoved:e}),n.isWriteableObservable(o.isOpen)&&(t(e).on("dialogopen.dialog",function(){o.isOpen(!0)}),t(e).on("dialogclose.dialog",function(){o.isOpen(!1)})),n.utils.domNodeDisposal.addDisposeCallback(e,function(){t(e).off(".dialog")})},1===i.jQueryUI.major&&8===i.jQueryUI.minor?(s=["autoOpen","buttons","closeOnEscape","closeText","dialogClass","disabled","draggable","height","maxHeight","maxWidth","minHeight","minWidth","modal","position","resizable","show","stack","title","width","zIndex"],a=["beforeClose","create","open","focus","dragStart","drag","dragStop","resizeStart","resize","resizeStop","close"]):1===i.jQueryUI.major&&9===i.jQueryUI.minor?(s=["autoOpen","buttons","closeOnEscape","closeText","dialogClass","draggable","height","hide","maxHeight","maxWidth","minHeight","minWidth","modal","position","resizable","show","stack","title","width","zIndex"],a=["beforeClose","create","open","focus","dragStart","drag","dragStop","resizeStart","resize","resizeStop","close"]):(s=["appendTo","autoOpen","buttons","closeOnEscape","closeText","dialogClass","draggable","height","hide","maxHeight","maxWidth","minHeight","minWidth","modal","position","resizable","show","title","width"],a=["beforeClose","create","open","focus","dragStart","drag","dragStop","resizeStart","resize","resizeStop","close"]),o.create({name:"dialog",options:s,events:a,preInit:e,postInit:r})}(),function(){o.create({name:"menu",options:["disabled","icons","menus","position","role"],events:["blur","create","focus","select"],hasRefresh:!0})}(),function(){var e;e=1===i.jQueryUI.major&&8===i.jQueryUI.minor?["disabled","value"]:["disabled","max","value"],o.create({name:"progressbar",options:e,events:["change","create","complete"]})}(),function(){var e;e=function(e,i){var o=i();n.isWriteableObservable(o.value)&&t(e).on("slidechange.slider",function(n,i){var r=t(e).find(".ui-slider-handle");r[0]===i.handle&&o.value(i.value)}),n.utils.domNodeDisposal.addDisposeCallback(e,function(){t(e).off(".slider")})},o.create({name:"slider",options:["animate","disabled","max","min","orientation","range","step","value","values"],events:["create","start","slide","change","stop"],postInit:e})}(),function(){var e;e=function(e,i,o){var r=i();r.value&&n.computed({read:function(){t(e).spinner("value",n.utils.unwrapObservable(r.value))},disposeWhenNodeIsRemoved:e}),n.isWriteableObservable(r.value)&&(o().valueUpdate?t(e).on("spin.spinner",function(e,t){r.value(t.value)}):t(e).on("spinchange.spinner",function(){r.value(t(e).spinner("value"))})),n.utils.domNodeDisposal.addDisposeCallback(e,function(){t(e).off(".spinner")})},o.create({name:"spinner",options:["culture","disabled","icons","incremental","max","min","numberFormat","page","step"],events:["create","start","spin","stop","change"],postInit:e})}(),function(){var e,r,s,a,l,c;e=function(e,i){var o=i();n.isWriteableObservable(o.selected)&&t(e).on("tabsshow.tabs",function(n,i){t(e)[0]===n.target&&o.selected(i.index)}),n.utils.domNodeDisposal.addDisposeCallback(e,function(){t(e).off(".tabs")})},r=function(e,i){var o=i();n.isWriteableObservable(o.active)&&t(e).on("tabsactivate.tabs",function(n,i){t(e)[0]===n.target&&o.active(i.newTab.index())}),n.utils.domNodeDisposal.addDisposeCallback(e,function(){t(e).off(".tabs")})},1===i.jQueryUI.major&&8===i.jQueryUI.minor?(s=["ajaxOptions","cache","collapsible","cookie","disabled","event","fx","idPrefix","panelTemplate","selected","spinner","tabTemplate"],a=["add","create","disable","enable","load","remove","select","show"],c=e,l=!1):(s=["active","collapsible","disabled","event","heightStyle","hide","show"],a=["activate","beforeActivate","beforeLoad","create","load"],c=r,l=!0),o.create({name:"tabs",options:s,events:a,postInit:c,hasRefresh:l})}(),function(){var e;e=function(e,i){var o=i();o.isOpen&&n.computed({read:function(){t(e).tooltip(n.utils.unwrapObservable(o.isOpen)?"open":"close")},disposeWhenNodeIsRemoved:e}),n.isWriteableObservable(o.isOpen)&&(t(e).on("tooltipopen.tooltip",function(){o.isOpen(!0)}),t(e).on("tooltipclose.tooltip",function(){o.isOpen(!1)})),n.utils.domNodeDisposal.addDisposeCallback(e,function(){t(e).off(".tooltip")})},o.create({name:"tooltip",options:["content","disabled","hide","items","position","show","tooltipClass","track"],events:["create","open","close"],postInit:e})}(),e.bindingFactory=o,e.version="1.0.0"}),!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,function e(t,n){"use strict";function i(e){var t=m[p.locale];return t?t[e]:m.en[e]}function o(e,n,i){e.stopPropagation(),e.preventDefault();var o=t.isFunction(i)&&i(e)===!1;o||n.modal("hide")}function r(e){var t,n=0;for(t in e)n++;return n}function s(e,n){var i=0;t.each(e,function(e,t){n(e,t,i++)})}function a(e){var n,i;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return e=t.extend({},p,e),e.buttons||(e.buttons={}),e.backdrop=e.backdrop?"static":!1,n=e.buttons,i=r(n),s(n,function(e,o,r){if(t.isFunction(o)&&(o=n[e]={callback:o}),"object"!==t.type(o))throw new Error("button with key "+e+" must be an object");o.label||(o.label=e),o.className||(o.className=2>=i&&r===i-1?"btn-primary":"btn-default")}),e}function l(e,t){var n=e.length,i={};if(1>n||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof e[0]?(i[t[0]]=e[0],i[t[1]]=e[1]):i=e[0],i}function c(e,n,i){return t.extend(!0,{},e,l(n,i))}function u(e,t,n,i){var o={className:"bootbox-"+e,buttons:h.apply(null,t)};return f(c(o,i,n),t)}function h(){for(var e={},t=0,n=arguments.length;n>t;t++){var o=arguments[t],r=o.toLowerCase(),s=o.toUpperCase();e[r]={label:i(s)}}return e}function f(e,t){var i={};return s(t,function(e,t){i[t]=!0}),s(e.buttons,function(e){if(i[e]===n)throw new Error("button key "+e+" is not allowed (options are "+t.join("\n")+")")}),e}var d={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},p={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},g={};g.alert=function(){var e;if(e=u("alert",["ok"],["message","callback"],arguments),e.callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return t.isFunction(e.callback)?e.callback():!0},g.dialog(e)},g.confirm=function(){var e;if(e=u("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback(!1)},e.buttons.confirm.callback=function(){return e.callback(!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return g.dialog(e)},g.prompt=function(){var e,i,o,r,a,l,u;r=t(d.form),i={className:"bootbox-prompt",buttons:h("cancel","confirm"),value:"",inputType:"text"},e=f(c(i,arguments,["title","callback"]),["cancel","confirm"]),l=e.show===n?!0:e.show;var p=["date","time","number"],m=document.createElement("input");if(m.setAttribute("type",e.inputType),p[e.inputType]&&(e.inputType=m.type),e.message=r,e.buttons.cancel.callback=e.onEscape=function(){return e.callback(null)},e.buttons.confirm.callback=function(){var n;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":n=a.val();break;case"checkbox":var i=a.find("input:checked");n=[],s(i,function(e,i){n.push(t(i).val())})}return e.callback(n)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!d.inputs[e.inputType])throw new Error("invalid prompt type");switch(a=t(d.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":a.val(e.value);break;case"select":var v={};if(u=e.inputOptions||[],!u.length)throw new Error("prompt with select requires options");s(u,function(e,i){var o=a;if(i.value===n||i.text===n)throw new Error("given options in wrong format");i.group&&(v[i.group]||(v[i.group]=t("<optgroup/>").attr("label",i.group)),o=v[i.group]),o.append("<option value='"+i.value+"'>"+i.text+"</option>")}),s(v,function(e,t){a.append(t)}),a.val(e.value);break;case"checkbox":var b=t.isArray(e.value)?e.value:[e.value];if(u=e.inputOptions||[],!u.length)throw new Error("prompt with checkbox requires options");if(!u[0].value||!u[0].text)throw new Error("given options in wrong format");a=t("<div/>"),s(u,function(n,i){var o=t(d.inputs[e.inputType]);o.find("input").attr("value",i.value),o.find("label").append(i.text),s(b,function(e,t){t===i.value&&o.find("input").prop("checked",!0)}),a.append(o)})}return e.placeholder&&a.attr("placeholder",e.placeholder),e.pattern&&a.attr("pattern",e.pattern),r.append(a),r.on("submit",function(e){e.preventDefault(),o.find(".btn-primary").click()}),o=g.dialog(e),o.off("shown.bs.modal"),o.on("shown.bs.modal",function(){a.focus()}),l===!0&&o.modal("show"),o},g.dialog=function(e){e=a(e);var n=t(d.dialog),i=n.find(".modal-body"),r=e.buttons,l="",c={onEscape:e.onEscape};if(s(r,function(e,t){l+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>",c[e]=t.callback}),i.find(".bootbox-body").html(e.message),e.animate===!0&&n.addClass("fade"),e.className&&n.addClass(e.className),e.title&&i.before(d.header),e.closeButton){var u=t(d.closeButton);e.title?n.find(".modal-header").prepend(u):u.css("margin-top","-10px").prependTo(i)}return e.title&&n.find(".modal-title").html(e.title),l.length&&(i.after(d.footer),n.find(".modal-footer").html(l)),n.on("hidden.bs.modal",function(e){e.target===this&&n.remove()}),n.on("shown.bs.modal",function(){n.find(".btn-primary:first").focus()}),n.on("escape.close.bb",function(e){c.onEscape&&o(e,n,c.onEscape)}),n.on("click",".modal-footer button",function(e){var i=t(this).data("bb-handler");o(e,n,c[i])}),n.on("click",".bootbox-close-button",function(e){o(e,n,c.onEscape)}),n.on("keyup",function(e){27===e.which&&n.trigger("escape.close.bb")}),t(e.container).append(n),n.modal({backdrop:e.backdrop,keyboard:!1,show:!1}),e.show&&n.modal("show"),n},g.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(p,e)},g.hideAll=function(){t(".bootbox").modal("hide")};var m={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"××™×©×•×¨",CANCEL:"×‘×™×˜×•×œ",CONFIRM:"××™×©×•×¨"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},lt:{OK:"Gerai",CANCEL:"AtÅ¡aukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"ApstiprinÄt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"PotwierdÅº"},ru:{OK:"OK",CANCEL:"ÐžÑ‚Ð¼ÐµÐ½Ð°",CONFIRM:"ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"Ä°ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"å–æ¶ˆ",CONFIRM:"ç¡®è®¤"},zh_TW:{OK:"OK",CANCEL:"å–æ¶ˆ",CONFIRM:"ç¢ºèª"}};return g.init=function(n){return e(n||t)},g}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");if(+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var o=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){r.trigger("closed.bs.alert").remove()}var i=e(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var r=e(o);t&&t.preventDefault(),r.length||(r=i.hasClass("alert")?i:i.parent()),r.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one(e.support.transition.end,n).emulateTransitionEnd(150):n())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof t&&o[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.isLoading=!1};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",r=i.data();t+="Text",r.resetText||i.data("resetText",i[o]()),i[o](r[t]||this.options[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),o=i.data("bs.button"),r="object"==typeof n&&n;o||i.data("bs.button",o=new t(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,i=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),
this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var i=this.$element.find(".item.active"),o=n||i[t](),r=this.interval,s="next"==t?"left":"right",a="next"==t?"first":"last",l=this;if(!o.length){if(!this.options.wrap)return;o=this.$element.find(".item")[a]()}if(o.hasClass("active"))return this.sliding=!1;var c=e.Event("slide.bs.carousel",{relatedTarget:o[0],direction:s});return this.$element.trigger(c),c.isDefaultPrevented()?void 0:(this.sliding=!0,r&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(l.$indicators.children()[l.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one(e.support.transition.end,function(){o.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),r&&this.cycle(),this)};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),o=i.data("bs.carousel"),r=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n),s="string"==typeof n?n:r.slide;o||i.data("bs.carousel",o=new t(this,r)),"number"==typeof n?o.to(n):s?o[s]():r.interval&&o.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,i=e(this),o=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),r=e.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(r.interval=!1),o.carousel(r),(s=i.attr("data-slide-to"))&&o.data("bs.carousel").to(s),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return r.call(this);var s=e.camelCase(["scroll",o].join("-"));this.$element.one(e.support.transition.end,e.proxy(r,this)).emulateTransitionEnd(350)[o](this.$element[0][s])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),o=i.data("bs.collapse"),r=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!o&&r.toggle&&"show"==n&&(n=!n),o||i.data("bs.collapse",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),o=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=e(o),s=r.data("bs.collapse"),a=s?"toggle":i.data(),l=i.attr("data-parent"),c=l&&e(l);s&&s.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),r.collapse(a)})}(jQuery),+function(e){"use strict";function t(t){e(i).remove(),e(o).each(function(){var i=n(e(this)),o={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",o)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",o))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",o="[data-toggle=dropdown]",r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(i){var o=e(this);if(!o.is(".disabled, :disabled")){var r=n(o),s=r.hasClass("open");if(t(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var a={relatedTarget:this};if(r.trigger(i=e.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;r.toggleClass("open").trigger("shown.bs.dropdown",a),o.focus()}return!1}},r.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),s=r.hasClass("open");if(!s||s&&27==t.keyCode)return 27==t.which&&r.find(o).focus(),i.click();var a=" li:not(.divider):visible a",l=r.find("[role=menu]"+a+", [role=listbox]"+a);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).focus()}}}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o+", [role=menu], [role=listbox]",r.prototype.keydown)}(jQuery),+function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(o)}).emulateTransitionEnd(300):n.$element.focus().trigger(o)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var o=e(this),r=o.data("bs.modal"),s=e.extend({},t.DEFAULTS,o.data(),"object"==typeof n&&n);r||o.data("bs.modal",r=new t(this,s)),"string"==typeof n?r[n](i):s.show&&r.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),o=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),n.data());n.is("a")&&t.preventDefault(),o.modal(r,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,s=r.test(o);s&&(o=o.replace(r,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(o),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var a=this.getPosition(),l=i[0].offsetWidth,c=i[0].offsetHeight;if(s){var u=this.$element.parent(),h=o,f=document.documentElement.scrollTop||document.body.scrollTop,d="body"==this.options.container?window.innerWidth:u.outerWidth(),p="body"==this.options.container?window.innerHeight:u.outerHeight(),g="body"==this.options.container?0:u.offset().left;o="bottom"==o&&a.top+a.height+c-f>p?"top":"top"==o&&a.top-f-c<0?"bottom":"right"==o&&a.right+l>d?"left":"left"==o&&a.left-l<g?"right":o,i.removeClass(h).addClass(o)}var m=this.getCalculatedOffset(o,a,l,c);this.applyPlacement(m,o),this.hoverState=null;var v=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,v).emulateTransitionEnd(150):v()}},t.prototype.applyPlacement=function(t,n){var i,o=this.tip(),r=o[0].offsetWidth,s=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),l=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(l)&&(l=0),t.top=t.top+a,t.left=t.left+l,e.offset.setOffset(o[0],e.extend({using:function(e){o.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),o.addClass("in");var c=o[0].offsetWidth,u=o[0].offsetHeight;if("top"==n&&u!=s&&(i=!0,t.top=t.top+s-u),/bottom|top/.test(n)){var h=0;t.left<0&&(h=-2*t.left,t.left=0,o.offset(t),c=o[0].offsetWidth,u=o[0].offsetHeight),this.replaceArrow(h-r+c,c,"left")}else this.replaceArrow(u-s,u,"top");i&&o.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),o=i.data("bs.tooltip"),r="object"==typeof n&&n;(o||"destroy"!=n)&&(o||i.data("bs.tooltip",o=new t(this,r)),"string"==typeof n&&o[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),o=i.data("bs.popover"),r="object"==typeof n&&n;(o||"destroy"!=n)&&(o||i.data("bs.popover",o=new t(this,r)),"string"==typeof n&&o[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(n,i){var o,r=e.proxy(this.process,this);this.$element=e(e(n).is("body")?window:n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",r),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||(o=e(n).attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this;this.$body.find(this.selector).map(function(){var i=e(this),o=i.data("target")||i.attr("href"),r=/^#./.test(o)&&e(o);return r&&r.length&&r.is(":visible")&&[[r[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),o]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(t>=i)return s!=(e=r.last()[0])&&this.activate(e);if(s&&t<=o[0])return s!=(e=r[0])&&this.activate(e);for(e=o.length;e--;)s!=r[e]&&t>=o[e]&&(!o[e+1]||t<=o[e+1])&&this.activate(r[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),o=i.data("bs.scrollspy"),r="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=n.find(".active:last a")[0],r=e.Event("show.bs.tab",{relatedTarget:o});if(t.trigger(r),!r.isDefaultPrevented()){var s=e(i);this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:o})})}}},t.prototype.activate=function(t,n,i){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var r=n.find("> .active"),s=i&&e.support.transition&&r.hasClass("fade");s?r.one(e.support.transition.end,o).emulateTransitionEnd(150):o(),r.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new t(this)),"string"==typeof n&&o[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){"use strict";var t=function(n,i){this.options=e.extend({},t.DEFAULTS,i),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),i=this.$window.scrollTop(),o=this.$element.offset(),r=this.options.offset,s=r.top,a=r.bottom;"top"==this.affixed&&(o.top+=i),"object"!=typeof r&&(a=s=r),"function"==typeof s&&(s=r.top(this.$element)),"function"==typeof a&&(a=r.bottom(this.$element));var l=null!=this.unpin&&i+this.unpin<=o.top?!1:null!=a&&o.top+this.$element.height()>=n-a?"bottom":null!=s&&s>=i?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),u=e.Event(c+".bs.affix");this.$element.trigger(u),u.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(c).trigger(e.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:n-a-this.$element.height()}))}}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var i=e(this),o=i.data("bs.affix"),r="object"==typeof n&&n;o||i.data("bs.affix",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery),function(e){"use strict";var t='[data-toggle="context"]',n=function(t,n){this.$element=e(t),this.before=n.before||this.before,this.onItem=n.onItem||this.onItem,this.scopes=n.scopes||null,n.target&&this.$element.data("target",n.target),this.listen()};n.prototype={constructor:n,show:function(t){var n,i,o,r,s={relatedTarget:this};if(!this.isDisabled()&&(this.closemenu(),this.before.call(this,t,e(t.currentTarget))))return n=this.getMenu(),n.trigger(i=e.Event("show.bs.context",s)),o=this.getPosition(t,n),r="li:not(.divider)",n.attr("style","").css(o).addClass("open").on("click.context.data-api",r,e.proxy(this.onItem,this,e(t.currentTarget))).trigger("shown.bs.context",s),e("html").on("click.context.data-api",n.selector,e.proxy(this.closemenu,this)),!1},closemenu:function(){var t,n,i,o;return t=this.getMenu(),t.hasClass("open")?(o={relatedTarget:this},t.trigger(n=e.Event("hide.bs.context",o)),i="li:not(.divider)",t.removeClass("open").off("click.context.data-api",i).trigger("hidden.bs.context",o),e("html").off("click.context.data-api",t.selector),!1):void 0},before:function(){return!0},onItem:function(){return!0},listen:function(){this.$element.on("contextmenu.context.data-api",this.scopes,e.proxy(this.show,this)),e("html").on("click.context.data-api",e.proxy(this.closemenu,this))},destroy:function(){this.$element.off(".context.data-api").removeData("context"),e("html").off(".context.data-api")},isDisabled:function(){return this.$element.hasClass(".disabled")||this.$element.attr("disabled")},getMenu:function(){var t,n=this.$element.data("target");return n||(n=this.$element.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),t=e(n),t&&t.length?t:this.$element.find(n)},getPosition:function(t,n){var i,o,r,s=t.clientX,a=t.clientY,l=e(window).width(),c=e(window).height(),u=n.find(".dropdown-menu").outerWidth(),h=n.find(".dropdown-menu").outerHeight(),f={position:"absolute","z-index":9999};return i=a+h>c?{top:a-h+e(window).scrollTop()}:{top:a+e(window).scrollTop()},o=s+u>l&&s-u>0?{left:s-u+e(window).scrollLeft()}:{left:s+e(window).scrollLeft()},r=n.offsetParent().offset(),o.left=o.left-r.left,i.top=i.top-r.top,e.extend(f,i,o)}},e.fn.contextmenu=function(t,i){return this.each(function(){var o=e(this),r=o.data("context"),s="object"==typeof t&&t;r||o.data("context",r=new n(o,s)),"string"==typeof t&&r[t].call(r,i)})},e.fn.contextmenu.Constructor=n,e(document).on("contextmenu.context.data-api",t,function(t){e(this).contextmenu("show",t),t.preventDefault()})}(jQuery),function(e,t,n){function i(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function o(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return m[e.which]?m[e.which]:v[e.which]?v[e.which]:String.fromCharCode(e.which).toLowerCase()}function r(e){e=e||{};var t,n=!1;for(t in C)e[t]?n=!0:C[t]=0;n||(_=!1)}function s(e,t,n,i,o,r){var s,a,l=[],c=n.type;if(!w[e])return[];for("keyup"==c&&u(e)&&(t=[e]),s=0;s<w[e].length;++s)if(a=w[e][s],!(!i&&a.seq&&C[a.seq]!=a.level||c!=a.action||("keypress"!=c||n.metaKey||n.ctrlKey)&&t.sort().join(",")!==a.modifiers.sort().join(","))){var h=i&&a.seq==i&&a.level==r;(!i&&a.combo==o||h)&&w[e].splice(s,1),l.push(a)}return l}function a(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function l(e,t,n,i){T.stopCallback(t,t.target||t.srcElement,n,i)||!1!==e(t,n)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function c(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=o(e);t&&("keyup"==e.type&&k===t?k=!1:T.handleKey(t,a(e),e))}function u(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function h(e,t,n,i){function s(t){return function(){_=t,++C[e],clearTimeout(g),g=setTimeout(r,1e3)}}function a(t){l(n,t,e),"keyup"!==i&&(k=o(t)),setTimeout(r,10)}for(var c=C[e]=0;c<t.length;++c){var u=c+1===t.length?a:s(i||f(t[c+1]).action);d(t[c],u,i,e,c)}}function f(e,t){var n,i,o,r=[];for(n="+"===e?["+"]:e.split("+"),o=0;o<n.length;++o)i=n[o],y[i]&&(i=y[i]),t&&"keypress"!=t&&b[i]&&(i=b[i],r.push("shift")),u(i)&&r.push(i);if(n=i,o=t,!o){if(!p){p={};for(var s in m)s>95&&112>s||m.hasOwnProperty(s)&&(p[m[s]]=s)}o=p[n]?"keydown":"keypress"}return"keypress"==o&&r.length&&(o="keydown"),{key:i,modifiers:r,action:o}}function d(e,t,n,i,o){x[e+":"+n]=t,e=e.replace(/\s+/g," ");var r=e.split(" ");1<r.length?h(e,r,t,n):(n=f(e,n),w[n.key]=w[n.key]||[],s(n.key,n.modifiers,{type:n.action},i,e,o),w[n.key][i?"unshift":"push"]({callback:t,modifiers:n.modifiers,action:n.action,seq:i,level:o,combo:e}))}var p,g,m={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},v={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},b={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},y={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},w={},x={},C={},k=!1,S=!1,_=!1;for(n=1;20>n;++n)m[111+n]="f"+n;for(n=0;9>=n;++n)m[n+96]=n;i(t,"keypress",c),i(t,"keydown",c),i(t,"keyup",c);var T={bind:function(e,t,n){e=e instanceof Array?e:[e];for(var i=0;i<e.length;++i)d(e[i],t,n);return this},unbind:function(e,t){return T.bind(e,function(){},t)},trigger:function(e,t){return x[e+":"+t]&&x[e+":"+t]({},e),this},reset:function(){return w={},x={},this},stopCallback:function(e,t){return-1<(" "+t.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},handleKey:function(e,t,n){var i,o=s(e,t,n);t={};var a=0,c=!1;for(i=0;i<o.length;++i)o[i].seq&&(a=Math.max(a,o[i].level));for(i=0;i<o.length;++i)o[i].seq?o[i].level==a&&(c=!0,t[o[i].seq]=1,l(o[i].callback,n,o[i].combo,o[i].seq)):c||l(o[i].callback,n,o[i].combo);o="keypress"==n.type&&S,n.type!=_||u(e)||o||r(t),S=c&&"keydown"==n.type}};e.Mousetrap=T,"function"==typeof define&&define.amd&&define(T)}(window,document),"object"==typeof nw){window.usingNode=!0;var fs=require("fs"),mkdirp=require("mkdirp"),trash=require("trash"),getDirName=require("path").dirname,gui=require("nw.gui"),updater=require("cside-updater"),win=gui.Window.get();win.show(),process.on("uncaughtException",function(e){if(bootbox.alert(e.message),console.log(e),"mac_os"===cside.getPlatform())var t=process.execPath.lastIndexOf("Choicescript IDE.app"),n=process.execPath.substring(0,t);else var n=process.execPath.slice(0,process.execPath.lastIndexOf("\\"))+"\\";fs.writeFile(n+"error-log.txt",e.message()+"\n",function(e){if(e)throw e})})}else window.usingNode=!1,window.onbeforeunload=function(e){if(cside.session.isDirty()&&0!==cside.getProjects().length){var t="Warning: You have unsaved changes.";return e=e||window.event,e&&(e.returnValue=t),t}return null};window.cside=new IDEViewModel,ko.applyBindings(cside,$(".main-wrap")[0]),cside.init(),SceneNavigator.prototype.setSceneList=function(e){
this._sceneList=e,this._sceneMap={};for(var t=0;t<e.length-1;t++){var n=e[t],i=e[t+1];this._sceneMap[n]=i}this._startupScene=e[0]},SceneNavigator.prototype.nextSceneName=function(e){var t=this._sceneMap[e];return t},SceneNavigator.prototype.getStartupScene=function(){return this._startupScene},SceneNavigator.prototype.setStartingStatsClone=function(e){this.startingStats={};for(var t in e)this.startingStats[t]=e[t]},SceneNavigator.prototype.resetStats=function(e){for(var t in e)delete e[t];for(t in this.startingStats)e[t]=this.startingStats[t];this.bugLog=[]},SceneNavigator.prototype.repairStats=function(e){for(var t in this.startingStats){var n=this.startingStats[t];null!==n&&void 0!==n&&("undefined"==typeof e[t]||null===e[t])&&(e[t]=this.startingStats[t])}},SceneNavigator.prototype.bugLog=[],SceneNavigator.prototype.achievements={},SceneNavigator.prototype.achievementList=[],SceneNavigator.prototype.achieved={},SceneNavigator.prototype.loadAchievements=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t],i=n[0],o=n[1],r=n[2],s=n[3],a=n[4],l=n[5];this.achievements[i]={visible:o,points:r,title:s,earnedDescription:a,preEarnedDescription:l},this.achievementList.push(i)}},_global=this,function(){var e,t,n;"undefined"!=typeof window&&(e=navigator.userAgent,t=window.location.href,n=window.location.protocol),_global.isWebOS=/webOS/.test(e),_global.isMobile=_global.isWebOS||/Mobile/.test(e),_global.isFile=/^file:/.test(t),_global.isXul=/^chrome:/.test(t),_global.isWinOldApp=!1;try{isWinOldApp=window.external.IsWinOldApp()}catch(i){}_global.isWeb=!_global.isWinOldApp&&/^https?:/.test(t),_global.isAndroid=/Android/.test(e),_global.isSecureWeb=/^https:?$/.test(n),_global.isSafari=/Safari/.test(e),_global.isIE=/(MSIE|Trident)/.test(e),_global.isIPad=/iPad/.test(e),_global.isKindleFire=/Kindle Fire/.test(e),_global.isWinStoreApp="ms-appx:"==n,_global.isCef=!!_global.cefQuery}(),_global.loadTime=(new Date).getTime();var loginUrlBase="https://www.choiceofgames.com/api/";webSaveDomain="www.choiceofgames.com",webSaveUrl="https://"+webSaveDomain+"/ajax_proxy.php/websave",tempStatWrites={},crcTable="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",shortMonthStrings=[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nav=new SceneNavigator(["startup"]),stats={};